<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog.johnnyreilly.com/rss.xml" title="I CAN MAKE THIS WORK Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog.johnnyreilly.com/atom.xml" title="I CAN MAKE THIS WORK Blog Atom Feed"><title data-react-helmet="true">Blog | I CAN MAKE THIS WORK</title><meta data-react-helmet="true" property="og:title" content="Blog | I CAN MAKE THIS WORK"><meta data-react-helmet="true" name="description" content="Blog"><meta data-react-helmet="true" property="og:description" content="Blog"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><link data-react-helmet="true" rel="shortcut icon" href="/blog.johnnyreilly.com/img/favicon.ico"><link rel="stylesheet" href="/blog.johnnyreilly.com/styles.a755cef0.css">
<link rel="preload" href="/blog.johnnyreilly.com/styles.7c653e04.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/runtime~main.8fae10d8.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/main.aa01ada2.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/1.a2fa6ec1.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/2.541c8135.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/a6aa9e1f.8b47d5c4.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/c3b5bd8c.b5dc6e8e.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/98821aa0.bdfba4ac.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/e716e4a2.dce075ba.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/df8b2109.eaaa1827.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/fa1c9811.6ee9782f.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/4011a4a4.8293621d.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/0ba27666.6beec0b8.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/87e112a6.f731c6e1.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/ba67aaac.4debbf83.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/65970fee.6941f052.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/e59d3252.a455db80.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/9010b26a.41ae5dc5.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/blog.johnnyreilly.com/"><img src="/blog.johnnyreilly.com/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/blog.johnnyreilly.com/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">I CAN MAKE THIS WORK</strong></a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">üåû</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/blog.johnnyreilly.com/"><img src="/blog.johnnyreilly.com/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/blog.johnnyreilly.com/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">I CAN MAKE THIS WORK</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"></ul></div></div></div></nav><div class="main-wrapper blog-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--2"><div class="sidebar_SWld thin-scrollbar"><h3 class="sidebarItemTitle_Km2m">Recent posts</h3><ul class="sidebarItemList_3UpA"><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog.johnnyreilly.com/2021/03/10/managed-identity-azure-sql-entity-framework">Managed Identity, Azure SQL and Entity Framework</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog.johnnyreilly.com/2021/03/06/generate-typescript-and-csharp-clients-with-nswag">Generate TypeScript and CSharp clients with NSwag based on an API</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog.johnnyreilly.com/2021/02/27/goodbye-client-affinity-hello-data-protection-with-azure">Goodbye Client Affinity, Hello Data Protection with Azure</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog.johnnyreilly.com/2021/02/16/easy-auth-tokens-survive-releases-on-linux-azure-app-service">Making Easy Auth tokens survive releases on Linux Azure App Service</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog.johnnyreilly.com/2021/02/11/azure-app-service-health-checks-and-zero-downtime-deployments">Azure App Service, Health checks and zero downtime deployments</a></li></ul></div></div><main class="col col--8"><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_3-lP"><a href="/blog.johnnyreilly.com/2012/09/24/giving-odata-to-crm-40">Giving OData to CRM 4.0</a></h2><div class="margin-vert--md"><time datetime="2012-09-24T00:00:00.000Z" class="blogPostDate_Ta7i">September 24, 2012  ¬∑ 4 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><p>Just recently I was tasked with seeing if we could provide a way to access our Dynamics CRM instance via OData. My initial investigations made it seem like there was nothing for me to do; <a href="http://msdn.microsoft.com/en-us/library/gg309461.aspx" target="_blank" rel="noopener noreferrer">CRM 2011 provides OData support out of the box</a>. Small problem. We were running CRM 4.0.</p><p> It could well have ended there apart from the fact that Microsoft makes it astonishingly easy to to create your own OData service using WCF Data Services. Because it&#x27;s so straightforward I was able to get an OData solution for CRM 4.0 up and running with very little heavy lifting at all. Want to know how it&#x27;s done?</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="linq-to-crm"></a>LINQ to CRM<a class="hash-link" href="#linq-to-crm" title="Direct link to heading">#</a></h2><p>To start with you&#x27;re going to need the <a href="http://www.microsoft.com/en-us/download/details.aspx?id=38" target="_blank" rel="noopener noreferrer">CRM SDK 4.0</a>. This contains a &quot;vanilla&quot; LINQ to CRM client which is used in each of the example applications that can be found in <code>microsoft.xrm\samples</code>. We want this client (or something very like it) to use as the basis for our OData service.</p><p>In order to get a LINQ to CRM provider that caters for your own customised CRM instance you need to use the <code>crmsvcutil</code> utility from the CRM SDK (found in the <code>microsoft.xrm\tools\</code> directory). Detailed instructions on how to use this can be found in this Word document: <code>microsoft.xrm\advanced_developer_extensions_-_developers_guide.docx</code>. Extra information around the topic can be found using these links:</p><ul><li><a href="http://msdn.microsoft.com/en-us/library/ff681559" target="_blank" rel="noopener noreferrer">MSDN docs on xRM</a></li><li><a href="http://msdn.microsoft.com/en-us/library/ff681573" target="_blank" rel="noopener noreferrer">MSDN examples of LINQ queries</a></li><li><a href="http://www.dynamicscrmtrickbag.com/" target="_blank" rel="noopener noreferrer">CRM blog site</a></li><li><a href="http://community.adxstudio.com/products/adxstudio-portals/developers-guide/archive/linq-to-crm-22/" target="_blank" rel="noopener noreferrer">Another site listing examples of LINQ to CRM</a></li></ul><p>You should end up with custom generated data context classes which look not dissimilar to similar classes that you may already have in place for Entity Framework etc. With your <code>Xrm.DataContext</code> in hand (a subclass of <code>Microsoft.Xrm.Client.Data.Services.CrmDataContext</code>) you&#x27;ll be ready to move forwards.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="make-me-an-odata-service"></a>Make me an OData Service<a class="hash-link" href="#make-me-an-odata-service" title="Direct link to heading">#</a></h2><p>As I said, Microsoft makes it fantastically easy to get an OData service up and running. <a href="http://msdn.microsoft.com/en-US/library/dd728275" target="_blank" rel="noopener noreferrer">In this example</a> an entity context model is created from the Northwind database and then exposed as an OData service. To create my CRM OData service I followed a similar process. But rather than creating an entity context model using a database I plugged in the <code>Xrm.DataContext</code> instance of CRM that we created a moment ago. These are the steps I followed to make my service:</p><ol><li><p>Create a new ASP.NET Web Application called &quot;CrmOData&quot; (in case it&#x27;s relevant I was using Visual Studio 2010 to do this).</p></li><li><p>Remove all ASPXs / JavaScript / CSS files etc leaving you with an essentially empty project.</p></li><li><p>Add references to the following DLLs that come with the SDK: - microsoft.crm.sdk.dll</p><ul><li>microsoft.crm.sdktypeproxy.dll</li><li>microsoft.crm.sdktypeproxy.xmlserializers.dll</li><li>microsoft.xrm.client.dll</li><li>microsoft.xrm.portal.dll</li><li>microsoft.xrm.portal.files.dll</li></ul></li><li><p>Add the <code>&amp;lt;microsoft.xrm.client&amp;gt;</code> config section to your web.config (not forgetting the associated Xrm connection string)</p></li><li><p>Add this new file below to the root of the project:</p></li></ol><script src="https://gist.github.com/3765280.js?file=Crm.svc.cs"></script><p>And that&#x27;s it - done. When you run this web application you will find an OData service exposed at http://localhost:12345/Crm.svc. You could have it even simpler if you wanted - you could pull out the logging that&#x27;s in place and leave only the <code>InitializeService</code> there. That&#x27;s all you need. (The <code>GetEntityById</code> method is a helper method of my own for identifying the GUIDs of CRM.)</p><p>You may have noticed that I have made use of caching for my OData service following the steps I found <a href="http://blogs.msdn.com/b/peter_qian/archive/2010/11/17/using-asp-net-output-caching-with-wcf-data-services.aspx" target="_blank" rel="noopener noreferrer">here</a>. Again you may or may not want to use this.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="now-a-warning"></a>Now, a warning...<a class="hash-link" href="#now-a-warning" title="Direct link to heading">#</a></h2><p>Okay - not so much a warning as a limitation. Whilst most aspects of the OData service work as you would hope there is no support for the $select operator. I had a frustrating time trying to discover why and then came upon this explanation:</p><p><em>&quot;$select statements are not supported. This problem is being discussed here <a href="http://social.msdn.microsoft.com/Forums/en/adodotnetdataservices/thread/366086ee-dcef-496a-ad15-f461788ae678" target="_blank" rel="noopener noreferrer">http://social.msdn.microsoft.com/Forums/en/adodotnetdataservices/thread/366086ee-dcef-496a-ad15-f461788ae678</a> and is caused by the fact that CrmDataContext implements the IExpandProvider interface which in turn causes the DataService to lose support for $select projections&quot;</em></p><p>You can also see <a href="http://social.microsoft.com/Forums/en/crmdevelopment/thread/31daedb4-3d75-483a-8d7f-269af3375d74" target="_blank" rel="noopener noreferrer">here</a> for the original post discussing this.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="finishing-off"></a>Finishing off<a class="hash-link" href="#finishing-off" title="Direct link to heading">#</a></h2><p>In the example I set out here I used the version of WCF Data Services that shipped with Visual Studio 2010. WCF Data Services now ships separately from the .NET Framework and you can <a href="http://nuget.org/packages?q=wcf+data+services" target="_blank" rel="noopener noreferrer">pick up the latest and greatest from Nuget</a>. I understand that you could easily switch over to using the latest versions but since I didn&#x27;t see any feature that I needed on this occasion I haven&#x27;t.</p><p>I hope you find this useful.</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/o-data">OData</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/wcf-data-services">WCF Data Services</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/crm-4-0">CRM 4.0</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/linq">LINQ</a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_3-lP"><a href="/blog.johnnyreilly.com/2012/09/06/globalize-and-jquery-validate">Globalize and jQuery Validation</a></h2><div class="margin-vert--md"><time datetime="2012-09-06T00:00:00.000Z" class="blogPostDate_Ta7i">September 6, 2012  ¬∑ 4 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="update-05102015"></a>Update 05/10/2015<a class="hash-link" href="#update-05102015" title="Direct link to heading">#</a></h2><p> If you&#x27;re after a version of this that works with Globalize 1.x then take a look <a href="/blog.johnnyreilly.com/2015/10/jquery-validation-globalize-hits-10.html">here</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="update-27082013"></a>Update 27/08/2013<a class="hash-link" href="#update-27082013" title="Direct link to heading">#</a></h2><p>To make it easier for people to use the approach detailed in this post I have created a repository for <code>jquery.validate.globalize.js</code> on GitHub <a href="https://github.com/johnnyreilly/jquery-validation-globalize" target="_blank" rel="noopener noreferrer">here</a>.</p><p>This is also available as a nuget package <a href="https://www.nuget.org/packages/jQuery.Validation.Globalize/" target="_blank" rel="noopener noreferrer">here</a>.</p><p>To see a good demo take a look <a href="http://jqueryvalidationunobtrusivenative.azurewebsites.net/AdvancedDemo/Globalize" target="_blank" rel="noopener noreferrer">here</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="background"></a>Background<a class="hash-link" href="#background" title="Direct link to heading">#</a></h2><p><a href="http://icanmakethiswork.blogspot.co.uk/2012/05/globalizejs-number-and-date.html" target="_blank" rel="noopener noreferrer">I&#x27;ve written before about a great little library called Globalize</a> which makes locale specific number / date formatting simple within JavaScript. And I&#x27;ve just stumbled upon an <a href="http://www.hanselman.com/blog/GlobalizationInternationalizationAndLocalizationInASPNETMVC3JavaScriptAndJQueryPart1.aspx" target="_blank" rel="noopener noreferrer">old post written by Scott Hanselman about the business of Globalisation / Internationalisation / Localisation within ASP.NET</a>. It&#x27;s a great post and I recommend reading it (I&#x27;m using many of the approaches he discusses).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="jquery-global-is-dead-long-live-globalize"></a>jQuery Global is dead... Long live Globalize!<a class="hash-link" href="#jquery-global-is-dead-long-live-globalize" title="Direct link to heading">#</a></h2><p>However, there&#x27;s one tweak I would make to Scotts suggestions and that&#x27;s to use Globalize in place of the jQuery Global plugin. The jQuery Global plugin has now effectively been reborn as Globalize (with no dependancy on jQuery). As far as I can tell jQuery Global is now disappearing from the web - certainly the link in Scotts post is dead now at least. I&#x27;ve <del>ripped off</del> been inspired by the &quot;Globalized jQuery Unobtrusive Validation&quot; section of Scotts article and made <code>jquery.validate.globalize.js</code>.</p><p>And for what it&#x27;s worth <code>jquery.validate.globalize.js</code> applies equally to standard jQuery Validation as well as to jQuery Unobtrusive Validation. I say that as the above JavaScript is effectively a monkey patch to the number / date / range / min / max methods of jQuery.validate.js which forces these methods to use Globalize&#x27;s parsing support instead.</p><p>Here&#x27;s the JavaScript:</p><script src="https://gist.github.com/3651751.js?file=jquery.validate.globalize.js"></script><p>The above script does 2 things. Firstly it monkey patches jquery.validate.js to make use of Globalize.js number and date parsing in place of the defaults. Secondly it initialises Globalize to relevant current culture driven by the <code>html lang</code> property. So if the html tag looked like this:</p><div class="mdxCodeBlock_1zKU">&lt;html lang=&quot;de-DE&quot;&gt; ... &lt;/html&gt;</div><p>Then Globalize would be initialised with the &quot;de-DE&quot; culture assuming that culture was available and had been served up to the client. (By the way, the Globalize initialisation logic has only been placed in the code above to demonstrate that Globalize needs to be initialised to the culture. It&#x27;s more likely that this initialisation step would sit elsewhere in a &quot;proper&quot; app.)</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="wait-wheres-html-lang-getting-set"></a>Wait, where&#x27;s <code>html lang</code> getting set?<a class="hash-link" href="#wait-wheres-html-lang-getting-set" title="Direct link to heading">#</a></h2><p>In Scott&#x27;s article he created a <code>MetaAcceptLanguage</code> helper to generate a META tag like this: <code>&amp;lt;meta name=&quot;accept-language&quot; content=&quot;en-GB&quot; /&amp;gt;</code> which he used to drive Globalizes specified culture.</p><p>Rather than generating a meta tag I&#x27;ve chosen to use the <code>lang</code> attribute of the <code>html</code> tag to specify the culture. I&#x27;ve chosen to do this as it&#x27;s more in line with the <a href="http://www.w3.org/TR/i18n-html-tech-lang/#ri20030510.102829377" target="_blank" rel="noopener noreferrer">W3C spec</a>. But it should be noted this is just a different way of achieving exactly the same end.</p><p>So how&#x27;s it getting set? Well, it&#x27;s no great shakes; in my <code>_Layout.cshtml</code> file my html tag looks like this:</p><div class="mdxCodeBlock_1zKU">&lt;html lang=&quot;@System.Globalization.CultureInfo.CurrentUICulture.Name&quot;&gt;</div><p>And in my <code>web.config</code> I have following setting set:</p><div class="mdxCodeBlock_1zKU">&lt;configuration&gt; &lt;system.web&gt; &lt;globalization culture=&quot;auto&quot; uiCulture=&quot;auto&quot; /&gt; &lt;!--- Other stuff.... --&gt; &lt;/system.web&gt; &lt;/configuration&gt;</div><p>With both of these set this means I get <code>&amp;lt;html lang=&quot;de-DE&quot;&amp;gt;</code> or <code>&amp;lt;html lang=&quot;en-GB&quot;&amp;gt;</code> etc. depending on a users culture.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="serving-up-the-right-globalize-culture-files"></a>Serving up the right Globalize culture files<a class="hash-link" href="#serving-up-the-right-globalize-culture-files" title="Direct link to heading">#</a></h2><p>In order that I send the correct Globalize culture to the client I&#x27;ve come up with this static class which provides the user with the relevant culture URL (falling back to the en-GB culture if it can&#x27;t find one based your culture):</p><script src="https://gist.github.com/3651751.js?file=GlobalizeUrls.cs"></script><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="putting-it-all-together"></a>Putting it all together<a class="hash-link" href="#putting-it-all-together" title="Direct link to heading">#</a></h2><p>To make use of all of this together you&#x27;ll need to have the <code>html lang</code> attribute set as described earlier and some scripts output in your layout page like this:</p><div class="mdxCodeBlock_1zKU">&lt;script src=&quot;@Url.Content(&quot;~/Scripts/jquery.js&quot;)&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt; &lt;script src=&quot;@Url.Content(GlobalizeUrls.Globalize)&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt; &lt;script src=&quot;@Url.Content(GlobalizeUrls.GlobalizeCulture)&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt; &lt;script src=&quot;@Url.Content(&quot;~/Scripts/jquery.validate.js&quot;)&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt; &lt;script src=&quot;@Url.Content(&quot;~/scripts/jquery.validate.globalize.js&quot;)&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt; @* Only serve the following script if you need it: *@ &lt;script src=&quot;@Url.Content(&quot;~/scripts/jquery.validate.unobtrusive.js&quot;)&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</div><p>Which will render something like this:</p><div class="mdxCodeBlock_1zKU">&lt;script src=&quot;/Scripts/jquery.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt; &lt;script src=&quot;/Scripts/globalize.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt; &lt;script src=&quot;/scripts/globalize/globalize.culture.en-GB.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt; &lt;script src=&quot;/Scripts/jquery.validate.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt; &lt;script src=&quot;/Scripts/jquery.validate.globalize.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt; &lt;script src=&quot;/Scripts/jquery.validate.unobtrusive.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</div><p>This will load up jQuery, Globalize, your Globalize culture, jQuery Validate, jQuery Validates unobtrusive extensions (which you don&#x27;t need if you&#x27;re not using them) and the jQuery Validate Globalize script which will set up culture aware validation.</p><p>Finally and just to re-iterate, it&#x27;s highly worthwhile to give <a href="http://www.hanselman.com/blog/GlobalizationInternationalizationAndLocalizationInASPNETMVC3JavaScriptAndJQueryPart1.aspx" target="_blank" rel="noopener noreferrer">Scott Hanselman&#x27;s original article a look</a>. Most all the ideas in here were taken wholesale from him!</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/asp-net-mvc">asp.net mvc</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/internationalisation">Internationalisation</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/globalization">Globalization</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/globalize-js">Globalize JS</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/localisation">Localisation</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/j-query-validation">jQuery Validation</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/j-query-validate-js">jQuery.validate.js</a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_3-lP"><a href="/blog.johnnyreilly.com/2012/08/24/how-to-attribute-encode-partialview-in">How to attribute encode a PartialView in MVC (Razor)</a></h2><div class="margin-vert--md"><time datetime="2012-08-24T00:00:00.000Z" class="blogPostDate_Ta7i">August 24, 2012  ¬∑ 3 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><p>This post is plagiarism. But I&#x27;m plagiarising myself so I don&#x27;t feel too bad.</p><p> I posted a <a href="http://stackoverflow.com/q/12093005/761388" target="_blank" rel="noopener noreferrer">question</a> on StackOverflow recently asking if there was a simple way to attribute encode a PartialView in Razor / ASP.NET MVC. I ended up answering my own question and since I thought it was a useful solution it might be worth sharing.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="the-question"></a>The Question<a class="hash-link" href="#the-question" title="Direct link to heading">#</a></h2><p>In the project I was working on I was using PartialViews to store the HTML that would be rendered in a tooltip in my ASP.NET MVC application. (In case you&#x27;re curious I was using the <a href="http://jquerytools.org/demos/tooltip/index.html" target="_blank" rel="noopener noreferrer">jQuery Tools library for my tooltip</a> effect.)</p><p>I had thought that Razor, clever beast that it is, would automatically attribute encode anything sat between quotes in my HTML. Unfortunately this doesn&#x27;t appear to be the case. In the short term I was able to workaround this by using single quotation marks to encapsulate my PartialViews HTML. See below for an example:</p><div class="mdxCodeBlock_1zKU">&lt;div class=&quot;tooltip&quot; title=&#x27;@Html.Partial(&quot;_MyTooltipInAPartial&quot;)&#x27;&gt; Some content &lt;/div&gt;</div><p>Now this worked just fine but I was aware that if any PartialView needed to use single quotation marks I would have a problem. Let&#x27;s say for a moment that <code>_MyTooltipInAPartial.cshtml</code> contained this:</p><div class="mdxCodeBlock_1zKU">&lt;span style=&quot;color:green&quot;&gt;fjkdsjf&#x27;lksdjdlks&lt;/span&gt;</div><p>Well when I used my handy little single quote workaround, the following would result:</p><div class="mdxCodeBlock_1zKU">&lt;div class=&quot;tooltip&quot; title=&#x27;&lt;span style=&quot;color:green&quot;&gt;fjkdsjf&#x27;lksdjdlks&lt;/span&gt;&#x27;&gt; Some content &lt;/div&gt;</div><p>Which although it doesn&#x27;t show up so well in the code sample above is definite <em>&quot;does not compute, does not compute, does not compute *LOUD EXPLOSION*&quot;</em> territory.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="the-answer"></a>The Answer<a class="hash-link" href="#the-answer" title="Direct link to heading">#</a></h2><p>This took me back to my original intent which was to encapsulate the HTML in double quotes like this:</p><div class="mdxCodeBlock_1zKU">&lt;div class=&quot;tooltip&quot; title=&quot;@Html.Partial(&quot;_MyTooltipInAPartial&quot;)&quot;&gt; Some content &lt;/div&gt;</div><p>Though with the example discussed above we clearly had a problem whether we used single or double quotes. What to do?</p><p>Well the answer wasn&#x27;t too complicated. After a little pondering I ended up scratching my own itch by writing an HTML helper method called <code>PartialAttributeEncoded</code> which made use of <code>HttpUtility.HtmlAttributeEncode</code> to HTML attribute encode a PartialView.</p><p>Here&#x27;s the code:</p><script src="https://gist.github.com/3449462.js?file=PartialExtensions.cs"></script><p>Using the above helper is simplicity itself:</p><div class="mdxCodeBlock_1zKU">&lt;div class=&quot;tooltip&quot; title=&quot;@Html.PartialAttributeEncoded(&quot;_MyTooltipInAPartial&quot;)&quot;&gt; Some content &lt;/div&gt;</div><p>And, given the example I&#x27;ve been going through, it would provide you with this output:</p><div class="mdxCodeBlock_1zKU">&lt;div class=&quot;tooltip&quot; title=&quot;&amp;lt;span style=&amp;quot;color:green&amp;quot;&gt;fjkdsjf&amp;#39;lksdjdlks&lt;/span&gt;&quot;&gt; Some content &lt;/div&gt;</div><p>Now the HTML in the title attribute above might be an unreadable mess - but it&#x27;s the unreadable mess you need. That&#x27;s what the HTML we&#x27;ve been discussing looks like when it&#x27;s been encoded.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="final-thoughts"></a>Final thoughts<a class="hash-link" href="#final-thoughts" title="Direct link to heading">#</a></h2><p>I was surprised that Razor didn&#x27;t handle this out of the box. I wonder if this is something that will come along with a later version? It&#x27;s worth saying that I experienced this issue when working on an MVC 3 application. It&#x27;s possible that this issue may actually have been solved with MVC 4 already; I haven&#x27;t had chance to check yet though.</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/asp-net-mvc">asp.net mvc</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/encode">encode</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/partial-view">PartialView</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/razor">razor</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/attribute">attribute</a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_3-lP"><a href="/blog.johnnyreilly.com/2012/08/16/closedxml-real-sdk-for-excel">ClosedXML - the real SDK for Excel</a></h2><div class="margin-vert--md"><time datetime="2012-08-16T00:00:00.000Z" class="blogPostDate_Ta7i">August 16, 2012  ¬∑ 4 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><p>Simplicity appeals to me. It always has. Something that is simple is straightforward to comprehend and is consequently easy to use. It&#x27;s clarity.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="open-xml"></a>Open XML<a class="hash-link" href="#open-xml" title="Direct link to heading">#</a></h2><p>So imagine my joy when I first encountered <a href="http://msdn.microsoft.com/en-us/office/bb265236.aspx" target="_blank" rel="noopener noreferrer">Open XML</a>. In Microsofts own words:</p><p>ECMA Office Open XML (&quot;Open XML&quot;) is an international, open standard for word-processing documents, presentations, and spreadsheets that can be freely implemented by multiple applications on multiple platforms.</p><p>What does that actually mean? Well, from my perspective in the work I was doing I needed to be able to programmatically interact with Excel documents from C#. I needed to be able to create spreadsheets, to use existing template spreadsheets which I could populate dynamically in code. I needed to do Excel. And according to Microsoft, the Open XML SDK was how I did this.</p><p>What can I say about it? Open XML works. The API functions. You can use this to achieve your aims; and I did (initially). However, there&#x27;s a but and it&#x27;s this: it became quickly apparent just how hard Open XML makes you work to achieve relatively simple goals. Things that ought to be, in my head, a doddle require reams and reams of obscure code. Sadly, I feel that Open XML is probably the most frustrating API that I have yet encountered (and I&#x27;ve coded against the old school Lotus Notes API).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="closed-xml---open-xmls-dbcontext"></a>Closed XML - Open XML&#x27;s DbContext<a class="hash-link" href="#closed-xml---open-xmls-dbcontext" title="Direct link to heading">#</a></h2><p>As I&#x27;ve intimated I found Open XML to be enormously frustrating. I&#x27;d regularly find myself thinking I&#x27;d achieved my goal. I may have written War and Peace code-wise but it compiled, it looked right - the end was in sight. More fool me. I&#x27;d run, sit back watch my Excel doc get created / updated / whatever. Then I&#x27;d open it and be presented with some obscure error about a corrupt file. Not great.</p><p>As I was Googling around looking for answers to my problem that I discovered an open source project on CodePlex called <a href="http://closedxml.codeplex.com/" target="_blank" rel="noopener noreferrer">Closed XML</a>. I wasn&#x27;t alone in frustrations with Open XML - there were many of us sharing the same opinion. And some fantastic person had stepped into the breach to save us! In ClosedXMLs own words:</p><p>ClosedXML makes it easier for developers to create Excel 2007/2010 files. It provides a nice object oriented way to manipulate the files (similar to VBA) without dealing with the hassles of XML Documents. It can be used by any .NET language like C# and Visual Basic (VB).</p><p>Hallelujah!!!</p><p>The way it works (as far as I understand) is that ClosedXML sits on top of Open XML and exposes a really straightforward API for you to interact with. I haven&#x27;t looked into the guts of it but my guess is that it internally uses Open XML to achieve this (as to use ClosedXML you must reference DocumentFormat.OpenXml.dll).</p><p>I&#x27;ve found myself thinking of ClosedXML&#x27;s relationship to Open XML in the same way as I think about Entity Frameworks DbContexts relationship to ObjectContext. They do the same thing but the former in both cases offers a better API. They makes achieving the same goals *<strong>much</strong>* easier. (Although in fairness to the EF team I should say that ObjectContext was not particularly problematic to use; just DbContext made life even easier.)</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="support---this-is-how-it-should-be-done"></a>Support - This is how it should be done!<a class="hash-link" href="#support---this-is-how-it-should-be-done" title="Direct link to heading">#</a></h2><p>Shortly after I started using ClosedXML I was asked if we could use it to perform a certain task. I tested. We couldn&#x27;t.</p><p>When I discovered this <a href="http://closedxml.codeplex.com/workitem/8174" target="_blank" rel="noopener noreferrer">I raised a ticket</a> against the project asking if the functionality was likely to be added at any point. I honestly didn&#x27;t expect to hear back any time soon and was mentally working out ways to get round the issue for now.</p><p>To my surprise within <em>5 hours</em><a href="http://www.codeplex.com/site/users/view/MDeLeon" target="_blank" rel="noopener noreferrer">MDeLeon</a> the developer behind ClosedXML had released a patch to the source code! By any stretch of the imagination that is fast! As it happened there were a few bugs that needed ironing out and over the course of the next 3 working days MDeLeon performed a number of fixes and left me quickly in the position of having a version of ClosedXML which allowed me to achieve my goal.</p><p>So this blog post exists in part to point anyone who is battling Open XML to ClosedXML. It&#x27;s brilliant, well documented and I&#x27;d advise anyone to use it. You won&#x27;t be disappointed. And in part I wanted to say thanks and well done to MDeLeon who quite made my week! Thank you!</p><p><a href="http://closedxml.codeplex.com/" target="_blank" rel="noopener noreferrer">http://closedxml.codeplex.com/</a></p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/m-de-leon">MDeLeon</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/open-xml">Open XML</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/excel">Excel</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/closed-xml">ClosedXML</a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_3-lP"><a href="/blog.johnnyreilly.com/2012/08/06/jquery-unobtrusive-validation">jQuery Unobtrusive Validation (+ associated gotchas)</a></h2><div class="margin-vert--md"><time datetime="2012-08-06T00:00:00.000Z" class="blogPostDate_Ta7i">August 6, 2012  ¬∑ 5 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><p>I was recently working on a project which had client side validation manually set up which essentially duplicated the same logic on the server. Like many things this had started out small and grown and grown until it became arduos and tedious to maintain.</p><p> Time to break out the unobtrusive jQuery validation.</p><p>If you‚Äôre not aware of this, as part of MVC 3 Microsoft leveraged the pre-existing <a href="http://bassistance.de/jquery-plugins/jquery-plugin-validation/" target="_blank" rel="noopener noreferrer">jQuery Validate library</a> and introduced an ‚Äúunobtrusive‚Äù extension to this which allows the library to be driven by HTML 5 data attributes. I have mentioned this lovely extension before but I haven&#x27;t been using it for the last 6 months or so. And coming back to it I realised that I had forgotten a few of the details / quirks.</p><p>First up, &quot;where do these HTML 5 data attributes come from?&quot; I hear you cry. Why from the <a href="http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.validationattribute.aspx" target="_blank" rel="noopener noreferrer">Validation attributes that live in System.ComponentModel.DataAnnotations</a>.</p><p>Let me illustrate. This decoration:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[Required(),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   Range(0.01, Double.MaxValue, ErrorMessage = &quot;A positive value is required for Price&quot;),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   Display(Name = &quot;My Price&quot;)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  public double Price { get; set; }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>specifies that the Price field on the model is required, that it requires a positive numeric value and that it‚Äôs official name is ‚ÄúMy Price‚Äù. As a result of this decoration, when you use syntax like this in your view:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-xml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">@Html.LabelFor(x =&gt; x.Price)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  @Html.TextBoxFor(x =&gt; x.Price, new { id = &quot;itsMyPrice&quot;, type = &quot;number&quot; })</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>You end up with this HTML:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-xml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">label</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">for</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">Price</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">My Price</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">label</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">input</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">data-val</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">true</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">data-val-number</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">The field My Price must be a number.</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">data-val-range</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">A positive value is required for My Price</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">data-val-range-max</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">1.79769313486232E+308</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">data-val-range-min</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">0.01</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">data-val-required</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">The My Price field is required.</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">id</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">itsMyPrice</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">name</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">Price</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">type</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">number</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">value</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>As you can see MVC has done the hard work of translating these data annotations into HTML 5 data attributes so you don‚Äôt have to. With this in place you can apply your validation in 1 place (the model) and 1 place only. This reduces the code you need to write exponentially. It also reduces duplication and therefore reduces the likelihood of mistakes.</p><p>To validate a form it‚Äôs as simple as this:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">$</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;form&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">validate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Or if you wanted to validate a single element:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">$</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;form&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">validate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">element</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;elementSelector&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Or if you wanted to prevent default form submission until validation was passed:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">$</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;form&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">submit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">event</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> isValid </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">$</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">validate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">valid</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> isValid</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//True will allow submission, false will not</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>See what I mean? Simple!</p><p>If you want to read up on this further I recommend these links:</p><ul><li><a href="http://bassistance.de/jquery-plugins/jquery-plugin-validation/" target="_blank" rel="noopener noreferrer">The home of jQuery Validate</a> - by the way it seems to be important to work with the latest version (1.9 at time of writing). I found some strange AJAX issues when using 1.7...</li><li><a href="http://bradwilson.typepad.com/blog/2010/10/mvc3-unobtrusive-validation.html" target="_blank" rel="noopener noreferrer">Brad Wilson&#x27;s walkthrough of unobtrusive client validation</a></li><li><a href="http://www.devtrends.co.uk/blog/the-complete-guide-to-validation-in-asp.net-mvc-3-part-2" target="_blank" rel="noopener noreferrer">An example of how to implement your own custom validation both server side *and* client side</a></li><li><a href="http://xhalent.wordpress.com/2011/01/24/applying-unobtrusive-validation-to-dynamic-content/" target="_blank" rel="noopener noreferrer">How to apply unobtrusive jQuery validation to dynamic content</a> - handy if you&#x27;re creating HTML on the client which you want to be validated.</li><li>And finally, a workaround for <a href="http://aspnet.codeplex.com/workitem/7629" target="_blank" rel="noopener noreferrer">a bug in MVC 3</a> which means that data attributes aren‚Äôt emitted when using DropDownListFor for nested objects: <a href="http://forums.asp.net/t/1649193.aspx/1/10" target="_blank" rel="noopener noreferrer">http://forums.asp.net/t/1649193.aspx/1/10</a>. In fact because I&#x27;ve only seen this on a forum I&#x27;ve copied and the pasted the code there to below because I feared it being lost: <strong>Update: It turns out the self-same issue exists for TextAreaFor as well. Details of this and a workaround can be found <a href="http://aspnet.codeplex.com/workitem/8576" target="_blank" rel="noopener noreferrer">here</a>... </strong></li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/// &lt;summary&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /// MVC HtmlHelper extension methods - html element extensions</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /// These are drop down list extensions that work round a bug in MVC 3: http://aspnet.codeplex.com/workitem/7629</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /// These workarounds were taken from here: http://forums.asp.net/t/1649193.aspx/1/10</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /// &lt;/summary&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public static class DropDownListExtensions</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        [SuppressMessage(&quot;Microsoft.Design&quot;, &quot;CA1006:DoNotNestGenericTypesInMemberSignatures&quot;, Justification = &quot;This is an appropriate nesting of generic types&quot;)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public static MvcHtmlString SelectListFor&lt;TModel, TProperty&gt;(this HtmlHelper&lt;TModel&gt; htmlHelper, Expression&lt;Func&lt;TModel, TProperty&gt;&gt; expression, IEnumerable&lt;SelectListItem&gt; selectList)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            return SelectListFor(htmlHelper, expression, selectList, null /* optionLabel */, null /* htmlAttributes */);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        [SuppressMessage(&quot;Microsoft.Design&quot;, &quot;CA1006:DoNotNestGenericTypesInMemberSignatures&quot;, Justification = &quot;This is an appropriate nesting of generic types&quot;)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public static MvcHtmlString SelectListFor&lt;TModel, TProperty&gt;(this HtmlHelper&lt;TModel&gt; htmlHelper, Expression&lt;Func&lt;TModel, TProperty&gt;&gt; expression, IEnumerable&lt;SelectListItem&gt; selectList, object htmlAttributes)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            return SelectListFor(htmlHelper, expression, selectList, null /* optionLabel */, new RouteValueDictionary(htmlAttributes));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        [SuppressMessage(&quot;Microsoft.Design&quot;, &quot;CA1006:DoNotNestGenericTypesInMemberSignatures&quot;, Justification = &quot;This is an appropriate nesting of generic types&quot;)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public static MvcHtmlString SelectListFor&lt;TModel, TProperty&gt;(this HtmlHelper&lt;TModel&gt; htmlHelper, Expression&lt;Func&lt;TModel, TProperty&gt;&gt; expression, IEnumerable&lt;SelectListItem&gt; selectList, IDictionary&lt;string, object&gt; htmlAttributes)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            return SelectListFor(htmlHelper, expression, selectList, null /* optionLabel */, htmlAttributes);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        [SuppressMessage(&quot;Microsoft.Design&quot;, &quot;CA1006:DoNotNestGenericTypesInMemberSignatures&quot;, Justification = &quot;This is an appropriate nesting of generic types&quot;)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public static MvcHtmlString SelectListFor&lt;TModel, TProperty&gt;(this HtmlHelper&lt;TModel&gt; htmlHelper, Expression&lt;Func&lt;TModel, TProperty&gt;&gt; expression, IEnumerable&lt;SelectListItem&gt; selectList, string optionLabel)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            return SelectListFor(htmlHelper, expression, selectList, optionLabel, null /* htmlAttributes */);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        [SuppressMessage(&quot;Microsoft.Design&quot;, &quot;CA1006:DoNotNestGenericTypesInMemberSignatures&quot;, Justification = &quot;This is an appropriate nesting of generic types&quot;)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public static MvcHtmlString SelectListFor&lt;TModel, TProperty&gt;(this HtmlHelper&lt;TModel&gt; htmlHelper, Expression&lt;Func&lt;TModel, TProperty&gt;&gt; expression, IEnumerable&lt;SelectListItem&gt; selectList, string optionLabel, object htmlAttributes)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            return SelectListFor(htmlHelper, expression, selectList, optionLabel, new RouteValueDictionary(htmlAttributes));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        [SuppressMessage(&quot;Microsoft.Design&quot;, &quot;CA1011:ConsiderPassingBaseTypesAsParameters&quot;, Justification = &quot;Users cannot use anonymous methods with the LambdaExpression type&quot;)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        [SuppressMessage(&quot;Microsoft.Design&quot;, &quot;CA1006:DoNotNestGenericTypesInMemberSignatures&quot;, Justification = &quot;This is an appropriate nesting of generic types&quot;)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public static MvcHtmlString SelectListFor&lt;TModel, TProperty&gt;(this HtmlHelper&lt;TModel&gt; htmlHelper, Expression&lt;Func&lt;TModel, TProperty&gt;&gt; expression, IEnumerable&lt;SelectListItem&gt; selectList, string optionLabel, IDictionary&lt;string, object&gt; htmlAttributes)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            if (expression == null)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                throw new ArgumentNullException(&quot;expression&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            IDictionary&lt;string, object&gt; validationAttributes = htmlHelper</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                .GetUnobtrusiveValidationAttributes(ExpressionHelper.GetExpressionText(expression), metadata);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            if (htmlAttributes == null)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                htmlAttributes = validationAttributes;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            else</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                htmlAttributes = htmlAttributes.Concat(validationAttributes).ToDictionary(k =&gt; k.Key, v =&gt; v.Value);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            return SelectExtensions.DropDownListFor(htmlHelper, expression, selectList, optionLabel, htmlAttributes);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/jquery-unobtrusive-validation">jquery unobtrusive validation</a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_3-lP"><a href="/blog.johnnyreilly.com/2012/07/16/rendering-partial-view-to-string">Rendering Partial View to a String</a></h2><div class="margin-vert--md"><time datetime="2012-07-16T00:00:00.000Z" class="blogPostDate_Ta7i">July 16, 2012  ¬∑ 5 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="well-done-that-man"></a>Well done that man!<a class="hash-link" href="#well-done-that-man" title="Direct link to heading">#</a></h2><p>Every now and then I&#x27;m thinking to myself &quot;<em>wouldn&#x27;t it be nice if you could do x...</em>&quot; And then I discover that someone else has thought the self same thoughts and better yet they have the answer! I had this situation recently and discovered the wonderful Kevin Craft had been there, done that and made the T-shirt. Here&#x27;s his blog: <a href="http://craftycodeblog.com/2010/05/15/asp-net-mvc-render-partial-view-to-string/" target="_blank" rel="noopener noreferrer">http://craftycodeblog.com/2010/05/15/asp-net-mvc-render-partial-view-to-string/</a> I wanted to talk about how this simple post provided me with an elegant solution to something I&#x27;ve found niggling and unsatisfactory for a while now... ## How it helped</p><p>Just last week I was thinking about <code>Partial Views</code>. Some background. I&#x27;m working on an ASP.NET MVC 3 project which provides users with a nice web interface to manage the workflow surrounding certain types of financial asset. The user is presented with a web page which shows a kind of grid to the user. As the user hovers over a row they are presented with a context menu which allows them to perform certain workflow actions. If they perform an action then that row will need to be updated to reflect this. Back in the day this would have been achieved by doing a full postback to the server. At the server the action would be taken, the persistent storage updated and then the whole page would be served up to the user again with the relevant row of HTML updated but everything else staying as is. Now there&#x27;s nothing wrong with this approach as such. I mean it works just fine. But in my case since I knew that it was only that single row of HTML that was going to be updated and so I was loath to re-render the whole page. It seemed a waste to get so much data back from the server when only a marginal amount was due to change. And also I didn&#x27;t want the user to experience the screen refresh flash. Looks ugly. Now in the past when I&#x27;ve had a solution to this problem which from a UI perspective is good but from a development perspective slightly unsatisfactory. I would have my page call a controller method (via <code>jQuery.ajax</code>) to perform the action. This controller would return a <code>JsonResult</code> indicating success or failure and any data necessary to update the screen. Then in the <code>success</code> function I would manually update the HTML on the screen using the data provided. Now this solution works but there&#x27;s a problem. <a href="http://en.wikipedia.org/wiki/Rolf_Harris" target="_blank" rel="noopener noreferrer">Can you tell what it is yet?</a> It&#x27;s not very DRY. I&#x27;m repeating myself. When the page is initially rendered I have a <code>View</code> which renders (in this example) all the relevant HTML for the screen *including* the HTML for my rows of data. And likewise I have my JavaScript method for updating the screen too. So with this solution I have duplicated my GUI logic. If I update 1, I need to update the other. It&#x27;s not a massive hardship but it is, as I say, unsatisfactory. I was recently thinking that it would be nice if I could refactor my row HTML into a <code>Partial View</code> which I could then use in 2 places: 1. In my standard <code>View</code> as I iterated through each element for display and
2. Nested inside a <code>JsonResult</code>...</p><p>The wonderful thing about approach 2 is that it allows me to massively simplify my <code>success</code> to this: ```js
$(&quot;myRowSelector&quot;)
.empty()
.html(data.RowHTML); //Where RowHTML is the property that
//contains my stringified PartialView</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> and if I later make changes to the `Partial View` these changes will not require me to make any changes to my JavaScript at all. Brilliant! And entirely satisfactory. On the grounds that someone else might have had the same idea I did a little googling around. Sure enough I discovered [Kevin Craft&#x27;s post](&lt;http://craftycodeblog.com/2010/05/15/asp-net-mvc-render-partial-view-to-string/&gt;) which was just the ticket. It does exactly what I&#x27;d hoped. Besides being a nice and DRY solution this approach has a number of other advantages as well: - Given it&#x27;s a `Partial View` the Visual Studio IDE provides a nice experience when coding it up with regards to intellisense / highlighting etc. Not something available when you&#x27;re hand coding up a string which contains the HTML you&#x27;d like passed back...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- A wonderful debug experience. You can debug the rendering of a `Partial View` being rendered to a string in the same way as if the ASP.NET MVC framework was serving it up. I could have lived without this but it&#x27;s fantastic to have it available.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- It&#x27;s possible to nest \***multiple**\* `Partial Views` within your `JsonResult`. THIS IS WONDERFUL!!! This means that if several parts of your screen need to be updated (perhaps the row and a status panel as well) then as long as both are refactored into a `Partial View` you can generate them on the fly and pass them back.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;!-- --&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Excellent stuff!</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/asp-net-mvc">asp.net mvc</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/kevin-craft">Kevin Craft</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/partial-view">PartialView</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/json-result">JsonResult</a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_3-lP"><a href="/blog.johnnyreilly.com/2012/07/01/how-im-structuring-my-javascript-in-web">Optimally Serving Up JavaScript</a></h2><div class="margin-vert--md"><time datetime="2012-07-01T00:00:00.000Z" class="blogPostDate_Ta7i">July 1, 2012  ¬∑ 7 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><p>I have occasionally done some server-side JavaScript with Rhino and Node.js but this is the exception rather than the rule. Like most folk at the moment, almost all the JavaScript I write is in a web context.</p><p> Over time I&#x27;ve come to adopt a roughly standard approach to how I structure my JavaScript; both the JavaScript itself and how it is placed / rendered in the an HTML document. I wanted to write about the approach I&#x27;m using. Partly just to document the approach but also because I often find writing about something crystalises my feelings on the subject in one way or another. I think that most of what I&#x27;m doing is sensible and rational but maybe as I write about this I&#x27;ll come to some firmer conclusions about my direction of travel.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="what-are-you-up-to"></a>What are you up to?<a class="hash-link" href="#what-are-you-up-to" title="Direct link to heading">#</a></h2><p>Before I get started it&#x27;s probably worth mentioning the sort of web development I&#x27;m generally called to do (as this has obviously influenced my decisions).</p><p>Most of my work tends to be on web applications used internally within a company. That is to say, web applications accessible on a Company intranet. Consequently, the user base for my applications tends to be smaller than the Amazons and Googles of this world. It almost invariably sits on the ASP.NET stack in some way. Either classic WebForms or MVC.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="render-first-js-second"></a>&quot;Render first. JS second.&quot;<a class="hash-link" href="#render-first-js-second" title="Direct link to heading">#</a></h2><p>I took 2 things away from <a href="http://www.stevesouders.com/blog/2010/09/30/render-first-js-second/" target="_blank" rel="noopener noreferrer">Steve Souder&#x27;s article</a>:</p><ol><li>Async script loading is better than synchronous script loading</li><li>Get your screen rendered and *<strong>then</strong>* execute your JavaScript</li></ol><p>I&#x27;m not doing any async script loading as yet; although I am thinking of giving it a try at some point. In terms of choosing a loader I&#x27;ll probably give RequireJS first crack of the whip (purely as it looks like most people are tending it&#x27;s direction and that can&#x27;t be without reason).</p><p>However - it seems that the concept of async script loading is kind of conflict with one of the other tenets of web wisdom: script bundling. Script bundling, if you&#x27;re not already aware, is the idea that you should combine all your scripts into a single file and then just serve that. This prevents multiple HTTP requests as each script loads in. Async script loading is obviously okay with multiple HTTP requests, presumably because of the asynchronous non-blocking pattern of loading. So. 2 different ideas. And there&#x27;s further movement on this front right now as <a href="http://www.hanselman.com/blog/VisualStudio2012RCIsReleasedTheBigWebRollup.aspx" target="_blank" rel="noopener noreferrer">Microsoft are baking in script bundling to .NET 4.5</a>.</p><p>Rather than divide myself between these 2 horses I have at the moment tried to follow the &quot;JS second&quot; part of this advice in my own (perhaps slightly old fashioned) way...</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="i-want-to-serve-you"></a>I want to serve you...<a class="hash-link" href="#i-want-to-serve-you" title="Direct link to heading">#</a></h2><p>I have been making sure that scripts are the last thing served to the screen by using a customised version of <a href="http://frugalcoder.us/post/2009/06/29/Handling-Scripts-in-ASPNet-MVC.aspx" target="_blank" rel="noopener noreferrer">Michael J. Ryan&#x27;s HtmlHelper</a>. This lovely helper allows you to add script references as required from a number of different sources (layout page, view, partial view etc - even the controller if you so desired). It&#x27;s simple to control the ordering of scripts by allowing you to set a priority for each script which determines the render order.</p><p>Then as a final step before rendering the <code>&amp;lt;/body&amp;gt;</code> tag the scripts can be rendered in one block. By this point the web page is rendered visually and a marginal amount of blocking is, in my view, acceptable.</p><p>If anyone is curious - the class below is my own version of Michael&#x27;s helper. My contribution is the go faster stripes relating to the caching suffix and the ability to specify dependancies using script references rather than using numeric priority mechanism):</p><script src="https://gist.github.com/3019159.js?file=ScriptExtensions.cs"></script><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="minification---i-want-to-serve-you-less"></a>Minification - I want to serve you less...<a class="hash-link" href="#minification---i-want-to-serve-you-less" title="Direct link to heading">#</a></h2><p>Another tweak I made to the script helper meant that when compiling either the debug or production (minified) versions of common JS files will be included if available. This means in a production environment the users get minified JS files so faster loading. And in a development environment we get the full JS files which make debugging more straightforward.</p><p>What I haven&#x27;t started doing is minifying my own JS files as yet. I know I&#x27;m being somewhat inconsistent here by sometimes serving minified files and sometimes not. I&#x27;m not proud. Part of my rationale for this that since most of my users use my apps on a daily basis they will for the most part be using cached JS files. Obviously there&#x27;ll be slightly slower load times the first time they go to a page but nothing that significant I hope.</p><p>I have thought of starting to do my own minification as a build step but have held off for now. Again this is something being baked into .NET 4.5; another reason why I have held off doing this a different way for now.</p><p>Update</p><p>It now looks like this Microsofts optimisations have become <a href="http://nuget.org/packages/Microsoft.AspNet.Web.Optimization" target="_blank" rel="noopener noreferrer">this Nuget package</a>. It&#x27;s early days (well it was released on 15th August 2012 and I&#x27;m writing this on the 16th) but I think this looks not to be tied to MVC 4 or .NET 4.5 in which case I could use it in my current MVC 3 projects. I hope so...</p><p>By the way there&#x27;s a <a href="http://www.pluralsight.com/training/Courses/TableOfContents/mvc4#mvc4-m3-optimization" target="_blank" rel="noopener noreferrer">nice rundown of how to use this by K. Scott Allen of Pluralsight</a>. It&#x27;s fantastic. Recommended.</p><p>Update 2</p><p>Having done a little asking around I now understand that this *<strong>can</strong>* be used with MVC 3 / .NET 4.0. Excellent!</p><p>One rather nice alternative script serving mechanism I&#x27;ve seen (but not yet used) is Andrew Davey&#x27;s <a href="http://getcassette.net" target="_blank" rel="noopener noreferrer">Cassette</a> which I mean to take for a test drive soon. This looks fantastic (and is available as a <a href="http://nuget.org/packages/Cassette" target="_blank" rel="noopener noreferrer">Nuget package</a> - 10 points!).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="cdns-they-want-to-serve-you"></a>CDNs (they want to serve you)<a class="hash-link" href="#cdns-they-want-to-serve-you" title="Direct link to heading">#</a></h2><p>I&#x27;ve never professionally made use of CDNs at all. There are <a href="http://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/" target="_blank" rel="noopener noreferrer">clearly good reasons why you should</a> but most of those good reasons relate most to public facing web apps.</p><p>As I&#x27;ve said, the applications I tend to work on sit behind firewalls and it&#x27;s not always guaranteed what my users can see from the grand old world of web beyond. (Indeed what they see can change on hour by hour basis sometimes...) Combined with that, because my apps are only accessible by a select few I don&#x27;t face the pressure to reduce load on the server that public web apps can face.</p><p>So while CDN&#x27;s are clearly a good thing. I don&#x27;t use them at present. And that&#x27;s unlikely to change in the short term.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="tldr"></a>TL:DR<a class="hash-link" href="#tldr" title="Direct link to heading">#</a></h2><ol><li>I don&#x27;t use CDNs - they&#x27;re clearly useful but they don&#x27;t suit my particular needs</li><li>I serve each JavaScript file individually just before the body tag. I don&#x27;t bundle.</li><li>I don&#x27;t minify my own scripts (though clearly it wouldn&#x27;t be hard) but I do serve the minified versions of 3rd party libraries (eg jQuery) in a Production environment.</li><li>I don&#x27;t use async script loaders at present. I may in future; we shall see.</li></ol><p>I expect some of the above may change (well, possibly not point #1) but this general approach is working well for me at present.</p><p>I haven&#x27;t touched at all on how I&#x27;m structuring my JavaScript code itself. Perhaps next time.</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/asp-net-mvc">asp.net mvc</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/html-helper">html helper</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/javascript">javascript</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/cassette">cassette</a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_3-lP"><a href="/blog.johnnyreilly.com/2012/06/04/reasons-to-be-cheerful-why-now-is-good">Reasons to be Cheerful (why now is a good time to be a dev)</a></h2><div class="margin-vert--md"><time datetime="2012-06-04T00:00:00.000Z" class="blogPostDate_Ta7i">June 4, 2012  ¬∑ 8 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><p>I&#x27;ve been a working as a developer in some way, shape or form for just over 10 years now. And it occurred to me the other day that I can&#x27;t think of a better time to be a software developer than <u>right now</u></p><p>. This year was better than last year. Last year was better than the year before. This is a happily recurring theme. So why? Well I guess there are a whole host of reasons; this is my effort to identify just some of them... ## Google and the World Wide Web (other search providers are available)</p><p>When I first started out as a humble Delphi developer back in 1999 learning was not the straightforward proposition it is today. If you want to know how to do something these days a good place to start is firing up your browser and putting your question into Google. If I was to ask the question <em>&quot;how do I use AJAX&quot;</em> of a search engine 10 years ago and now I would see very different things. <img src="/blog.johnnyreilly.com/assets/images/AJAX%2Bbleach-2ee8167d3057f6cdbda7a718369c4fc2.jpg"></p><p>On the left the past, on the right the present. Do try not to let the presence of W3Schools in the search results detract... And also best ignore that the term AJAX wasn&#x27;t coined until 2006... What I&#x27;m getting at is that finding out information these days is can be done really quickly. Excellent search engines are now the norm. Back when I started out this was not the case and you were essentially reliant on what had been written down in books and the kindliness of more experienced developers. Google (and others like them) have done us a great service. They&#x27;ve made it easier to learn. ## Blogs / Screencasts / Training websites</p><p>Something else that has made it easier to learn is the rise and rise of blogs, screencasts and training websites. Over the last 5 years the internet has been filling up with people writing blogs talking about tools, techniques and approaches they are using. When you&#x27;re searching for advice on how to do something you can pretty much guarantee these days that some good soul will have written about it already. The most generous devs out there have gone a step further producing screencasts demonstrating them coding and sharing it with the world *<strong>for free</strong>*. See an example from the ever awesome Rebecca Murphey below: <iframe src="http://player.vimeo.com/video/20457625" width="500" height="281" frameborder="0" webkitallowfullscreen="" mozallowfullscreen=""></iframe></p><p> Similarly, there are now a number of commercially available screencasts which make it really easy to ramp up and learn. There&#x27;s <a href="http://tekpub.com/" target="_blank" rel="noopener noreferrer">TekPub</a>, there&#x27;s <a href="http://www.pluralsight-training.net" target="_blank" rel="noopener noreferrer">Pluralsight</a> (who have massively improved my commute with their mobile app by the way). All of these help tug away the curtain away from the software development Wizard of Oz. All this is a very wonderful thing indeed! ## Podcasts</p><p>If you&#x27;re a Boogie Down Productions fan then you may be aware of the concept of <a href="http://en.wikipedia.org/wiki/Edutainment_(album)" target="_blank" rel="noopener noreferrer">Edutainment</a>. That is to say, the bridge that can exist between entertainment and education. This is what I&#x27;ve found podcasts to be. I listen to a lot. <a href="http://www.hanselminutes.com/" target="_blank" rel="noopener noreferrer">Hanselminutes</a>. <a href="http://herdingcode.com/" target="_blank" rel="noopener noreferrer">Herding Code</a>. <a href="http://javascriptjabber.com/" target="_blank" rel="noopener noreferrer">JavaScript Jabber</a>. <a href="http://javascriptshow.com/" target="_blank" rel="noopener noreferrer">The JavaScript Show</a>. <a href="http://jesseliberty.com/podcast/" target="_blank" rel="noopener noreferrer">Yet Another Podcast</a>. There&#x27;s more. There&#x27;s something wonderful about about listening to other developers who are passionate about what they are doing. Interested in their work. Enthusiastic about their projects. It&#x27;s infectious. It makes you want to grab a keyboard and start trying things out. I can&#x27;t imagine I&#x27;m the only dev that feels this way. And of course I couldn&#x27;t fail to mention my favourite podcast: <a href="http://www.thisdeveloperslife.com/" target="_blank" rel="noopener noreferrer">This Developer&#x27;s Life</a>. Put together by Scott Hanselman and Rob Conery (I love these guys by the way), and inspired by <a href="http://www.thisamericanlife.org/" target="_blank" rel="noopener noreferrer">This American Life</a>, this show tells some of the stories experienced by developers. It gives an insight into what it&#x27;s like to be a developer. This podcast is more entertaining than educational but it&#x27;s absolutely *<strong>fantastic</strong>*. ## JavaScript (and HTML and CSS too)</p><p>All of the above have eased the learning path of developers and made it easier to keep in touch with the latest and greatest happenings in the dev world. Along with this there has, in my opinion, also been something of a unifying of purpose in the developer community of late. I attribute this to JavaScript, HTML and CSS. Back when I started out it seemed much more the case that developers were split into different tribes. There was the Delphi tribe, the Visual Basic tribe, the C++ tribe, the Java tribe (very much the &quot;hip young gunslingers&quot; tribe back then - I guess these days it&#x27;d be the Node.JS guys) as well as many others. And each tribe more or less seemed to keep themselves to themselves. This wasn&#x27;t malicious that I could tell; that just seemed to be the way it was. But shortly after I started out the idea of the web application took off in a major way. I was involved in this coming from the position of being an early adopter of ASP.NET (which I used, and loved, since it was first in beta). Many other web application technologies were available; JSP, PHP, Perl and the like. But what they all had in common was this: they all pumped out HTML and CSS to the user. Suddenly all these developers from subtly different backgrounds were all targeting the same technology for their GUI. This unifying effect has been *<strong>massively</strong>* reinforced by JavaScript. Whereas HTML is a markup language, JavaScript is a programming language. And more by accident than grand design JavaScript has kind of become the <a href="http://www.hanselman.com/blog/JavaScriptIsAssemblyLanguageForTheWebPart2MadnessOrJustInsanity.aspx" target="_blank" rel="noopener noreferrer">VM of the web</a>. Given the rise and rise of the rich web client (driven onwards and upwards by the popularity of AJAX, Backbone.JS etc) this has meant that devs of all creeds and colours have been forced to pitch a tent on the same patch of dirt. Pretty much all of the tribes now have an embassy in JavaScript land. So there are all these devs out there who are used to working with different server-side technologies from each other. But when it comes to the client, we are all sharing the common language of JavaScript. To a certain extent we&#x27;re all creating data services that just pump out JSON to the client. Through forums like <a href="http://stackoverflow.com/" target="_blank" rel="noopener noreferrer">StackOverflow</a> devs of all the tribes are helping each other with web client &quot;stuff&quot;. They&#x27;re all interacting in ways that they probably wouldn&#x27;t otherwise if the web client environment was as diverse as the server-side environment... ## The Browser Wars Begin Again</p><p>Didn&#x27;t things seem a little dull around 2003/2004? IE 6 had come out 3 years previously and had vanquished all comers. Microsoft was really the only game in town browser-wise. Things had stopped changing; it seemed like browsers were &quot;done&quot;. You know, good enough and there was no need to take things any further. Then came Firefox. This lone browser appeared as an alternative to might of IE. I must admit the thing that first attracted me to Firefox was the fact it had tabs. I mean technically I knew Firefox was more secure than IE but honestly it was the tabs that attracted me in the first place. (This may offer some insight as to why so many people still smoke...) And somehow Firefox managed to jolt Microsoft out of it&#x27;s inertia on the web. Microsoft started caring about IE again. (Not enough until quite recently in my book but you&#x27;ve got to start somewhere.) I&#x27;m a firm believer that change for it&#x27;s own sake can often be a good thing. Change makes you think about why you do what you do and wonder if there might be better approaches that could be used instead. And these changes kind of feed into... ## ...HTML 5!</p><p>That&#x27;s right HTML 5 which is all about change. It&#x27;s taking HTML as we know and love it and bolting on new stuff. New elements (canvas), new styling (CSS 3), new JavaScript APIs, faster JavaScript engines, support for JavaScript 5. The list goes on... And all this new stuff is exciting, whizzy, fun to play with. That which wasn&#x27;t possible yesterday is possible now. Playing with new toys is half the fun of being a dev. There&#x27;s a lot of new toys about right now. ## The Feeling of Possibilites</p><p>This is what it comes down to I think. It&#x27;s so easy to learn these days and there&#x27;s so much to learn about. Right now lots of things are happening above and beyond what I&#x27;ve mentioned above. Open source has come of age and gone mainstream. Github is with us. Google are making contentious forays into new languages with Dart and Native Client. Microsoft aren&#x27;t remotely evil empire-like these days; they&#x27;ve made .NET like a Swiss army knife. You can even run Node.js on IIS these days! Signal-R, Websockets, Coffeescript, JS.Next, Backbone.JS, Entity Framework, LINQ, the mobile web, ASP.NET MVC, Razor, Knockout.JS, the cloud, Windows Azure... So much is happening right now. People are making things. It&#x27;s a very interesting time to be a dev. There are many reasons to be cheerful.</p></section></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_3-lP"><a href="/blog.johnnyreilly.com/2012/05/30/dad-didnt-buy-any-games">Dad Didn&#x27;t Buy Any Games</a></h2><div class="margin-vert--md"><time datetime="2012-05-30T00:00:00.000Z" class="blogPostDate_Ta7i">May 30, 2012  ¬∑ 3 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><p>Inspired by <a href="http://www.hanselman.com/blog/SheLetMeTakeTheComputerHomeHowDidYouGetStartedInComputersAndProgramming.aspx" target="_blank" rel="noopener noreferrer">Hanselmans post on how he got started in programming</a> I thought I&#x27;d shared my own tale about how it all began... I grew up the 80&#x27;s just outside London. For those of you of a different vintage let me paint a picture. These were the days when &quot;Personal Computers&quot;, as they were then styled, were taking the world by storm. Every house would be equipped with either a ZX Spectrum, a Commodore 64 or an Amstrad CPC. These were 8 bit computers which were generally plugged into the family television and spent a good portion of their time loading games like <a href="http://en.wikipedia.org/wiki/Target:_Renegade" target="_blank" rel="noopener noreferrer">Target: Renegade</a> from an audio cassette. But not in our house; we didn&#x27;t have a computer. I remember mournfully pedalling home from friends houses on a number of occasions, glum as I compared my lot with theirs. Whereas my friends would be spending their evenings gleefully battering their keyboards as they thrashed the life out of various end-of-level bosses I was reduced to *<strong>wasting</strong>* my time reading. That&#x27;s right Enid Blyton - you were second best in my head. Then one happy day (and it may have been a Christmas present although I&#x27;m not certain) our family became the proud possessors of an <a href="http://en.wikipedia.org/wiki/Amstrad_CPC" target="_blank" rel="noopener noreferrer">Amstrad CPC 6128</a>: <img src="/blog.johnnyreilly.com/assets/images/CPC6128-2c47e616b77fe8f429f1a68c2fe2872a.jpg"></p><p>Glory be! I was going to play so many games! I would have such larks! My evenings would be filled with pixelated keyboard related destruction! Hallelujah!! But I was wrong. I had reckoned without my father. For reasons that I&#x27;ve never really got to the bottom of Dad had invested in the computer but not in the games. Whilst I was firmly of the opinion that these 2 went together like Lennon and McCartney he was having none of it. &quot;You can write your own son&quot; he intoned and handed over a manual which contained listings for games: <img src="/blog.johnnyreilly.com/assets/images/6a0120a85dcdae970b0120a86ddeee970b-4bba7afc9b32fa50759e551dcd419a9c.png"></p><p> And that&#x27;s where it first began really. I would spend my evenings typing the Locomotive Basic listings for computer games into the family computer. Each time I started I would be filled with great hopes for what might result. Each time I tended to be rewarded with something that looked a bit like this: <img src="/blog.johnnyreilly.com/assets/images/images-b4c0604b38d683a370e056488a20a183.jpg"></p><p> I&#x27;m not sure that it&#x27;s possible to learn to program by osmosis but if it is I&#x27;m definitely a viable test case. I didn&#x27;t become an expert Locomotive Basic programmer (was there ever such a thing?) but I did undoubtedly begin my understanding of software.... Thanks Dad! </p></section></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_3-lP"><a href="/blog.johnnyreilly.com/2012/05/07/globalizejs-number-and-date">Globalize.js - number and date localisation made easy</a></h2><div class="margin-vert--md"><time datetime="2012-05-07T00:00:00.000Z" class="blogPostDate_Ta7i">May 7, 2012  ¬∑ 8 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><p>I wanted to write about a JavaScript library which seems to have had very little attention so far. And that surprises me as it&#x27;s</p><ol><li>Brilliant!</li><li>Solves a common problem that faces many app developers who work in the wonderful world of web; myself included</li></ol><p>The library is called Globalize.js and can be found on <a href="https://github.com/jquery/globalize" target="_blank" rel="noopener noreferrer">GitHub here</a>. Globalize.js is a simple JavaScript library that allows you to format and parse numbers and dates in culture specific fashion.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="why-does-this-matter"></a>Why does this matter?<a class="hash-link" href="#why-does-this-matter" title="Direct link to heading">#</a></h2><p>Because different countries and cultures do dates and numbers in different ways. Christmas Day this year in England will be <code>25/12/2012</code> (dd/MM/yyyy). But for American eyes this should be <code>12/25/2012</code> (M/d/yyyy). And for German <code>25.12.2012</code> (dd.MM.yyyy). Likewise, if I was to express numerically the value of &quot;one thousand exactly - to 2 decimal places&quot;, as a UK citizen I would do it like so: <code>1,000.00</code>. But if I was French I&#x27;d express it like this: <code>1.000,00</code>. You see my point?</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="why-does-this-matter-to-me"></a>Why does this matter to me?<a class="hash-link" href="#why-does-this-matter-to-me" title="Direct link to heading">#</a></h2><p>For a number of years I&#x27;ve been working on applications that are used globally, from London to Frankfurt to Shanghai to New York to Singapore and many other locations besides. The requirement has always been to serve up localised dates and numbers so users experience of the system is more natural. Since our applications are all ASP.NET we&#x27;ve never really had a problem server-side. Microsoft have blessed us with all the goodness of <a href="http://msdn.microsoft.com/en-us/library/system.globalization.aspx" target="_blank" rel="noopener noreferrer">System.Globalization</a> which covers hundreds of different cultures and localisations. It makes it frankly easy:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">using System.Globalization;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//Produces: &quot;06.05.2012&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">new DateTime(2012,5,6).ToString(&quot;d&quot;, new CultureInfo(&quot;de-DE&quot;)); </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//Produces: &quot;45,56&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">45.56M.ToString(&quot;n&quot;, new CultureInfo(&quot;fr-FR&quot;));</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The problem has always been client-side. If you need to localise dates and numbers on the client what do you do?</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="javascript-date--number-localisation---the-status-quo"></a>JavaScript Date / Number Localisation - the Status Quo<a class="hash-link" href="#javascript-date--number-localisation---the-status-quo" title="Direct link to heading">#</a></h2><p>Well to be frank - it&#x27;s a bit rubbish really. What&#x27;s on offer natively at present basically amounts to this:</p><ul><li><a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/toLocaleDateString" target="_blank" rel="noopener noreferrer">Date.toLocaleDateString</a></li><li><a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number/ToLocaleString" target="_blank" rel="noopener noreferrer">Number.ToLocaleString</a></li></ul><p>This is better than nothing - but not by much. There&#x27;s no real control or flexibility here. If you don&#x27;t like the native localisation format or you want something slightly different then tough. This is all you&#x27;ve got to play with.</p><p>For the longest time this didn&#x27;t matter too much. Up until relatively recently the world of web was far more about the thin client and the fat server. It would be quite standard to have all HTML generated on the server. And, as we&#x27;ve seen .NET (and many other back end enviroments as well) give you all the flexiblility you might desire given this approach.</p><p><a href="http://www.youtube.com/watch?v=k2sYIIjS-cQ" target="_blank" rel="noopener noreferrer">But the times they are a-changing</a>. And given the ongoing explosion of HTML 5 the rich client is very definitely with us. So we need tools.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="microsoft-doing-good-things"></a>Microsoft doing *good things*<a class="hash-link" href="#microsoft-doing-good-things" title="Direct link to heading">#</a></h2><p>Hands up who remembers when Microsoft first shipped it&#x27;s <a href="http://msdn.microsoft.com/en-us/magazine/cc163300.aspx" target="_blank" rel="noopener noreferrer">ASP.NET AJAX</a> library back in 2007?</p><p>Well a small part of this was the extensions ASP.NET AJAX added to JavaScripts native Date and Number objects.... These extensions allowed the localisation of Dates and Numbers to the current UI culture and the subsequent string parsing of these back into Dates / Numbers. These extensions pretty much gave JavaScript the functionality that the server already had in <code>System.Globalization</code>. (not quite like-for-like but near enough the mark)</p><p>I&#x27;m not aware of a great fuss ever being made about this - a fact I find surprising since one would imagine this is a common need. There&#x27;s good documentation about this on MSDN - here&#x27;s some useful links:</p><ul><li><a href="http://msdn.microsoft.com/en-us/library/bb386572.aspx" target="_blank" rel="noopener noreferrer">Ajax Script Globalization and Localization</a></li><li><a href="http://msdn.microsoft.com/en-us/library/bb386581.aspx" target="_blank" rel="noopener noreferrer">Walkthrough: Globalizing a Date by Using Client Script</a></li><li><a href="http://msdn.microsoft.com/en-us/library/bb397506.aspx" target="_blank" rel="noopener noreferrer">JavaScript Base Type Extensions</a></li><li><a href="http://msdn.microsoft.com/en-us/library/bb397521.aspx" target="_blank" rel="noopener noreferrer">Date.parseLocale</a></li><li><a href="http://msdn.microsoft.com/en-us/library/bb383816.aspx" target="_blank" rel="noopener noreferrer">Date.localeFormat</a></li><li><a href="http://msdn.microsoft.com/en-us/library/bb310813.aspx" target="_blank" rel="noopener noreferrer">Number.localeFormat</a></li><li><a href="http://msdn.microsoft.com/en-us/library/bb310985.aspx" target="_blank" rel="noopener noreferrer">Number.parseLocale</a></li></ul><p>When our team became aware of this we started to make use of it in our web applications. I imagine we weren&#x27;t alone...</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="microsoft-doing-even-better-things-scott-gu-to-the-rescue"></a>Microsoft doing *even better things* (Scott Gu to the rescue!)<a class="hash-link" href="#microsoft-doing-even-better-things-scott-gu-to-the-rescue" title="Direct link to heading">#</a></h2><p>I started to think about this again when MVC reared it&#x27;s lovely head.</p><p>Like many, I found I preferred the separation of concerns / testability etc that MVC allowed. As such, our team was planning to, over time, migrate our ASP.NET WebForms applications over to MVC. However, before we could even begin to do this we had a problem. Our JavaScript localisation was dependant on the ScriptManager. The <a href="http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager.aspx" target="_blank" rel="noopener noreferrer">ScriptManager</a> is very much a WebForms construct.</p><p>What to do? To the users it wouldn&#x27;t be acceptable to remove the localisation functionality from the web apps. The architecture of an application is, to a certain extent, meaningless from the users perspective - they&#x27;re only interested in what directly impacts them. That makes sense, even if it was a problem for us.</p><p>Fortunately the Great Gu had it in hand. Lo and behold the <a href="http://forum.jquery.com/topic/proposal-for-a-globalization-plugin-jquery-glob-js" target="_blank" rel="noopener noreferrer">this post</a> appeared on the jQuery forum and the following post appeared on Guthrie&#x27;s blog:</p><p><a href="http://weblogs.asp.net/scottgu/archive/2010/06/10/jquery-globalization-plugin-from-microsoft.aspx" target="_blank" rel="noopener noreferrer">http://weblogs.asp.net/scottgu/archive/2010/06/10/jquery-globalization-plugin-from-microsoft.aspx</a></p><p>Yes that&#x27;s right. Microsoft were giving back to the jQuery community by contributing a jQuery globalisation plug-in. They&#x27;d basically taken the work done with ASP.NET AJAX Date / Number extensions, jQuery-plug-in-ified it and put it out there. Fantastic!</p><p>Using this we could localise / globalise dates and numbers whether we were working in WebForms or in MVC. Or anything else for that matter. If we were suddenly seized with a desire to re-write our apps in PHP we&#x27;d *<strong>still</strong>* be able to use Globalize.js on the client to handle our regionalisation of dates and numbers.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="history-takes-a-funny-course"></a>History takes a funny course...<a class="hash-link" href="#history-takes-a-funny-course" title="Direct link to heading">#</a></h2><p>Now for my part I would have expected that this announcement to be followed in short order by dancing in the streets and widespread adoption. Surprisingly, not so. All went quiet on the globalisation front for some time and then out of the blue the following comment appeared on the jQuery forum by <a href="http://rdworth.org/blog/" target="_blank" rel="noopener noreferrer">Richard D. Worth</a> (he of jQuery UI fame):</p><p><a href="http://blog.jquery.com/2011/04/16/official-plugins-a-change-in-the-roadmap/#comment-527484" target="_blank" rel="noopener noreferrer">http://blog.jquery.com/2011/04/16/official-plugins-a-change-in-the-roadmap/#comment-527484</a></p><p>The long and short of which was:</p><ul><li>The jQuery UI team were now taking care of (the re-named) Globalize.js library as the grid control they were developing had a need for some of Globalize.js&#x27;s goodness. Consequently a home for Globalize.js appeared on the jQuery UI website: <a href="http://wiki.jqueryui.com/Globalize" target="_blank" rel="noopener noreferrer">http://wiki.jqueryui.com/Globalize</a></li><li>The source of Globalize.js moved to this location on GitHub: <a href="https://github.com/jquery/globalize/" target="_blank" rel="noopener noreferrer">https://github.com/jquery/globalize/</a></li><li>Perhaps most significantly, the jQuery globalisation plug-in as developed by Microsoft had now been made a standalone JavaScript library. This was clearly brilliant news for Node.js developers as they would now be able to take advantage of this and perform localisation / globalisation server-side - they wouldn&#x27;t need to have jQuery along for the ride. Also, this would be presumably be good news for users of other client side JavaScript libraries like Dojo / YUI etc.</li></ul><p>Globalize.js clearly has a rosy future in front of it. Using the new Globalize.js library was still simplicity itself. Here&#x27;s some examples of localising dates / numbers using the German culture:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">script </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  src</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/Scripts/Globalize/globalize.js&quot;</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  type</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;text/javascript&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">script</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">script </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  src</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/Scripts/Globalize/cultures/globalize.culture.de-DE.js&quot;</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  type</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;text/javascript&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">script</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token maybe-class-name">Globalize</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">culture</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;de-DE&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//&quot;2012-05-06&quot; - ISO 8601 format</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token maybe-class-name">Globalize</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">format</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Date</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">2012</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;yyyy-MM-dd&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//&quot;06.05.2012&quot; - standard German short date format of dd.MM.yyyy</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token maybe-class-name">Globalize</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">format</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Date</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">2012</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token maybe-class-name">Globalize</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">culture</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">calendar</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">patterns</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">d</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">   </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//&quot;4.576,3&quot; - a number rendered to 1 decimal place</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token maybe-class-name">Globalize</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">format</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">4576.34</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;n1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="stick-a-fork-in-it---its-done"></a>Stick a fork in it - it&#x27;s done<a class="hash-link" href="#stick-a-fork-in-it---its-done" title="Direct link to heading">#</a></h2><p>The entry for Globalize.js on the jQuery UI site reads as follows:</p><blockquote><p><em>&quot;version: 0.1.0a1 (not a jQuery UI version number, as this is a standalone utility) status: in development (part of Grid project)&quot;</em></p></blockquote><p>I held back from making use of the library for some time, deterred by the &quot;in development&quot; status. However, I had a bit of dialog with one of the jQuery UI team (I forget exactly who) who advised that the API was unlikely to change further and that the codebase was actually pretty stable. Our team did some testing of Globalize.js and found this very much to be case. Everything worked just as we expected and hoped. We&#x27;re now using Globalize.js in a production environment with no problems reported; it&#x27;s been doing a grand job.</p><p>In my opinion, Number / Date localisation on the client is ready for primetime right now - it works! Unfortunately, because Globalize.js has been officially linked in with the jQuery UI grid project it seems unlikely that this will officially ship until the grid does. Looking at the jQuery UI <a href="http://wiki.jqueryui.com/Roadmap" target="_blank" rel="noopener noreferrer">roadmap</a> the grid is currently slated to release with jQuery UI 2.1. There isn&#x27;t yet a release date for jQuery UI 1.9 and so it could be a long time before the grid actually sees the light of day.</p><p>I&#x27;m hoping that the jQuery UI team will be persuaded to &quot;officially&quot; release Globalize.js long before the grid actually ships. Obviously people can use Globalize.js as is right now (as we are) but it seems a shame that many others will be missing out on using this excellent functionality, deterred by the &quot;in development&quot; status. Either way, <a href="http://www.youtube.com/watch?v=qEMytPF8YuY" target="_blank" rel="noopener noreferrer">the campaign to release Globalise.js officially starts here!</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="the-future"></a>The Future?<a class="hash-link" href="#the-future" title="Direct link to heading">#</a></h2><p>There are plans to bake globalisation right into JavaScript natively with EcmaScript 5.1. There&#x27;s a good post on the topic <a href="http://generatedcontent.org/post/59403168016/esintlapi" target="_blank" rel="noopener noreferrer">here</a>. And here&#x27;s a couple of historical links worth reading too:</p><p><a href="http://norbertlindenberg.com/2012/02/ecmascript-internationalization-api/" target="_blank" rel="noopener noreferrer">http://norbertlindenberg.com/2012/02/ecmascript-internationalization-api/</a><a href="http://wiki.ecmascript.org/doku.php?id=globalization:specification_drafts" target="_blank" rel="noopener noreferrer">http://wiki.ecmascript.org/doku.php?id=globalization:specification_drafts</a></p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/jqueryui">jqueryui</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/globalize-js">Globalize.JS</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/javascript">javascript</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/asp-net-ajax">ASP.NET AJAX</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/globalization">Globalization</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/richard-d-worth">Richard D. Worth</a></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog.johnnyreilly.com/page/19"><div class="pagination-nav__label">¬´ Newer Entries</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog.johnnyreilly.com/page/21"><div class="pagination-nav__label">Older Entries ¬ª</div></a></div></nav></main></div></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2021 John Reilly. Built with Docusaurus.</div></div></div></footer></div>
<script src="/blog.johnnyreilly.com/styles.7c653e04.js"></script>
<script src="/blog.johnnyreilly.com/runtime~main.8fae10d8.js"></script>
<script src="/blog.johnnyreilly.com/main.aa01ada2.js"></script>
<script src="/blog.johnnyreilly.com/1.a2fa6ec1.js"></script>
<script src="/blog.johnnyreilly.com/2.541c8135.js"></script>
<script src="/blog.johnnyreilly.com/a6aa9e1f.8b47d5c4.js"></script>
<script src="/blog.johnnyreilly.com/c3b5bd8c.b5dc6e8e.js"></script>
<script src="/blog.johnnyreilly.com/98821aa0.bdfba4ac.js"></script>
<script src="/blog.johnnyreilly.com/e716e4a2.dce075ba.js"></script>
<script src="/blog.johnnyreilly.com/df8b2109.eaaa1827.js"></script>
<script src="/blog.johnnyreilly.com/fa1c9811.6ee9782f.js"></script>
<script src="/blog.johnnyreilly.com/4011a4a4.8293621d.js"></script>
<script src="/blog.johnnyreilly.com/0ba27666.6beec0b8.js"></script>
<script src="/blog.johnnyreilly.com/87e112a6.f731c6e1.js"></script>
<script src="/blog.johnnyreilly.com/ba67aaac.4debbf83.js"></script>
<script src="/blog.johnnyreilly.com/65970fee.6941f052.js"></script>
<script src="/blog.johnnyreilly.com/e59d3252.a455db80.js"></script>
<script src="/blog.johnnyreilly.com/9010b26a.41ae5dc5.js"></script>
</body>
</html>