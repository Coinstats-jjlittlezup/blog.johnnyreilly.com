<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.73">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="I CAN MAKE THIS WORK Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="I CAN MAKE THIS WORK Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-51754530-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="icon" href="/img/favicon/profile.jpg">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/favicon/apple-touch-icon.png"><title data-react-helmet="true">I CAN MAKE THIS WORK</title><meta data-react-helmet="true" name="description" content="The blog of johnnyreilly"><meta data-react-helmet="true" property="og:description" content="The blog of johnnyreilly"><meta data-react-helmet="true" property="og:url" content="https://blog.johnnyreilly.com/page/95"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="blog_posts_list"><meta data-react-helmet="true" property="og:title" content="I CAN MAKE THIS WORK"><meta data-react-helmet="true" property="og:image" content="https://blog.johnnyreilly.com/img/profile.png"><meta data-react-helmet="true" name="twitter:image" content="https://blog.johnnyreilly.com/img/profile.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://blog.johnnyreilly.com/page/95"><link data-react-helmet="true" rel="alternate" href="https://blog.johnnyreilly.com/page/95" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://blog.johnnyreilly.com/page/95" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.105de97d.css">
<link rel="preload" href="/assets/js/styles.a4ce88d2.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.b634e2bd.js" as="script">
<link rel="preload" href="/assets/js/main.b119f4b6.js" as="script">
<link rel="preload" href="/assets/js/1.8b668980.js" as="script">
<link rel="preload" href="/assets/js/2.544547e0.js" as="script">
<link rel="preload" href="/assets/js/a6aa9e1f.233af7f3.js" as="script">
<link rel="preload" href="/assets/js/c3b5bd8c.4d1bf496.js" as="script">
<link rel="preload" href="/assets/js/8dcbd6a7.4b08beb6.js" as="script">
<link rel="preload" href="/assets/js/d10f4b2c.c10b87f0.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">I CAN MAKE THIS WORK</strong></a><a class="navbar__item navbar__link" href="/about">About</a><a class="navbar__item navbar__link" href="/blog-archive">Blog Archive</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Twitter</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">I CAN MAKE THIS WORK</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/about">About</a></li><li class="menu__list-item"><a class="menu__link" href="/blog-archive">Blog Archive</a></li><li class="menu__list-item"><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" class="menu__link">Twitter</a></li></ul></div></div></div></nav><div class="main-wrapper blog-wrapper blog-list-page"><div class="container margin-vert--lg"><div class="row"><div class="col col--3"><div class="sidebar_2ahu thin-scrollbar"><h3 class="sidebarItemTitle_2hhb">Recent posts</h3><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/04/20/ts-loader-goes-webpack-5">ts-loader goes webpack 5</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/04/10/hello-world-bicep">Hello World Bicep</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/03/23/bicep-meet-azure-pipelines-2">Bicep meet Azure Pipelines 2</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/03/20/bicep-meet-azure-pipelines">Bicep meet Azure Pipelines</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/03/17/rss-update-we-moved-to-docusaurus">RSS update; we moved to Docusaurus</a></li></ul></div></div><main class="col col--7"><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_GeHD"><a href="/2017/02/23/under-duck-afternoon-in-open-source">Under the Duck: An Afternoon in Open Source</a></h2><div class="margin-vert--md"><time datetime="2017-02-23T00:00:00.000Z" class="blogPostDate_fNvV">February 23, 2017 Â· 6 min read</time></div><div class="avatar margin-vert--md"><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img src="https://blog.johnnyreilly.com/img/profile.jpg" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><div class="markdown"><p>Have you ever wondered what happens behind the scenes of open source projects? One that I&#x27;m involved with is <a href="https://github.com/typestrong/ts-loader" target="_blank" rel="noopener noreferrer">ts-loader</a>; a TypeScript loader for webpack. Yesterday was an interesting day in the life of ts-loader and webpack; things unexpectedly broke. Oh and don&#x27;t worry, they&#x27;re fixed now.</p><p> How things panned out reflects well on the webpack community. I thought it might be instructive to take a look at the legs furiously paddling underneath the duck of open source. What follows is a minute by minute account of my life on the afternoon of Wednesday 22nd February 2017:</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="355pm"></a>3:55pm<a class="hash-link" href="#355pm" title="Direct link to heading">#</a></h3><p> I&#x27;m sat at my desk in the City of London. I have to leave at 4pm to go to the dentist. I&#x27;m working away on a project which is built and bundled using ts-loader and webpack. However, having just npm installed and tried to spin up webpack in watch mode, I discover that everything is broken. Watch mode is not working - there&#x27;s an error being thrown in ts-loader. It&#x27;s to do with a webpack property called <code>mtimes</code>. ts-loader depends upon it and it looks like it is no longer always passed through. Go figure. ### 4:01pm</p><p>I&#x27;ve got to go. I&#x27;m 15 minutes from Bank station. So, I grab my bag and scarper out the door. On my phone I notice <a href="https://github.com/TypeStrong/ts-loader/issues/479" target="_blank" rel="noopener noreferrer">an issue</a> has been raised - other people are being affected by the problem too. As I trot down the various alleys that lead to the station I wonder whether I can work around this issue. Using GitHub to fork, edit code and submit a PR on a mobile phone is possible. Just. But it&#x27;s certainly not easy...</p><p><a href="https://github.com/TypeStrong/ts-loader/pull/481" target="_blank" rel="noopener noreferrer">My PR is in</a>, the various test packs are starting to execute somewhere out there in Travis and Appveyor-land. Then I notice <a href="https://github.com/mredbishop" target="_blank" rel="noopener noreferrer">Ed Bishop</a> has submitted a <a href="https://github.com/TypeStrong/ts-loader/pull/480" target="_blank" rel="noopener noreferrer">near identical PR</a>. Yay Ed! I&#x27;m always keen to encourage people to contribute and so I intend to merge that PR rather than my own.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="1612"></a>16:12<a class="hash-link" href="#1612" title="Direct link to heading">#</a></h3><p>Rubbish. The Waterloo and City Line is out of action. I need to get across London to reach Waterloo or I&#x27;ll miss my appointment. It&#x27;s time to start running....</p><iframe width="560" height="315" src="https://www.youtube.com/embed/4IBGernmtKA" frameborder="0"></iframe><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="1615"></a>16:15<a class="hash-link" href="#1615" title="Direct link to heading">#</a></h3><p>It&#x27;s rather nagging at me that behaviour has changed without warning. This has been reliably in place the entire time I&#x27;ve been involved with ts-loader / webpack. Why now? I don&#x27;t see any obvious mentions on the webpack GitHub repo. So I head over to the webpack Slack channel and ask: (conversation slightly abridged)</p><blockquote><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="johnny_reilly"></a>johnny_reilly<a class="hash-link" href="#johnny_reilly" title="Direct link to heading">#</a></h4><p>Hey all, has something happened to <code>mtimes</code>? Behaviour seems to have changed - now undefined occasionally during watch mode. A PR has been raised against ts-loader to work around this <a href="https://github.com/TypeStrong/ts-loader/pull/480#issuecomment-281714600" target="_blank" rel="noopener noreferrer">https://github.com/TypeStrong/ts-loader/pull/480#issuecomment-281714600</a></p><p>However I&#x27;m wondering if this should actually be merged given behaviour has changed unexpectedly</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="sokra"></a>sokra<a class="hash-link" href="#sokra" title="Direct link to heading">#</a></h4><p>ah...</p><p>i removed it. I thought it was unused.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="johnny_reilly-1"></a>johnny_reilly<a class="hash-link" href="#johnny_reilly-1" title="Direct link to heading">#</a></h4><p>It&#x27;s definitely not!</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="sokra-1"></a>sokra<a class="hash-link" href="#sokra-1" title="Direct link to heading">#</a></h4><p>it&#x27;s not in the public API^^</p><p>Any reason why you are not using <code>getTimes()</code>?</p><p>...</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="johnny_reilly-2"></a>johnny_reilly<a class="hash-link" href="#johnny_reilly-2" title="Direct link to heading">#</a></h4><p> Okay, I&#x27;m on a train and won&#x27;t be near a computer for a while. ts-loader is presently broken because it depends on mtimes. Would it be possible for you to add this back at least for now. I&#x27;m aware many people depend on ts-loader and are now broken. #### sokra</p><p>sure, I readd it but deprecate it.</p><p>...</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="seanlarkin"></a>sean.larkin<a class="hash-link" href="#seanlarkin" title="Direct link to heading">#</a></h4><p> @sokra is this the change you just made for that watchpack bug fix? Or unlrelated, just wanted to track if I didn&#x27;t already have the change/issue #### sokra</p><p><a href="https://github.com/webpack/watchpack/pull/48" target="_blank" rel="noopener noreferrer">https://github.com/webpack/watchpack/pull/48</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="johnny_reilly-3"></a>johnny_reilly<a class="hash-link" href="#johnny_reilly-3" title="Direct link to heading">#</a></h4><p>This is what the present code does:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> watcher </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> watching</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">compiler</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">watchFileSystem</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">watcher</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">||</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                watching</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">compiler</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">watchFileSystem</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">wfs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">watcher</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>And then <code>.mtimes</code></p><p>Should I be able to do <code>.getTimes()</code> instead?</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="sokra-2"></a>sokra<a class="hash-link" href="#sokra-2" title="Direct link to heading">#</a></h4><p>actually you can&#x27;t rely on <code>watchFileSystem</code> being <code>NodeJsWatchFileSystem</code>. But this is another topic</p><p>...</p><p>but yes</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="johnny_reilly-4"></a>johnny_reilly<a class="hash-link" href="#johnny_reilly-4" title="Direct link to heading">#</a></h4><p>Thanks @sokra - when I get to a keyboard I&#x27;ll swap <code>mtimes</code> for <code>getTimes()</code> and report back.</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="1728"></a>17:28<a class="hash-link" href="#1728" title="Direct link to heading">#</a></h3><p>Despite various trains being out of action / missing in action I&#x27;ve made it to the dentists; phew! I go in for my checkup and plan to take a look at the issue later that evening. In the meantime I&#x27;ve hoping that Tobias (<a href="https://twitter.com/wsokra" target="_blank" rel="noopener noreferrer">Sokra</a>) will get chance to republish so that ts-loader users aren&#x27;t too impacted.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="1800"></a>18:00<a class="hash-link" href="#1800" title="Direct link to heading">#</a></h3><p>Done at the dentist and I&#x27;m heading home. Whilst I&#x27;ve been opening wide and squinting at the ceiling, <a href="https://blogs.msdn.microsoft.com/typescript/2017/02/22/announcing-typescript-2-2/" target="_blank" rel="noopener noreferrer">TypeScript 2.2 has shipped</a>. Whilst this is super exciting, according to Greenkeeper, <a href="https://github.com/TypeStrong/ts-loader/pull/483" target="_blank" rel="noopener noreferrer">the new version has broken the build</a>. Arrrrghhhh...</p><p>I start to look into this and realise we&#x27;re not broken because of TypeScript 2.2; we were broken because of the <code>mtimes</code>. Tobias has now re-added <code>mtimes</code> and published. With that in place I requeue a build and.... drum roll.... we&#x27;re green!</p><p>The good news just keeps on coming as <a href="https://twitter.com/bancek" target="_blank" rel="noopener noreferrer">Luka ZakrajÅ¡ek</a> has submitted a <a href="https://github.com/TypeStrong/ts-loader/pull/482" target="_blank" rel="noopener noreferrer">PR which uses <code>getTimes()</code> in place of <code>mtimes</code></a>. And the tests pass. Awesome! MERGE. I just need to cut a release and we&#x27;re done.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="1815"></a>18:15<a class="hash-link" href="#1815" title="Direct link to heading">#</a></h3><p>I&#x27;m home. My youngest son has been suffering from chicken pox all week and as a result my wife has been in isolation, taking care of him. We chat whilst the boys watch Paw Patrol as the bath runs. I flick open the laptop and start doing the various housekeeping tasks around cutting a release. This is interrupted by various bathtime / bedtime activities and I abandon work for now.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="1930"></a>19:30<a class="hash-link" href="#1930" title="Direct link to heading">#</a></h3><p>The boys are down and I get on with the release; updating the changelog, bumping the version number and running the tests. For various reasons this takes longer than it normally does.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="2030"></a>20:30<a class="hash-link" href="#2030" title="Direct link to heading">#</a></h3><p>Finally we&#x27;re there; ts-loader 2.0.1 ships: <a href="https://github.com/TypeStrong/ts-loader/releases/tag/v2.0.1" target="_blank" rel="noopener noreferrer">https://github.com/TypeStrong/ts-loader/releases/tag/v2.0.1</a>.</p><p>I&#x27;m tremendously grateful to everyone that helped out - thank you all!</p><blockquote><p>ts-loader 2.0.1 has shipped; thanks <a href="https://twitter.com/wSokra" target="_blank" rel="noopener noreferrer">@wsokra</a><a href="https://twitter.com/bancek" target="_blank" rel="noopener noreferrer">@bancek</a> and @mredbishop <a href="https://t.co/I00c7sJyFo" target="_blank" rel="noopener noreferrer">https://t.co/I00c7sJyFo</a><a href="https://twitter.com/hashtag/typescript?src=hash" target="_blank" rel="noopener noreferrer">#typescript</a></p><p>â€” John Reilly (@johnny_reilly) <a href="https://twitter.com/johnny_reilly/status/834515296077627392" target="_blank" rel="noopener noreferrer">February 22, 2017</a></p></blockquote><script src="//platform.twitter.com/widgets.js" charset="utf-8"></script></div><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/tags/breaking-changes">breaking changes</a><a class="margin-horiz--sm" href="/tags/ts-loader">ts-loader</a><a class="margin-horiz--sm" href="/tags/webpack">Webpack</a></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/page/94"><div class="pagination-nav__label">Â« Newer Entries</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/page/96"><div class="pagination-nav__label">Older Entries Â»</div></a></div></nav></main></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a href="https://www.buymeacoffee.com/qUBm0Wh" target="_blank"><img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me A Coffee" style="height: 60px !important;width: 217px !important;"></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 John Reilly. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/styles.a4ce88d2.js"></script>
<script src="/assets/js/runtime~main.b634e2bd.js"></script>
<script src="/assets/js/main.b119f4b6.js"></script>
<script src="/assets/js/1.8b668980.js"></script>
<script src="/assets/js/2.544547e0.js"></script>
<script src="/assets/js/a6aa9e1f.233af7f3.js"></script>
<script src="/assets/js/c3b5bd8c.4d1bf496.js"></script>
<script src="/assets/js/8dcbd6a7.4b08beb6.js"></script>
<script src="/assets/js/d10f4b2c.c10b87f0.js"></script>
</body>
</html>