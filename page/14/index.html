<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog.johnnyreilly.com/rss.xml" title="I CAN MAKE THIS WORK Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog.johnnyreilly.com/atom.xml" title="I CAN MAKE THIS WORK Blog Atom Feed"><title data-react-helmet="true">Blog | I CAN MAKE THIS WORK</title><meta data-react-helmet="true" property="og:title" content="Blog | I CAN MAKE THIS WORK"><meta data-react-helmet="true" name="description" content="Blog"><meta data-react-helmet="true" property="og:description" content="Blog"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><link data-react-helmet="true" rel="shortcut icon" href="/blog.johnnyreilly.com/img/favicon.ico"><link rel="stylesheet" href="/blog.johnnyreilly.com/styles.a755cef0.css">
<link rel="preload" href="/blog.johnnyreilly.com/styles.7c653e04.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/runtime~main.8fae10d8.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/main.aa01ada2.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/1.a2fa6ec1.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/2.541c8135.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/a6aa9e1f.8b47d5c4.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/c3b5bd8c.b5dc6e8e.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/006cd652.c3a3d198.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/8ad79eb5.163e13ab.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/cb5d9d95.71da55c6.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/69a5cb2c.8fb1266e.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/57f906a3.9000d6ce.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/a85279d2.093b0367.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/476b20cf.a0927ea0.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/7a43a6e3.5856385f.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/15e6eb78.dcf1cecf.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/6b5787b1.03034dfb.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/06ba4870.7b3eb8cd.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/blog.johnnyreilly.com/"><img src="/blog.johnnyreilly.com/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/blog.johnnyreilly.com/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">I CAN MAKE THIS WORK</strong></a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/blog.johnnyreilly.com/"><img src="/blog.johnnyreilly.com/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/blog.johnnyreilly.com/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">I CAN MAKE THIS WORK</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"></ul></div></div></div></nav><div class="main-wrapper blog-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--2"><div class="sidebar_SWld thin-scrollbar"><h3 class="sidebarItemTitle_Km2m">Recent posts</h3><ul class="sidebarItemList_3UpA"><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog.johnnyreilly.com/2021/03/10/managed-identity-azure-sql-entity-framework">Managed Identity, Azure SQL and Entity Framework</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog.johnnyreilly.com/2021/03/06/generate-typescript-and-csharp-clients-with-nswag">Generate TypeScript and CSharp clients with NSwag based on an API</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog.johnnyreilly.com/2021/02/27/goodbye-client-affinity-hello-data-protection-with-azure">Goodbye Client Affinity, Hello Data Protection with Azure</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog.johnnyreilly.com/2021/02/16/easy-auth-tokens-survive-releases-on-linux-azure-app-service">Making Easy Auth tokens survive releases on Linux Azure App Service</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog.johnnyreilly.com/2021/02/11/azure-app-service-health-checks-and-zero-downtime-deployments">Azure App Service, Health checks and zero downtime deployments</a></li></ul></div></div><main class="col col--8"><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_3-lP"><a href="/blog.johnnyreilly.com/2015/03/20/partialview-tostring">PartialView.ToString()</a></h2><div class="margin-vert--md"><time datetime="2015-03-20T00:00:00.000Z" class="blogPostDate_Ta7i">March 20, 2015  Â· 4 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><p>In the name of <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" target="_blank" rel="noopener noreferrer">DRY</a> I found myself puzzling how one could take a <code>PartialViewResult</code> and render it as a <code>string</code>. Simple, right?</p><p> In fact, in my head this was already a solved problem. I mean I&#x27;ve written about this <a href="http://blog.icanmakethiswork.io/2012/07/rendering-partial-view-to-string.html" target="_blank" rel="noopener noreferrer">before</a> already! Except I haven&#x27;t. Not really - what I did back then was link to what someone else had written and say &quot;yay! well done chap - like he said!&quot;. It turns out that was a bad move. That blog appears to be gone and so I&#x27;m back to where I was. Ug. Lesson learned.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="what-are-we-trying-to-do"></a>What are we trying to do?<a class="hash-link" href="#what-are-we-trying-to-do" title="Direct link to heading">#</a></h2><p>So, for the second time of asking, here is how to take a <code>PartialViewResult</code> and turn it into a <code>string</code>. It&#x27;s an invaluable technique to deal with certain scenarios.</p><p>In my own case I have a toolbar in my application that is first pushed into the UI in my <code>_Layout.cshtml</code> by means of a trusty <code>@Html.Action(&quot;Toolbar&quot;)</code>. I wanted to be able to re-use the <code>PartialViewResult</code> returned by <code>Toolbar</code> on my controller inside a <code>JSON</code> payload. And despite the title of this post, <code>PartialView.ToString()</code><em>doesn&#x27;t</em> quite cut the mustard. Obvious really, if it did then why would I be writing this and you be reading this?</p><p>The solution is actually fairly simple. And, purely for swank, I&#x27;m going to offer it you 3 ways. Whatever&#x27;s your poison.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="inheritance-its-so-yesterday-darling"></a>Inheritance (it&#x27;s so yesterday darling)<a class="hash-link" href="#inheritance-its-so-yesterday-darling" title="Direct link to heading">#</a></h2><p>Yes there was a time when everything was inheritance based. You were rewarded handsomely for making sure that was the case. However, times have changed and (with good reason) people tend to <a href="https://en.wikipedia.org/wiki/Composition_over_inheritance" target="_blank" rel="noopener noreferrer">favour composition over inheritance</a>. So, perhaps just for the memories, let first offer you the inheritance based approach:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">protected string ConvertPartialViewToString(PartialViewResult partialView)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  using (var sw = new StringWriter())</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    partialView.View = ViewEngines.Engines</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      .FindPartialView(ControllerContext, partialView.ViewName).View;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    var vc = new ViewContext(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      ControllerContext, partialView.View, partialView.ViewData, partialView.TempData, sw);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    partialView.View.Render(vc, sw);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    var partialViewString = sw.GetStringBuilder().ToString();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return partialViewString;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The idea being that the above method is placed onto a base controller which your controllers subclass. Thus using this method inside one of the controllers is as simple as:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var toolbarHtml = ConvertPartialViewToString(partialViewResult);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="extension-method-sexier-syntax"></a>Extension method (sexier syntax)<a class="hash-link" href="#extension-method-sexier-syntax" title="Direct link to heading">#</a></h2><p>So the next choice is implementing this as an extension method. Here&#x27;s my static class which adds <code>ConvertToString</code> onto <code>PartialViewResult</code>:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">using System.IO;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">using System.Web.Mvc;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">namespace My.Utilities.Extensions</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  public static class PartialViewResultExtensions</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public static string ConvertToString(this PartialViewResult partialView, </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                              ControllerContext controllerContext)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      using (var sw = new StringWriter())</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        partialView.View = ViewEngines.Engines</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          .FindPartialView(controllerContext, partialView.ViewName).View;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        var vc = new ViewContext(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          controllerContext, partialView.View, partialView.ViewData, partialView.TempData, sw);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        partialView.View.Render(vc, sw);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        var partialViewString = sw.GetStringBuilder().ToString();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return partialViewString;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>I don&#x27;t know about you but I do love an extension method - it often makes for much more readable code. In this case we can use:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var toolbarHtml = partialViewResult.ConvertToString(ControllerContext);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Which I think we can all agree is really rather lovely. Perhaps it would be more lovely if I didn&#x27;t have to pass <code>ControllerContext</code> - but hey! Still quite nice.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="favouring-composition-over-inheritance-testable"></a>Favouring Composition over Inheritance (testable)<a class="hash-link" href="#favouring-composition-over-inheritance-testable" title="Direct link to heading">#</a></h2><p>Although ASP.Net MVC was designed to be testable there are times when you think &quot;really? Can it be that hard?&quot;. In fact for a well thought through discussion on the topic I advise you read <a href="http://volaresystems.com/blog/post/2010/08/19/Dont-mock-HttpContext" target="_blank" rel="noopener noreferrer">this</a>. (I&#x27;m aware of the irony implicit in linking to another blog post in a blog post that I only wrote because I first linked to another blog which vanished.... Infinite recursion anybody?)</p><p>The conclusion of the linked blog post is twofold</p><ol><li>Don&#x27;t mock HTTPContext</li><li>Use the <a href="https://en.wikipedia.org/wiki/Facade_pattern" target="_blank" rel="noopener noreferrer">facade pattern</a> instead</li></ol><p>Having testable code is not a optional bauble in my view - it&#x27;s a necessity. So with my final approach that&#x27;s exactly what I&#x27;ll do.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">using System.Web.Mvc;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">namespace My.Interfaces</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  public interface IMvcInternals</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string ConvertPartialViewToString(PartialViewResult partialView, ControllerContext controllerContext);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// ....</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">using System.IO;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">using System.Web.Mvc;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">using My.Interfaces;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">namespace My.Utilities</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  public class MvcInternals : IMvcInternals</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public string ConvertPartialViewToString(PartialViewResult partialView, </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                             ControllerContext controllerContext)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      using (var sw = new StringWriter())</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        partialView.View = ViewEngines.Engines</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          .FindPartialView(controllerContext, partialView.ViewName).View;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        var vc = new ViewContext(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          controllerContext, partialView.View, partialView.ViewData, partialView.TempData, sw);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        partialView.View.Render(vc, sw);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        var partialViewString = sw.GetStringBuilder().ToString();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return partialViewString;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>So here I have a simple interface with a <code>ConvertPartialViewToString</code> method on it. This interface can be passed into a controller and then used like this:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var toolbarHtml = _mvcInternals.ConvertPartialViewToString(partialViewResult, ControllerContext);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Ah... that&#x27;s the sweet mellifluous sound of easily testable code.</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/asp-net-mvc">asp.net mvc</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/sward">sward</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/partial-view">PartialView</a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_3-lP"><a href="/blog.johnnyreilly.com/2015/02/27/hey-tsconfigjson-where-have-you-been">Hey tsconfig.json, where have you been all my life?</a></h2><div class="margin-vert--md"><time datetime="2015-02-27T00:00:00.000Z" class="blogPostDate_Ta7i">February 27, 2015  Â· 5 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><p>Sometimes, you just miss things. Something seismic happens and you had no idea. So it was with <code>tsconfig.json</code>.</p><p> This blog post started life with the name &quot;TypeScript: Some IDEs are more equal than others&quot;. I&#x27;d intended to use it summarise a discussion on the <a href="https://github.com/Microsoft/TypeScript/issues/1066" target="_blank" rel="noopener noreferrer">TypeScript GitHub repo</a> about implicit referencing including a fist shaken at the sky at the injustice of it all. But whilst I was writing it I dicovered things had changed without my knowledge. That&#x27;s a rather wonderful thing.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="implicit-referencing"></a>Implicit Referencing<a class="hash-link" href="#implicit-referencing" title="Direct link to heading">#</a></h2><p>Implicit referencing, if you&#x27;re not aware, is the thing that separates Visual Studio from all other IDEs / text editors. Implicit referencing means that in Visual Studio you don&#x27;t need to make use of comments at the head of each TypeScript file in order to tell the compiler where it can find the related TypeScript files.</p><p>The <code>reference</code> comments aren&#x27;t necessary when using Visual Studio because the VS project file is used to drive the files passed to the TypeScript compiler (tsc).</p><p>The upshot of this is that, at time of writing, you can generally look at a TypeScript codebase and tell whether it was written using Visual Studio by opening it up a file at random and eyeballing for something like this at the top:</p><div class="mdxCodeBlock_1zKU">/// &lt;reference path=&quot;other-file.ts&quot; /&gt;</div><p><em>&quot;A-ha! They&#x27;re using &quot;reference&quot; comments Watson. From this I deduce that the individuals in question are using the internal module approach and using Visual Studio as their IDE. Elementary, my dear fellow, quite elementary.&quot;</em></p><p>This has important implications. Important I tell you, yes important! Well, important if you want to reduce the barriers between Visual Studio and everyone else. And I do. Whilst I love Visual Studio - it&#x27;s been my daily workhorse for many years - I also love stepping away from it and using something more stripped down. I also like working with other people without mandating that they need to use Visual Studio as well. In the words of Rodney King, &quot;can&#x27;t we all get along?&quot;.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="cross-ide-typescript-projects"></a>Cross-IDE TypeScript projects<a class="hash-link" href="#cross-ide-typescript-projects" title="Direct link to heading">#</a></h2><p>I feel I should be clear - you can already set up TypeScript projects to work regardless of IDE. But there&#x27;s friction. It&#x27;s not clear cut. You can see a full on discussion around this <a href="https://github.com/Microsoft/TypeScript/issues/1066" target="_blank" rel="noopener noreferrer">here</a> but in the end it comes down to making a choice between these 3 options:</p><ol><li>Set <div>false</div> in a project file. <a href="https://github.com/Microsoft/TypeScript/issues/1066#issuecomment-63727612" target="_blank" rel="noopener noreferrer">This flag effectively deactivates implicit referencing.</a> This approach requires that all developers (regardless of IDE) use <code>/// &amp;lt;reference</code>s to build context. Compiler options in VS can be controlled using the project file as is.</li><li>Using Visual Studio without any csproj tweaks. This approach requires that all files will need <code>/// &amp;lt;reference</code>s at their heads in order to build compilation context <em>outside</em> of Visual Studio. It&#x27;s possible that <code>/// &amp;lt;reference</code>s and the csproj could get out of line - care is required to avoid this. Compiler options in VS can be controlled using the project file as is.</li><li>Using just files in Visual Studio with <code>/// &amp;lt;reference</code>s to build compilation context. This scenario also requires that all developers (regardless of IDE) use <code>/// &amp;lt;reference</code>s to build context. In Visual Studio there will be no control over compiler options.</li></ol><p>As you can see - this is sub-optimal. But don&#x27;t worry - there&#x27;s a new sheriff in town....</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="tsconfigjson"></a><code>tsconfig.json</code><a class="hash-link" href="#tsconfigjson" title="Direct link to heading">#</a></h2><p>I&#x27;d decided to give <a href="https://github.com/TypeStrong/atom-typescript" target="_blank" rel="noopener noreferrer">Atom TypeScript plugin</a> a go as I heard much enthusiastic noise about it. I fired it up and pointed it at a a TypeScript AngularJS project built in Visual Studio. I was mentally preparing myself for the job of adding all the /// references in when I suddenly noticed a file blinking at me: <a href="http://3.bp.blogspot.com/-cK80o3-ysP0/VPCV9fxtwXI/AAAAAAAAAzA/HC8uY9wjB7s/s1600/Screenshot%2B2015-02-27%2B16.05.29.png" target="_blank" rel="noopener noreferrer"><img src="http://3.bp.blogspot.com/-cK80o3-ysP0/VPCV9fxtwXI/AAAAAAAAAzA/HC8uY9wjB7s/s640/Screenshot%2B2015-02-27%2B16.05.29.png" alt="null"></a></p><p><code>tsconfig.json</code>? What&#x27;s that? Time to read <a href="https://github.com/TypeStrong/atom-typescript#project-support" target="_blank" rel="noopener noreferrer">the docs</a>:</p><blockquote><p>Supported via tsconfig.json (<a href="https://github.com/TypeStrong/atom-typescript/blob/master/docs/tsconfig.md" target="_blank" rel="noopener noreferrer">read more</a>) which is going to be the defacto Project file format for the next versions of TypeScript.</p></blockquote><p>&quot;read more&quot;? Oh yes indeedy - I think I will &quot;read more&quot;!</p><blockquote><p>A unified project format for TypeScript (<a href="https://github.com/Microsoft/TypeScript/pull/1692" target="_blank" rel="noopener noreferrer">see merged PR on Microsoft/TypeScript</a>). The TypeScript compiler (1.4 and above) only cares about compilerOptions and files. We add additional features to this <a href="https://github.com/Microsoft/TypeScript/issues/1955" target="_blank" rel="noopener noreferrer">with the typescript team&#x27;s approval to extend the file as long as we don&#x27;t conflict:</a></p><ul><li><a href="https://github.com/TypeStrong/atom-typescript/blob/e2fa67c4715189b71430f766ed9a92d9fb3255f9/lib/main/tsconfig/tsconfig.ts#L8-L35" target="_blank" rel="noopener noreferrer">compilerOptions</a> similar to what you would pass on the commandline to tsc. </li><li><a href="https://github.com/TypeStrong/atom-typescript/blob/master/docs/tsconfig.md#filesglob" target="_blank" rel="noopener noreferrer">filesGlob</a>: To make it easier for you to just add / remove files in your project we add filesGlob which accepts an array of glob / minimatch / RegExp patterns (similar to grunt)to specify source files.</li><li><a href="https://github.com/TypeStrong/atom-typescript/blob/master/docs/tsconfig.md#format" target="_blank" rel="noopener noreferrer">format</a>: Code formatting options</li><li><a href="https://github.com/TypeStrong/atom-typescript/blob/master/docs/tsconfig.md#version" target="_blank" rel="noopener noreferrer">version</a>: The TypeScript version</li></ul></blockquote><p>That&#x27;s right folks, we don&#x27;t need <code>/// &amp;lt;reference</code>s comments anymore. In a blinding flash of light it all changes. We&#x27;re going from the dark end of the street, to the bright side of the road. <code>tsconfig.json</code> is here to ease away the pain and make it all better. Let&#x27;s enjoy it while we can.</p><p>This change should ship with TypeScript 1.5 (hopefully) for those using Visual Studio. For those using Atom TypeScript (and as of today that&#x27;s includes me) the carnival celebrations can begin now!</p><p>Thanks to <a href="https://github.com/basarat" target="_blank" rel="noopener noreferrer">@basarat</a> who have quoted at length and <a href="https://smellegantcode.wordpress.com/" target="_blank" rel="noopener noreferrer">Daniel Earwicker</a> who is the reason that I came to discover <code>tsconfig.json</code>.</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/tsconfig-json">tsconfig.json</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/type-script">TypeScript</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/implicit-references">implicit references</a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_3-lP"><a href="/blog.johnnyreilly.com/2015/02/17/using-gulp-in-asp-net-instead-of-web-optimization">Using Gulp to inject scripts and styles tags directly into your HTML</a></h2><div class="margin-vert--md"><time datetime="2015-02-17T00:00:00.000Z" class="blogPostDate_Ta7i">February 17, 2015  Â· 11 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><p>This is very probably the dullest title for a blog post I&#x27;ve ever come up with. Read on though folks - it&#x27;s definitely going to pick up...</p><p> I <a href="/blog.johnnyreilly.com/2014/11/using-gulp-in-visual-studio-instead-of-web-optimization.html">wrote last year</a> about my first usage of Gulp in an ASP.Net project. I used Gulp to replace the Web Optimization functionality that is due to disappear when ASP.Net v5 ships. What I came up with was an approach that provided pretty much the same functionality; raw source in debug mode, bundling + minification in release mode.</p><p>It worked by having a launch page which was straight HTML. Embedded within this page was JavaScript that would, at runtime, load the required JavaScript / CSS and inject it dynamically into the document. This approach worked but it had a number of downsides:</p><ol><li>Each time you fired up the app the following sequence of events would happen: - jQuery would load (purely there to simplify the making of various startup AJAX calls)</li></ol><ul><li>the page would make an AJAX call to the server to load various startup data, including whether the app is running in debug or release mode</li><li>Depending on the result of the startup data either the debug or release package manifest would be loaded.</li><li>For each entry in the package manifest <code>script</code> and <code>link</code> tags would be created and added to the document. These would generate further requests to the server to load the resources.</li></ul><p>Quite a lot going on here isn&#x27;t there? Accordingly, initial startup time was slower than you might hope.
2. The &quot;F&quot; word: <a href="https://en.wikipedia.org/wiki/Flash_of_unstyled_content" target="_blank" rel="noopener noreferrer">FOUC</a>. Flash Of Unstyled Content - whilst all the hard work of the page load was going on (before the CSS had been loaded) the page would look rather ... bare. Not a terrible thing but none too slick either.
3. The gulpfile built both the debug and the release package each time it was run. This meant the gulp task generally did double the work that it needed to do.</p><p>I wanted to see if I could tackle these issues. I&#x27;ve recently been watching <a href="https://twitter.com/John_Papa" target="_blank" rel="noopener noreferrer">John Papa</a>&#x27;s excellent <a href="http://www.pluralsight.com/courses/javascript-build-automation-gulpjs" target="_blank" rel="noopener noreferrer">Pluralsight course on Gulp</a> and picked up a number of useful tips. With that in hand let&#x27;s see what we can come up with...</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="death-to-dynamic-loading"></a>Death to dynamic loading<a class="hash-link" href="#death-to-dynamic-loading" title="Direct link to heading">#</a></h2><p>The main issue with the approach I&#x27;ve been using is the dynamic loading. It makes the app slower and more complicated. So the obvious solution is to have my gulpfile inject scripts and css into the template. To that end it&#x27;s <a href="https://www.npmjs.com/package/wiredep" target="_blank" rel="noopener noreferrer">wiredep</a> &amp; <a href="https://www.npmjs.com/package/gulp-inject" target="_blank" rel="noopener noreferrer">gulp-inject</a> to the rescue!</p><p>gulp-inject (as the name suggests) is used to inject <code>script</code> and <code>link</code> tags into source code. I&#x27;m using <a href="http://bower.io/" target="_blank" rel="noopener noreferrer">Bower</a> as my client side package manager and so I&#x27;m going to use wiredep to determine the vendor scripts I need. It will determine what packages my app is using from looking at my <code>bower.json</code>, and give me a list of file paths in <em>dependency order</em> (which I can then pass on to gulp-inject in combination with my own app script files). This means I don&#x27;t have to think about ordering bower dependencies myself and I no longer need to separately maintain a list of these files within my gulpfile.</p><p>So, let&#x27;s get the launch page (<code>index.html</code>) ready for gulp-inject:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-html codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token doctype punctuation" style="color:rgb(199, 146, 234);font-style:italic">&lt;!</span><span class="token doctype doctype-tag" style="color:rgb(199, 146, 234);font-style:italic">DOCTYPE</span><span class="token doctype" style="color:rgb(199, 146, 234);font-style:italic"> </span><span class="token doctype name" style="color:rgb(199, 146, 234);font-style:italic">html</span><span class="token doctype punctuation" style="color:rgb(199, 146, 234);font-style:italic">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">html</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">head</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">meta</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">http-equiv</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">X-UA-Compatible</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">content</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">IE=edge, chrome=1</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">style</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token style language-css"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token style language-css">        </span><span class="token style language-css selector class" style="color:rgb(199, 146, 234)">.ng-hide</span><span class="token style language-css"> </span><span class="token style language-css punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token style language-css"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token style language-css">            </span><span class="token style language-css property">display</span><span class="token style language-css punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token style language-css"> none </span><span class="token style language-css important">!important</span><span class="token style language-css punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token style language-css"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token style language-css">        </span><span class="token style language-css punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token style language-css"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token style language-css">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">style</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">title</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">ng-bind</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">title</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">Proverb</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">title</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">meta</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">charSet</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">utf-8</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">meta</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">name</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">viewport</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">content</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">&lt;!-- inject:css --&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">&lt;!-- endinject --&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">link</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">icon</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">type</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">image/png</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">href</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">content/images/icon.png</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">head</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">body</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">ng-include</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&#x27;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">app/layout/shell.html</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&#x27;</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">id</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">splash-page</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">ng-show</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">false</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">class</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">dissolve-animation</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">class</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">page-splash</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">class</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">page-splash-message</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    Proverb</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">class</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">progress</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">class</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">progress-bar progress-bar-striped active</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">role</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">progressbar</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag style-attr attr-name" style="color:rgb(255, 203, 107)">style</span><span class="token tag style-attr attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag style-attr attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag style-attr attr-value style language-css property" style="color:rgb(255, 85, 114)">width</span><span class="token tag style-attr attr-value style language-css punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token tag style-attr attr-value style language-css" style="color:rgb(255, 85, 114)"> </span><span class="token tag style-attr attr-value style language-css number" style="color:rgb(247, 140, 108)">20</span><span class="token tag style-attr attr-value style language-css unit" style="color:rgb(255, 85, 114)">%</span><span class="token tag style-attr attr-value style language-css punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token tag style-attr attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">span</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">class</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">sr-only</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">loading...</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">span</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">script</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">src</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token script"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">script</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">script</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token script language-javascript dom variable" style="color:rgb(191, 199, 213)">window</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript property-access">jQuery</span><span class="token script language-javascript"> </span><span class="token script language-javascript operator" style="color:rgb(137, 221, 255)">||</span><span class="token script language-javascript"> </span><span class="token script language-javascript dom variable" style="color:rgb(191, 199, 213)">document</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">write</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript string" style="color:rgb(195, 232, 141)">&#x27;&lt;script src=&quot;/build/jquery.min.js&quot;&gt;\x3C/script&gt;&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">script</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">&lt;!-- inject:js --&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">&lt;!-- endinject --&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">script</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token script language-javascript">        </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript keyword" style="font-style:italic">function</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token script language-javascript" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token script language-javascript">            </span><span class="token script language-javascript comment" style="color:rgb(105, 112, 152);font-style:italic">// Load startup data from the server</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token script language-javascript">            $</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">getJSON</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript string" style="color:rgb(195, 232, 141)">&quot;api/Startup&quot;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token script language-javascript">                </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">done</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript keyword" style="font-style:italic">function</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript parameter">startUpData</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token script language-javascript" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token script language-javascript">                    angularApp</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">start</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token script language-javascript">                        thirdPartyLibs</span><span class="token script language-javascript operator" style="color:rgb(137, 221, 255)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token script language-javascript">                            moment</span><span class="token script language-javascript operator" style="color:rgb(137, 221, 255)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript dom variable" style="color:rgb(191, 199, 213)">window</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript property-access">moment</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token script language-javascript">                            toastr</span><span class="token script language-javascript operator" style="color:rgb(137, 221, 255)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript dom variable" style="color:rgb(191, 199, 213)">window</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript property-access">toastr</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token script language-javascript">                            underscore</span><span class="token script language-javascript operator" style="color:rgb(137, 221, 255)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript dom variable" style="color:rgb(191, 199, 213)">window</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript property-access">_</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token script language-javascript">                        </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token script language-javascript">                        appConfig</span><span class="token script language-javascript operator" style="color:rgb(137, 221, 255)">:</span><span class="token script language-javascript"> startUpData</span></div><div class="token-line" style="color:#bfc7d5"><span class="token script language-javascript">                    </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token script language-javascript">                </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token script language-javascript">        </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token script language-javascript">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">script</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">body</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">html</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The important thing to notice here are the <code>&amp;lt;!-- inject:css --&amp;gt;</code> and <code>&amp;lt;!-- inject:js --&amp;gt;</code> injection placeholders. It&#x27;s here that our script and style tags will be injected into the template. You&#x27;ll notice that jQuery is <em>not</em> being injected - and that&#x27;s because I&#x27;ve opted to use a CDN for jQuery and then only fallback to serving jQuery myself if the CDN fails.</p><p>The other thing to notice here is that our launch page has become oh so much simpler in comparison with the dynamic loading approach. Which is fab.</p><p>Now before we start looking at our gulpfile I want to split out the configuration into a standalone file called gulpfile.config.js:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> tsjsmapjsSuffix </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;.{ts,js.map,js}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> bower </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;bower_components/&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> app </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;app/&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> config </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    base</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;.&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    buildDir</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./build/&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    debug</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;debug&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    release</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;release&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    css</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;css&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    bootFile</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> app </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;index.html&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    bootjQuery</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> bower </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;jquery/dist/jquery.min.js&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// The fonts we want Gulp to process</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    fonts</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">bower </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;fontawesome/fonts/*.*&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    images</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;images/**/*.{gif,jpg,png}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// The scripts we want Gulp to process</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    scripts</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Bootstrapping</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        app </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;app&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> tsjsmapjsSuffix</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        app </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;config.route&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> tsjsmapjsSuffix</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// common Modules</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        app </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;common/common&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> tsjsmapjsSuffix</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        app </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;common/logger&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> tsjsmapjsSuffix</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        app </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;common/spinner&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> tsjsmapjsSuffix</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// common.bootstrap Modules</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        app </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;common/bootstrap/bootstrap.dialog&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> tsjsmapjsSuffix</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// directives</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        app </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;directives/**/*&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> tsjsmapjsSuffix</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// services</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        app </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;services/**/*&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> tsjsmapjsSuffix</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// controllers</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        app </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;about/**/*&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> tsjsmapjsSuffix</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        app </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;admin/**/*&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> tsjsmapjsSuffix</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        app </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;dashboard/**/*&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> tsjsmapjsSuffix</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        app </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;layout/**/*&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> tsjsmapjsSuffix</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        app </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;sages/**/*&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> tsjsmapjsSuffix</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        app </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;sayings/**/*&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> tsjsmapjsSuffix</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// The styles we want Gulp to process</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    styles</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;content/styles.css&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    wiredepOptions</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        exclude</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">jquery</span><span class="token regex regex-delimiter">/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ignorePath</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;..&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">debugFolder</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">buildDir</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">debug</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">releaseFolder</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">buildDir</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">release</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">templateFiles</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    app </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;**/*.html&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;!&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">bootFile</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Exclude the launch page</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Now to the meat of the matter - let me present the gulpfile:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/// &lt;vs AfterBuild=&#x27;default&#x27; /&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> gulp </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gulp&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Include Our Plugins</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> concat </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gulp-concat&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> ignore </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gulp-ignore&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> minifyCss </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gulp-minify-css&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> uglify </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gulp-uglify&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> rev </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gulp-rev&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> del </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;del&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> path </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;path&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> templateCache </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gulp-angular-templatecache&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> eventStream </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;event-stream&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> order </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gulp-order&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> gulpUtil </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gulp-util&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> wiredep </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;wiredep&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> inject </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gulp-inject&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Get our config</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> config </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./gulpfile.config.js&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * Get the scripts or styles the app requires by combining bower dependencies and app dependencies</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * </span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @param {string} jsOrCss Should be &quot;js&quot; or &quot;css&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getScriptsOrStyles</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">jsOrCss</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> bowerScriptsAbsolute </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">wiredep</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">wiredepOptions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">jsOrCss</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> bowerScriptsRelative </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> bowerScriptsAbsolute</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">makePathRelativeToCwd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">file</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">relative</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> file</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> appScripts </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> bowerScriptsRelative</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">concat</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">jsOrCss </span><span class="token operator" style="color:rgb(137, 221, 255)">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;js&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">scripts</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">styles</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> appScripts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * Get the scripts the app requires</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getScripts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getScriptsOrStyles</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;js&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * Get the styles the app requires</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getStyles</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getScriptsOrStyles</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;css&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * Get the scripts and the templates combined streams</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * </span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @param {boolean} isDebug</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getScriptsAndTemplates</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">isDebug</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> options </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> isDebug </span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> base</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">base</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token keyword nil" style="font-style:italic">undefined</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> appScripts </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> gulp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">src</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">getScripts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//Get the view templates for $templateCache</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> templates </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> gulp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">src</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">templateFiles</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">pipe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">templateCache</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> module</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;app&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> root</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;app/&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> combined </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> eventStream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">merge</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">appScripts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> templates</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> combined</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">gulp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">task</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;clean&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">cb</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    gulpUtil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Delete the build folder&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">del</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">buildDir</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> cb</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">gulp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">task</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;boot-dependencies&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;clean&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    gulpUtil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Get dependencies needed for boot (jQuery and images)&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> jQuery </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> gulp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">src</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">bootjQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> images </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> gulp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">src</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">images</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> base</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">base</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> combined </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> eventStream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">merge</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">jQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> images</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">pipe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">gulp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">dest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">buildDir</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> combined</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">gulp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">task</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;inject-debug&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;styles-debug&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;scripts-debug&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    gulpUtil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Inject debug links and script tags into &quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">bootFile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> scriptsAndStyles </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">concat</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">getScripts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getStyles</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> gulp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">src</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">bootFile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">pipe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">inject</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                gulp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">src</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">debugFolder</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;**/*.{js,css}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;!build\\debug\\bower_components\\spin.js&quot;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Exclude weird spin js path</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> read</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">pipe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">order</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">scriptsAndStyles</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">pipe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">gulp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">dest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">buildDir</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">gulp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">task</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;inject-release&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;styles-release&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;scripts-release&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    gulpUtil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Inject release links and script tags into &quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">bootFile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> gulp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">src</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">bootFile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">pipe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">inject</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">gulp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">src</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">releaseFolder</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;**/*.{js,css}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> read</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">pipe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">gulp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">dest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">buildDir</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">gulp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">task</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;scripts-debug&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;clean&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    gulpUtil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Copy across all JavaScript files to build/debug&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getScriptsAndTemplates</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">pipe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">gulp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">dest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">debugFolder</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">gulp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">task</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;scripts-release&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;clean&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    gulpUtil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Concatenate &amp; Minify JS for release into a single file&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getScriptsAndTemplates</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">pipe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ignore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">exclude</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;**/*.{ts,js.map}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Exclude ts and js.map files - not needed in release mode</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">pipe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">concat</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;app.js&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">                   </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain"> </span><span class="token maybe-class-name">Make</span><span class="token plain"> a single file                                                         </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">pipe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">uglify</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">                           </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain"> </span><span class="token maybe-class-name">Make</span><span class="token plain"> the file titchy tiny small</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">pipe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rev</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">                              </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain"> </span><span class="token maybe-class-name">Suffix</span><span class="token plain"> a version number to it</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">pipe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">gulp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">dest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">releaseFolder</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">   </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain"> </span><span class="token maybe-class-name">Write</span><span class="token plain"> single versioned file to build</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">release folder</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">gulp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">task</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;styles-debug&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;clean&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    gulpUtil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Copy across all CSS files to build/debug&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> gulp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">src</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">getStyles</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> base</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">base</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">pipe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">gulp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">dest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">debugFolder</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">gulp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">task</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;styles-release&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;clean&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    gulpUtil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Copy across all files in config.styles to build/debug&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> gulp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">src</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">getStyles</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">pipe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">concat</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;app.css&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">                                   </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain"> </span><span class="token maybe-class-name">Make</span><span class="token plain"> a single file</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">pipe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">minifyCss</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">                                         </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain"> </span><span class="token maybe-class-name">Make</span><span class="token plain"> the file titchy tiny small</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">pipe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rev</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">                                               </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain"> </span><span class="token maybe-class-name">Suffix</span><span class="token plain"> a version number to it</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">pipe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">gulp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">dest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">releaseFolder</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">css</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain"> </span><span class="token maybe-class-name">Write</span><span class="token plain"> single versioned file to build</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">release folder</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">gulp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">task</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;fonts-debug&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;clean&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    gulpUtil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Copy across all fonts in config.fonts to debug location&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> gulp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">src</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">fonts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> base</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">base</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">pipe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">gulp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">dest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">debugFolder</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">gulp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">task</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;fonts-release&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;clean&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    gulpUtil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Copy across all fonts in config.fonts to release location&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> gulp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">src</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">fonts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">pipe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">gulp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">dest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">releaseFolder</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/fonts&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">gulp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">task</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;build-debug&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;boot-dependencies&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;inject-debug&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;fonts-debug&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">gulp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">task</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;build-release&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;boot-dependencies&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;inject-release&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;fonts-release&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain"> </span><span class="token maybe-class-name">Use</span><span class="token plain"> the web</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">config</span><span class="token plain"> to determine whether the </span><span class="token keyword module" style="font-style:italic">default</span><span class="token plain"> task should create a debug or a release build</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain"> </span><span class="token maybe-class-name">If</span><span class="token plain"> the web</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">config</span><span class="token plain"> contains </span><span class="token keyword" style="font-style:italic">this</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;compilation debug=&quot;true&quot;&#x27;</span><span class="token plain"> then we </span><span class="token keyword control-flow" style="font-style:italic">do</span><span class="token plain"> a </span><span class="token keyword module" style="font-style:italic">default</span><span class="token plain"> build</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> otherwise</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain"> we </span><span class="token keyword control-flow" style="font-style:italic">do</span><span class="token plain"> a release build</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">  </span><span class="token property-access maybe-class-name">It</span><span class="token plain">&#x27;s a little hacky but generally works</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> fs </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;fs&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> data </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> fs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">readFileSync</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">__dirname </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/web.config&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;UTF-8&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> inDebug </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">match</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">&lt;compilation debug=&quot;true&quot;</span><span class="token regex regex-delimiter">/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">gulp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">task</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;default&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">inDebug </span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;build-debug&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;build-release&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>That&#x27;s a big old lump of code. So let&#x27;s go through this a task by task...</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="clean"></a>clean<a class="hash-link" href="#clean" title="Direct link to heading">#</a></h3><p>Deletes the <code>build</code> folder so we have a clean slate to build into.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="boot-dependencies"></a>boot-dependencies<a class="hash-link" href="#boot-dependencies" title="Direct link to heading">#</a></h3><p>Copy across all files that are needed to allow the page to &quot;boot&quot; / startup. At present this is only jQuery and images.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="inject-debug-and-inject-release"></a>inject-debug and inject-release<a class="hash-link" href="#inject-debug-and-inject-release" title="Direct link to heading">#</a></h3><p>This is the magic. This picks up the launch page (<code>index.html</code>), takes the JavaScript and CSS and injects the corresponding <code>script</code> and <code>link</code> tags into the page and writing it to the <code>build</code> folder. Either the original source code or the bundled / minified equivalent will be used depending on whether it&#x27;s debug or release.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="scripts-debug-and-scripts-release"></a>scripts-debug and scripts-release<a class="hash-link" href="#scripts-debug-and-scripts-release" title="Direct link to heading">#</a></h3><p>Here we collect up the following:</p><ul><li>the Bower specified JavaScript files</li><li>the TypeScript + associated JavaScript files</li><li>and we use our template files to construct a <code>templates.js</code> file to prime the Angular template cache</li></ul><p>If it&#x27;s the scripts-debug task we copy all these files into the <code>build/debug</code> folder. If it&#x27;s the scripts-release task we also bundle, minify and strip the TypeScript out too and copy into the <code>build/release</code> folder.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="styles-debug-and-styles-release"></a>styles-debug and styles-release<a class="hash-link" href="#styles-debug-and-styles-release" title="Direct link to heading">#</a></h3><p>Here we collect up the following:</p><ul><li>the Bower specified CSS files</li><li>our own app CSS</li></ul><p>If it&#x27;s the styles-debug task we copy all these files into the <code>build/debug</code> folder. If it&#x27;s the styles-release task we also bundle and minify and copy into the <code>build/release</code> folder.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="fonts-debug-and-fonts-release"></a>fonts-debug and fonts-release<a class="hash-link" href="#fonts-debug-and-fonts-release" title="Direct link to heading">#</a></h3><p>Whether it&#x27;s the debug or the release build we copy across the font-awesome assets and place them in a location which works for the associated CSS (as the CSS will depend upon font-awesome).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="build-debug-build-release-and-default"></a>build-debug, build-release and default<a class="hash-link" href="#build-debug-build-release-and-default" title="Direct link to heading">#</a></h3><p>build-debug and build-release (as their name suggests) either perform a build for release or a build for debug. If you remember, the web optimization library in ASP.Net serves up the raw code (&quot;debug&quot; code) if the <code>compilation debug</code> flag in the <code>web.config</code> is set to <code>true</code>. If it is set to <code>false</code> then we get the bundled and minified code (&quot;release&quot; code) instead. Our default task tries its best to emulate this behaviour by doing a very blunt regex against the <code>web.config</code>. Simply, if it can match <code>&amp;lt;compilation debug=&quot;true&quot;</code> then it runs the debug build. Otherwise, the release build. It could be more elegant but there&#x27;s a dearth of XML readers on npm that support synchronous parsing (which you kinda need for this scenario).</p><p>What I intend to do soon is switch from using the web.config to drive the gulp build to using the approach outlined <a href="http://www.codecadwallader.com/2015/03/15/integrating-gulp-into-your-tfs-builds-and-web-deploy/" target="_blank" rel="noopener noreferrer">here</a>. Namely plugging the build directly into Visual Studio&#x27;s build process and using the type of build there.</p><p>Hopefully what I&#x27;ve written here makes it fairly clear how to use Gulp to directly inject scripts and styles directly into your HTML. If you want to look directly at the source then check out the Proverb.Web folder in <a href="https://github.com/johnnyreilly/proverb-offline" target="_blank" rel="noopener noreferrer">this repo</a>.</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/asp-net">asp.net</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/gulp-inject">gulp-inject</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/web-optimization">Web Optimization</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/gulpjs">gulpjs</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/wiredep">wiredep</a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_3-lP"><a href="/blog.johnnyreilly.com/2015/02/11/the-convent-with-continuous-delivery">The Convent with Continuous Delivery</a></h2><div class="margin-vert--md"><time datetime="2015-02-11T00:00:00.000Z" class="blogPostDate_Ta7i">February 11, 2015  Â· 4 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><p>I&#x27;ve done it. I&#x27;ve open sourced the <a href="http://www.poorclaresarundel.org/" target="_blank" rel="noopener noreferrer">website that I maintain for my aunt what is a nun</a>. Because I think we can all agree that nuns need open source and continuous integration about as much as anyone else.</p><p> For a long time now I&#x27;ve been maintaining a website for one of my (many) aunts that is a Poor Clare. (<a href="https://en.wikipedia.org/wiki/Subtyping" target="_blank" rel="noopener noreferrer">That&#x27;s a subtype of &quot;nun&quot; you OO enthusiasts.</a>) It&#x27;s not a terribly exciting site - it&#x27;s mostly static content. It&#x27;s built with a combination of AngularJS / TypeScript / Bootstrap and ASP.Net MVC. It&#x27;s hosted on <a href="http://azure.microsoft.com/en-us/documentation/services/websites/" target="_blank" rel="noopener noreferrer">Azure Websites</a>. In fact I have written about it (slightly more cagily) before <a href="/blog.johnnyreilly.com/2014/06/migrating-from-angularjs-to-angularts.html">here</a>.</p><p>I&#x27;ll say up front: presentation-wise the site is not a work of art. However the nuns seem pretty happy with it. (Or perhaps secretly they&#x27;re forgiving me the shonkiness and sparing my feelings - who can say?) If I put my mind to it the site could look much more lovely. But there&#x27;s only so much time I can spare - and that&#x27;s actually one of the reasons I&#x27;ve set up Continuous Delivery.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="why-on-earth-did-you-bother"></a>Why on earth did you bother?<a class="hash-link" href="#why-on-earth-did-you-bother" title="Direct link to heading">#</a></h2><p>Well, you&#x27;d be surprised how often tweaks can be requested. Sometimes it appears to be forgotten for months at a time, and then all of a sudden my inbox is daily filled with a list of minor alterations. You know, slight text changes and the like.</p><p>So what I was generally doing was getting home of an evening, waiting until the children were in bed, chomping down some food and then firing up Visual Studio to make the changes and hit &quot;Publish&quot;. Yes that&#x27;s right; I was essentially using Visual Studio to edit text files and push a website out to Azure. The very definition of using a sledgehammer to crack a nut I think we can all agree.</p><p>It occurred to me that if I had Continuous Delivery set up then I could make these tweaks and not have to worry about the site being published. Which would be nice. I wouldn&#x27;t need Visual Studio anymore - any text editor would do. Also nice. Finally, if the source control was accessible online then I could probably get away with doing most tweaks on my mobile phone whilst I was travelling home. Timesaver!</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="how-did-you-go-about-it"></a>How did you go about it?<a class="hash-link" href="#how-did-you-go-about-it" title="Direct link to heading">#</a></h2><p>Since <a href="http://www.visualstudioonline.com" target="_blank" rel="noopener noreferrer">Visual Studio Online (then &quot;Team Foundation Service&quot;)</a> was released I have been using it to host the source code. So the obvious solution was to use the tools offered there to do the deployment. However, this wasn&#x27;t the smooth experience you might have hoped for. I had quite a frustrating afternoon trying things out before deciding it was becoming more trouble than it was worth. VSO appeared to make it supremely hard to customise builds.</p><p>Just recently though I have been having the most wonderful experience with <a href="http://www.appveyor.com/" target="_blank" rel="noopener noreferrer">AppVeyor</a>. AppVeyor market themselves as <em>&quot;#1 Continuous Delivery service for Windows&quot;</em> - I think they&#x27;re right. Their build process is entirely flexible and customisable. It is, in short, a joy to use. (The support is fantastic too - very helpful indeed. Go <a href="https://github.com/FeodorFitsner" target="_blank" rel="noopener noreferrer">Feodor</a>!)</p><p>If you look just below the header you&#x27;ll read a very important sentence: <em>&quot;Free for open-source projects&quot;</em>. You hear that? By the time I&#x27;d finished reading that sentence I&#x27;d decided that the Poor Clares website was about to become an open source project.</p><p>And now it is.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="where-is-it"></a>Where is it?<a class="hash-link" href="#where-is-it" title="Direct link to heading">#</a></h2><p>The source on <a href="https://github.com/johnnyreilly/poorclaresarundel" target="_blank" rel="noopener noreferrer">GitHub</a>. The builds and deployment are taken care of by <a href="https://ci.appveyor.com/project/JohnReilly/poorclaresarundel" target="_blank" rel="noopener noreferrer">AppVeyor</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="will-you-take-pull-requests"></a>Will you take pull requests?<a class="hash-link" href="#will-you-take-pull-requests" title="Direct link to heading">#</a></h2><p>If they&#x27;re serious, then yes, certainly! My long term plan is to try and get the nuns set up as collaborators in GitHub. That way they can make their own minor tweaks without me getting involved.</p><p>On another front, I do wonder if open-sourcing Poor Clares, Arundel might have other hidden benefits. There&#x27;s a number of things I&#x27;m not too keen on in the code. Up until now I think my attitude was possibly &quot;it works so that&#x27;s good enough&quot;. It was only me aware of the shortcomings. Now it&#x27;s public I&#x27;ll probably have more of an incentive to tidy up the rough edges. That&#x27;s the theory anyway - Embarrassment Driven Development anyone? :-)</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/poor-clares">Poor Clares</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/continuous-delivery">Continuous Delivery</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/arundel">Arundel</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/app-veyor">AppVeyor</a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_3-lP"><a href="/blog.johnnyreilly.com/2015/01/20/typescript-using-functions-with-union-types">TypeScript: In Praise of Union Types</a></h2><div class="margin-vert--md"><time datetime="2015-01-20T00:00:00.000Z" class="blogPostDate_Ta7i">January 20, 2015  Â· 7 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="-how-to-express-functions-in-uts"></a>(&amp; How to Express Functions in UTs)<a class="hash-link" href="#-how-to-express-functions-in-uts" title="Direct link to heading">#</a></h2><p> Have you heard the good news my friend? I refer, of course, to the shipping of TypeScript 1.4 and my <em>favourite</em> language feature since generics.... Union Types.</p><p>In the <a href="http://blogs.msdn.com/b/typescript/archive/2015/01/16/announcing-typescript-1-4.aspx" target="_blank" rel="noopener noreferrer">1.4 announcement</a> Jonathan Turner described Union Types thusly:</p><blockquote><p>JavaScript functions may take a number of possible argument types. Up to now, weâ€™ve supported this using function overloads. Starting with TypeScript 1.4, weâ€™ve generalized this capability and now allow you to specify that that a value is one of a number of different types using a union type:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ts codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">f</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">x</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">number</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">typeof</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;number&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// return sum of numbers</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Once you have a value of a union type, you can use a typeof and instanceof checks to use the value in a type-safe way. You&#x27;ll notice we use this in the above example and can treat x as a number type inside of the if-block.</p><p>Union types are a new kind of type and work any place you specify a type.</p></blockquote><p>Lovely right? But what&#x27;s missing? Well, to my mind, the most helpful aspect of Union Types. Definition file creation.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="a-little-history"></a>A little history<a class="hash-link" href="#a-little-history" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="thats-right---the-days-before-union-types-are-now-history--"></a>That&#x27;s right - the days before Union Types are now &quot;history&quot; :-)<a class="hash-link" href="#thats-right---the-days-before-union-types-are-now-history--" title="Direct link to heading">#</a></h3><p>When creating definition files (<code>*.d.ts</code>) in the past there was a problem with TypeScript. A limitation. JavaScript often relies on &quot;option bags&quot; to pass configuration into a method. An &quot;option bag&quot; is essentially a JavaScript object literal which contains properties which are used to perform configuration. A good example of this is the <code>route</code> parameter passed into Angular&#x27;s ngRoute <code>&lt;a href=&quot;https://docs.angularjs.org/api/ngRoute/provider/$routeProvider#when&quot;&gt;when&lt;/a&gt;</code> method.</p><p>I&#x27;d like to draw your attention to 2 of the properties that can be passed in (quoted from the documentation):</p><blockquote><ul><li><p>controller â€“ <code>{(string|function()=}</code> â€“ Controller fn that should be associated with newly created scope or the name of a registered controller if passed as a string.</p></li><li><p>template â€“ <code>{string=|function()=}</code> â€“ html template as a string or a function that returns an html template as a string which should be used by ngView or ngInclude directives. This property takes precedence over templateUrl.</p><p>  If template is a function, it will be called with the following parameters:</p><p>  <code>{Array.&amp;lt;Object&amp;gt;}</code> - route parameters extracted from the current $location.path() by applying the current route</p></li></ul></blockquote><p>Both of these properties can be of more than 1 type.</p><ul><li><code>controller</code> can be a <code>string</code><em>or</em> a <code>function</code>.</li><li><code>template</code> can be a <code>string</code><em>or</em> a <code>function</code> that returns a <code>string</code> and has <code>$routeParams</code> as a parameter.</li></ul><p>There&#x27;s the rub. Whilst it was possible to overload functions in TypeScript pre 1.4, it was <u>not</u></p><p> possible to overload interface members. This meant the only way to model these sorts of properties was by seeking out a best common type which would fit all scenarios. This invariably meant using the <code>any</code> type. Whilst that worked it didn&#x27;t lend any consuming code a great deal of type safety. Let&#x27;s look at a truncated version of <code>&lt;a href=&quot;https://github.com/borisyankov/DefinitelyTyped/blob/c71628e0765eb8e240d8eabd2225f64ea2e2fdb8/angularjs/angular-route.d.ts&quot;&gt;angular-route.d.ts&lt;/a&gt;</code> for these properties prior to union types:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ts codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">declare</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">module</span><span class="token plain"> ng</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">route</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ... </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">IRoute</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     * {(string|function()=}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     * Controller fn that should be associated with newly created scope or </span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     * the name of a registered controller if passed as a string.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    controller</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">any</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     * {string=|function()=}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     * Html template as a string or a function that returns an html template </span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     * as a string which should be used by ngView or ngInclude directives. This </span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     * property takes precedence over templateUrl.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     * </span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     * If template is a function, it will be called with the following parameters:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     * </span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     * {Array.&lt;Object&gt;} - route parameters extracted from the current </span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     * $location.path() by applying the current route</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    template</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">any</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ... </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ... </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>It&#x27;s <code>any</code> city... Kind of sticks in the craw doesn&#x27;t it?</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="a-new-dawn"></a>A new dawn<a class="hash-link" href="#a-new-dawn" title="Direct link to heading">#</a></h2><p>TypeScript 1.4 has shipped and Union Types are with us. We can do better than <code>any</code>. So what does <code>&lt;a href=&quot;https://github.com/borisyankov/DefinitelyTyped/blob/30ce45e0e706322f34608ab6fa5de141bba59c90/angularjs/angular-route.d.ts&quot;&gt;angular-route.d.ts&lt;/a&gt;</code> look like now we have Union Types?</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ts codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">declare</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">module</span><span class="token plain"> ng</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">route</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ... </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">IRoute</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     * {(string|function()=}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     * Controller fn that should be associated with newly created scope or </span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     * the name of a registered controller if passed as a string.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    controller</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token known-class-name class-name" style="color:rgb(255, 203, 107)">Function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     * {string=|function()=}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     * Html template as a string or a function that returns an html template </span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     * as a string which should be used by ngView or ngInclude directives. This </span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     * property takes precedence over templateUrl.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     * </span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     * If template is a function, it will be called with the following parameters:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     * </span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     * {Array.&lt;Object&gt;} - route parameters extracted from the current </span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     * $location.path() by applying the current route</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    template</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">$routeParams</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> ng</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">route</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">IRouteParamsService</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ... </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ... </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>With these changes in place we are now accurately modelling the <code>route</code> option bags in TypeScript. Hoorah!!!</p><p>Let&#x27;s dig in a little. If you look at the <code>controller</code> definition it&#x27;s pretty straightforward. <code>string|Function</code> - clearly the <code>controller</code> can be a <code>string</code><em>or</em> a <code>Function</code>. Simple.</p><p>Now let&#x27;s look at the <code>template</code> definition by itself:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ts codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">template</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">$routeParams</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> ng</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">route</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">IRouteParamsService</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>As with the <code>controller</code> the <code>template</code> can be a string - that is pretty clear. But what&#x27;s that hovering on the other side of the &quot;|&quot;? What could <code>{ ($routeParams?: ng.route.IRouteParamsService) : string; }</code> be exactly?</p><p>Well, in a word, it&#x27;s a <code>Function</code>. The <code>controller</code> would allow any kind of function at all. However the <code>template</code> definition is deliberately more restrictive. This defines a function which must return a <code>string</code> and which receives an optional parameter of <code>$routeParams</code> of type <code>ng.route.IRouteParamsService</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="state-of-the-union"></a>State of the Union<a class="hash-link" href="#state-of-the-union" title="Direct link to heading">#</a></h2><p>Hopefully you can now see just how useful Union Types are and how you can express specific sorts of function definitions as part of a Union Type.</p><p>The thing that prompted me first to write this post was seeing that there don&#x27;t appear to be any examples out there of how to express functions inside Union Types. I only landed on the syntax myself after a little experimentation in Visual Studio after I&#x27;d installed TS 1.4. I&#x27;ve started work on bringing Union Types to the typings inside <a href="https://github.com/borisyankov/DefinitelyTyped" target="_blank" rel="noopener noreferrer">DefinitelyTyped</a> and so you&#x27;ll start to see them appearing more and more. But since it&#x27;s rather &quot;hidden knowledge&quot; at present I wanted to do my bit to make it a little better known.</p><p>As <a href="https://twitter.com/Rickenhacker" target="_blank" rel="noopener noreferrer">Daniel</a> helpfully points out in the comments there is an alternate syntax - lambda style. So instead of this:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ts codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">template</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">$routeParams</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> ng</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">route</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">IRouteParamsService</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>You could write this:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ts codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">template</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">$routeParams</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> ng</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">route</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">IRouteParamsService</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Just remember to place parentheses around the lambda to clearly delineate it.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="bonfire-of-the-overloads"></a>Bonfire of the Overloads<a class="hash-link" href="#bonfire-of-the-overloads" title="Direct link to heading">#</a></h2><p>Before I sign off I should mention the ability Union Types give you to define a much terser definition file. Basically the &quot;|&quot; operator makes for a bonfire of the overloads. Where you previously may have had 6 overloads for the same method (each with identical JSDoc) you now only need 1. Which is beautiful (and DRY).</p><p>It&#x27;s surprising just what a difference it makes. This is <code>&lt;a href=&quot;https://github.com/borisyankov/DefinitelyTyped/blob/9bd7fe69d98337db56144c3da131d413f5b7e895/jquery/jquery.d.ts&quot;&gt;jQuery.d.ts&lt;/a&gt;</code> last week (pre TypeScript 1.4). This is <code>&lt;a href=&quot;https://github.com/borisyankov/DefinitelyTyped/blob/9f64372a065541fe2b8f6c5c5cd9b55a1d631f19/jquery/jquery.d.ts&quot;&gt;jQuery.d.ts&lt;/a&gt;</code> now - with Union Types aplenty. Last week it was ~4000 lines of code. This week it&#x27;s ~3200 lines of code. With the same functionality. Union Types are <em>FANTASTIC</em>!</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/type-script">TypeScript</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/option-bags">Option bags</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/union-types">Union Types</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/function-syntax">Function syntax</a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_3-lP"><a href="/blog.johnnyreilly.com/2015/01/07/deploying-aspnet-mvc-to-github-pages-with-appveyor-part-2">Deploying from ASP.Net MVC to GitHub Pages using AppVeyor part 2</a></h2><div class="margin-vert--md"><time datetime="2015-01-07T00:00:00.000Z" class="blogPostDate_Ta7i">January 7, 2015  Â· 5 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><p>&quot;Automation, automation, automation.&quot; Those were and are Tony Blair&#x27;s priorities for keeping open source projects well maintained.</p><p> OK, that&#x27;s not quite true... But what is certainly true is that maintaining an open source project takes time. And there&#x27;s only so much free time that anyone has. For that reason, wherever you can it makes sense to <em>AUTOMATE</em>!</p><p><a href="/blog.johnnyreilly.com/2014/12/deploying-aspnet-mvc-to-github-pages-with-appveyor-part-1.html">Last time</a> we looked at how you can take an essentially static ASP.Net MVC site (in this case my jVUNDemo documentation site) and generate an entirely static version using Wget. This static site has been pushed to <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">GitHub Pages</a> and is serving as the documentation for <a href="http://johnnyreilly.github.io/jQuery.Validation.Unobtrusive.Native/" target="_blank" rel="noopener noreferrer">jQuery Validation Unobtrusive Native</a> (and for bonus points is costing me no money at all).</p><p>So what next? Well, automation clearly! If I make a change to jQuery Validation Unobtrusive Native then AppVeyor already bounds in and performs a <a href="https://ci.appveyor.com/project/JohnReilly/jquery-validation-unobtrusive-native" target="_blank" rel="noopener noreferrer">continuous integration build</a> for me. It picks up the <a href="https://github.com/johnnyreilly/jQuery.Validation.Unobtrusive.Native" target="_blank" rel="noopener noreferrer">latest source</a> from GitHub, pulls in my dependencies, performs a build and runs my tests. Lovely.</p><p>So the obvious thing to do is to take this process and plug in the generation of my static site and the publication thereof to GitHub pages. The minute a change is made to my project the documentation should be updated without me having to break sweat. That&#x27;s the goal.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="github-personal-access-token"></a>GitHub Personal Access Token<a class="hash-link" href="#github-personal-access-token" title="Direct link to heading">#</a></h2><p>In order to complete our chosen mission we&#x27;re going to need a GitHub Personal Access Token. We&#x27;re going to use it when we clone, update and push our GitHub Pages branch. To get one we biff over to Settings / Applications in GitHub and click the &quot;Generate New Token&quot; button.</p><p><a href="http://1.bp.blogspot.com/-TN1tTkL_eoQ/VKwQfPn8_JI/AAAAAAAAAyI/EeF6XLcP8dg/s1600/GitHubApplicationSettings.png" target="_blank" rel="noopener noreferrer"><img src="http://1.bp.blogspot.com/-TN1tTkL_eoQ/VKwQfPn8_JI/AAAAAAAAAyI/EeF6XLcP8dg/s640/GitHubApplicationSettings.png" alt="null"></a>The token I&#x27;m using for my project has the following scopes selected:</p><p><a href="http://2.bp.blogspot.com/-2hsSnmHy_DY/VKwQo7MM0BI/AAAAAAAAAyQ/c5ZAT_mZi5w/s1600/GitHub%2BPersonal%2BAccess%2BToken.png" target="_blank" rel="noopener noreferrer"><img src="http://2.bp.blogspot.com/-2hsSnmHy_DY/VKwQo7MM0BI/AAAAAAAAAyQ/c5ZAT_mZi5w/s640/GitHub%2BPersonal%2BAccess%2BToken.png" alt="null"></a>## <code>appveyor.yml</code></p><p>With our token in hand we turn our attention to AppVeyor build configuration. This is possible using a file called <a href="http://www.appveyor.com/docs/build-configuration" target="_blank" rel="noopener noreferrer"><code>appveyor.yml</code></a> stored in the root of your repo. You can also use the AppVeyor web UI to do this. However, for the purposes of ease of demonstration I&#x27;m using the file approach. The <a href="https://github.com/johnnyreilly/jQuery.Validation.Unobtrusive.Native/blob/master/appveyor.yml" target="_blank" rel="noopener noreferrer">jQuery Validation Unobtrusive Native <code>appveyor.yml</code></a> looks like this:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-yml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#---------------------------------#</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#      general configuration      #</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#---------------------------------#</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># version format</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">version</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> 1.0.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">build</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#---------------------------------#</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#    environment configuration    #</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#---------------------------------#</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># environment variables</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">environment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">GithubEmail</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> johnny_reilly@hotmail.com</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">GithubUsername</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> johnnyreilly</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">GithubPersonalAccessToken</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">secure</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> T4M/N+e/baksVoeWoYKPWIpfahOsiSFw/+Zc81VuThZmWEqmrRtgEHUyin0vCWhl    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">branches</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">only</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> master</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">install</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">ps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> choco install wget</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">build</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">verbosity</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> minimal</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">after_test</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">ps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ./makeStatic.ps1 $env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">APPVEYOR_BUILD_FOLDER</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">ps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ./pushStatic.ps1 $env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">APPVEYOR_BUILD_FOLDER $env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">GithubEmail $env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">GithubUsername $env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">GithubPersonalAccessToken</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>There&#x27;s a number of things you should notice from the yml file:</p><ul><li>We create 3 environment variables: GithubEmail, GithubUsername and GithubPersonalAccessToken (more on this in a moment).</li><li>We only build the master branch.</li><li>We use <a href="https://chocolatey.org/packages/Wget" target="_blank" rel="noopener noreferrer">Chocolatey</a> to install Wget which is used by the <code>makeStatic.ps1</code> Powershell script.</li><li>After the tests have completed we run 2 Powershell scripts. First <code>&lt;a href=&quot;https://github.com/johnnyreilly/jQuery.Validation.Unobtrusive.Native/blob/master/makeStatic.ps1&quot;&gt;makeStatic.ps1&lt;/a&gt;</code> which builds the static version of our site. This is the exact same script we discussed in the previous post - we&#x27;re just passing it the build folder this time (one of AppVeyor&#x27;s environment variables). Second, we run <code>&lt;a href=&quot;https://github.com/johnnyreilly/jQuery.Validation.Unobtrusive.Native/blob/master/pushStatic.ps1&quot;&gt;pushStatic.ps1&lt;/a&gt;</code> which publishes the static site to GitHub Pages.</li></ul><p>We pass 4 arguments to <code>pushStatic.ps1</code>: the build folder, my email address, my username and my personal access token. For the sake of security the GithubPersonalAccessToken has been encrypted as indicated by the <code>secure</code> keyword. This is a capability available in AppVeyor <a href="https://ci.appveyor.com/tools/encrypt" target="_blank" rel="noopener noreferrer">here</a>.</p><p><a href="http://1.bp.blogspot.com/-rQcNQPu2ass/VKwRC0QbQTI/AAAAAAAAAyY/8a8Qf5DGapA/s1600/AppVeyor%2Bencrypt.png" target="_blank" rel="noopener noreferrer"><img src="http://1.bp.blogspot.com/-rQcNQPu2ass/VKwRC0QbQTI/AAAAAAAAAyY/8a8Qf5DGapA/s640/AppVeyor%2Bencrypt.png" alt="null"></a>This allows me to mask my personal access token rather than have it available as free text for anyone to grab.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="pushstaticps1"></a><code>pushStatic.ps1</code><a class="hash-link" href="#pushstaticps1" title="Direct link to heading">#</a></h2><p>Finally we can turn our attention to how our Powershell script <code>pushStatic.ps1</code> goes about pushing our changes up to GitHub Pages:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ps codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">param([string]$buildFolder, [string]$email, [string]$username, [string]$personalAccessToken)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Write-Host &quot;- Set config settings....&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">git config --global user.email $email</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">git config --global user.name $username</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">git config --global push.default matching</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Write-Host &quot;- Clone gh-pages branch....&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cd &quot;$($buildFolder)\..\&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">mkdir gh-pages</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">git clone --quiet --branch=gh-pages https://$($username):$($personalAccessToken)@github.com/johnnyreilly/jQuery.Validation.Unobtrusive.Native.git .\gh-pages\</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cd gh-pages</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">git status</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Write-Host &quot;- Clean gh-pages folder....&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Get-ChildItem -Attributes !r | Remove-Item -Recurse -Force</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Write-Host &quot;- Copy contents of static-site folder into gh-pages folder....&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">copy-item -path ..\static-site\* -Destination $pwd.Path -Recurse</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">git status</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$thereAreChanges = git status | select-string -pattern &quot;Changes not staged for commit:&quot;,&quot;Untracked files:&quot; -simplematch</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if ($thereAreChanges -ne $null) { </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Write-host &quot;- Committing changes to documentation...&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    git add --all</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    git status</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    git commit -m &quot;skip ci - static site regeneration&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    git status</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Write-Host &quot;- Push it....&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    git push --quiet</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Write-Host &quot;- Pushed it good!&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">} </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">else { </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    write-host &quot;- No changes to documentation to commit&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>So what&#x27;s happening here? Let&#x27;s break it down:</p><ul><li>Git is configured with the passed in username and email address.</li><li>A folder is created that sits alongside the build folder called &quot;gh-pages&quot;.</li><li>We clone the &quot;gh-pages&quot; branch of jQuery Validation Unobtrusive Native into our &quot;gh-pages&quot; directory. You&#x27;ll notice that we are using our GitHub personal access token in the clone URL itself.</li><li>We delete the contents of the &quot;gh-pages&quot; directory leaving it empty.</li><li>We copy across the contents of the &quot;static-site&quot; folder (created by <code>makeStatic.ps1</code>) into the &quot;gh-pages&quot;.</li><li>We use <code>git status</code> to check if there are any changes. (This method is completely effective but a little crude to my mind - there&#x27;s probably better approaches to this.... shout me in the comments if you have a suggestion.)</li><li>If we have no changes then we do nothing.</li><li>If we have changes then we stage them, commit them and push them to GitHub Pages. Then we sign off with an allusion to <a href="https://en.wikipedia.org/wiki/Push_It_(Salt-n-Pepa_song)" target="_blank" rel="noopener noreferrer">80&#x27;s East Coast hip-hop</a>... &#x27;Cos that&#x27;s how we roll.</li></ul><p>With this in place, any changes to the docs will be automatically published out to our &quot;gh-pages&quot; branch. Our documentation will always be up to date thanks to the goodness of AppVeyor&#x27;s Continuous Integration service.</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/git-hub-personal-access-token">GitHub Personal Access Token</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/continuous-integration">Continuous Integration</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/powershell">powershell</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/github-pages">github pages</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/app-veyor">AppVeyor</a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_3-lP"><a href="/blog.johnnyreilly.com/2014/12/29/deploying-aspnet-mvc-to-github-pages-with-appveyor-part-1">Deploying from ASP.Net MVC to GitHub Pages using AppVeyor part 1</a></h2><div class="margin-vert--md"><time datetime="2014-12-29T00:00:00.000Z" class="blogPostDate_Ta7i">December 29, 2014  Â· 6 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><p>There&#x27;s a small open source project I&#x27;m responsible for called <a href="https://github.com/johnnyreilly/jQuery.Validation.Unobtrusive.Native" target="_blank" rel="noopener noreferrer">jQuery Validation Unobtrusive Native</a>. (A catchy name is a must for any good open source project. Alas I&#x27;m not quite meeting my own exacting standards on this particular point... I should have gone with my gut and called it &quot;Livingstone&quot; instead. Too late now...)</p><p> The project itself is fairly simple in purpose. It&#x27;s essentially a bridge between ASP.Net MVC&#x27;s inbuilt support for driving validation from data attributes and jQuery Validation&#x27;s native support for the same. It is, in the end, a collection of ASP.Net MVC HTML helper extensions. It is not massively complicated.</p><p>I believe it was Tony Blair that said &quot;documentation, documentation, documentation&quot; were his priorities for open source projects. Or maybe it was someone else... Anyway, the point stands. Documentation is supremely important if you want your project to be in any way useful to anyone other than yourself. A project, no matter how fantastic, which lacks decent documentation is a missed opportunity.</p><p>Anyway I&#x27;m happy to say that jQuery Validation Unobtrusive Native <em>has</em> documentation! And pretty good documentation at that. The documentation takes the form of the <a href="https://github.com/johnnyreilly/jQuery.Validation.Unobtrusive.Native/tree/master/jVUNDemo" target="_blank" rel="noopener noreferrer">jVUNDemo</a> project which is part of the jQuery Validation Unobtrusive Native repo. jVUNDemo is an ASP.Net MVC web application which is built on top of the jQuery Validation Unobtrusive Native helpers. It demonstrates the helpers in action and documents how you might go about using them. It looks a bit like this:</p><p><a href="http://1.bp.blogspot.com/-5p7fD3Q9dc8/VKDzTV1wYDI/AAAAAAAAAxE/LowxrVAxeXI/s1600/Screenshot%2B2014-12-29%2B06.22.46.png" target="_blank" rel="noopener noreferrer"><img src="http://1.bp.blogspot.com/-5p7fD3Q9dc8/VKDzTV1wYDI/AAAAAAAAAxE/LowxrVAxeXI/s640/Screenshot%2B2014-12-29%2B06.22.46.png" alt="null"></a>When I first put jVUNDemo together I hosted it on Azure so the world could see it in all it&#x27;s finery. And that worked just fine. However, there&#x27;s something you ought to know about me:</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="im-quite-cheap"></a>I&#x27;m quite cheap<a class="hash-link" href="#im-quite-cheap" title="Direct link to heading">#</a></h2><p>No really, I am. My attention was grabbed by the essentially &quot;free&quot; nature of <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">GitHub Pages</a>. I was immediately seized by the desire to somehow deploy jVUNDemo to GitHub Pages and roll around joyfully in all that lovely free hosting.</p><p>&quot;But&quot;, I hear you cry, &quot;you can&#x27;t deploy an ASP.Net MVC application to Git Hub Pages... It only hosts static sites!&quot; Quite right. Sort of. This is where I get to pull my ace of spades: jVUNDemo is not really an &quot;app&quot; so much as a static site. Yup, once the HTML that makes up each page is generated there isn&#x27;t any app like business to do. It&#x27;s just a collection of text and 1 screen demo&#x27;s really.</p><p>That being the case, there&#x27;s no reason why I shouldn&#x27;t be able to make use of GitHub Pages. So that&#x27;s what I decided to do. Whilst I was at it I also wanted to automate the deployment process. When I tweak jVUNDemo I don&#x27;t want to have to manually push out a new version of jVUNDemo to wherever it&#x27;s being hosted. No, I&#x27;m a developer so I&#x27;ll automate it.</p><p>I&#x27;ve broken this up into 2 posts. This first one will cover how you generate a static site from an ASP.Net MVC site. The second will be about how to use <a href="http://www.appveyor.com/" target="_blank" rel="noopener noreferrer">AppVeyor</a> to ensure that on each build your documentation is getting republished.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="you-wget-me"></a>You Wget me?<a class="hash-link" href="#you-wget-me" title="Direct link to heading">#</a></h2><p>So, static site generation. There&#x27;s a well known Unix utility called <a href="https://en.wikipedia.org/wiki/Wget" target="_blank" rel="noopener noreferrer">Wget</a> which covers exactly that ground and so we&#x27;re going to use it. It downloads and saves HTML, it recursively walks the links inside the site and grabs those pages too and it converts our routes so they are locally browsable (&quot;Demo/Required&quot; becomes &quot;Demo/Required.html&quot;).</p><p>You can use <a href="https://chocolatey.org/packages/Wget" target="_blank" rel="noopener noreferrer">Chocolatey</a> to get a copy of Wget. We&#x27;re also going to need IIS Express to host jVUNDemo whilst Wget converts it. Once jVUNDemo has been built successfully you should be be able to kick off the process like so:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ps codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">cd C:\projects\jquery-validation-unobtrusive-native</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">.\makeStatic.ps1 $pwd.path</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>This invokes the <code>makeStatic</code> Powershell script in the root of the jQuery Validation Unobtrusive Native repo:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ps codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">param([string]$buildFolder)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$jVUNDemo = &quot;$($buildFolder)\jVUNDemo&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$staticSiteParentPath = (get-item $buildFolder).Parent.FullName</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$staticSite = &quot;static-site&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$staticSitePath = &quot;$($staticSiteParentPath)\$($staticSite)&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$wgetLogPath = &quot;$($staticSiteParentPath)\wget.log&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$port = 57612</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$servedAt = &quot;http://localhost:$($port)/&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">write-host &quot;jVUNDemo location: $jVUNDemo&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">write-host &quot;static site parent location: $staticSiteParentPath&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">write-host &quot;static site location: $staticSitePath&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">write-host &quot;wget log path: $wgetLogPath&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">write-host &quot;Spin up jVUNDemo site at $($servedAt)&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$process = Start-Process &#x27;C:\Program Files (x86)\IIS Express\iisexpress.exe&#x27; -NoNewWindow -ArgumentList &quot;/path:$($jVUNDemo) /port:$($port)&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">write-host &quot;Wait a moment for IIS to startup&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Start-sleep -s 15</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if (Test-Path $staticSitePath) { </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    write-host &quot;Removing $($staticSitePath)...&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Remove-Item -path $staticSitePath -Recurse -Force</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">write-host &quot;Create static version of demo site here: $($staticSitePath)&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Push-Location $staticSiteParentPath</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 2&gt;&amp;1 used to combine stderr and stdout</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">wget.exe --recursive --convert-links -E --directory-prefix=$staticSite --no-host-directories $servedAt &gt; $wgetLogPath 2&gt;&amp;1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">write-host &quot;lastExitCode: $($lastExitCode)&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cat $wgetLogPath</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Pop-Location</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">write-host &quot;Shut down jVUNDemo site&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stop-process -Name iisexpress</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if (Test-Path $staticSitePath) { </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    write-host &quot;Contents of $($staticSitePath)&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ls $staticSitePath</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The above Powershell does the following:</p><ol><li>Starts up IIS Express serving jVUNDemo on http://localhost:57612/</li><li>Waits 15 seconds for IIS Express to get itself together (probably a shorter wait time would be sufficient)</li><li>Points Wget at jVUNDemo and bellows &quot;go!!!!&quot;</li><li>Wget downloads and saves the static version of jVUNDemo to a directory called &quot;static-site&quot;</li><li>Stops IIS Express</li><li>Prints out the contents of the &quot;static-site&quot; directory</li></ol><p>When run, it pumps something like this out:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">jVUNDemo location: C:\projects\jquery-validation-unobtrusive-native\jVUNDemo </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">static site parent location: C:\projects </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">static site location: C:\projects\static-site </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">wget log path: C:\projects\wget.log </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Spin up jVUNDemo site at http://localhost:57612/ </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Wait a moment for IIS to startup </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Create static version of demo site here: C:\projects\static-site </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">wget.exe : --2014-12-29 07:49:56--  http://localhost:57612/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Resolving localhost... </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">127.0.0.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Connecting to localhost|127.0.0.1|:57612... connected.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">HTTP request sent, awaiting response... </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">200 OK</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">..... lots of HTTP requests.....</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Downloaded: 30 files, 1.0M in 0.09s (10.8 MB/s)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Converting static-site/Demo/CreditCard.html... 34-0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Converting static-site/Demo/Number.html... 34-0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Converting static-site/Demo/Range.html... 34-0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Converting static-site/Demo/Email.html... 34-0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Converting static-site/AdvancedDemo/CustomValidation.html... 35-0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Converting static-site/Demo/Date.html... 36-0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Converting static-site/Home/License.html... 27-0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Converting static-site/index.html... 29-0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Converting static-site/AdvancedDemo/Dynamic.html... 35-0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Converting static-site/Demo/MaxLengthMinLength.html... 34-0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Converting static-site/Demo/Required.html... 34-0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Converting static-site/AdvancedDemo.html... 32-0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Converting static-site/Demo/Remote.html... 35-0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Converting static-site/Demo/EqualTo.html... 34-0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Converting static-site/AdvancedDemo/Globalize.html... 38-0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Converting static-site/Demo/Url.html... 34-0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Converting static-site/Demo.html... 37-0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Converting static-site/Home/GettingStarted.html... 29-0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Converting static-site/Home/Download.html... 27-0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Converting static-site/AdvancedDemo/Tooltip.html... 34-0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Converted 20 files in 0.03 seconds.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Shut down jVUNDemo site </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Contents of C:\projects\static-site </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Directory: C:\projects\static-site</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Mode                LastWriteTime     Length Name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">----                -------------     ------ ----</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">d----        12/29/2014   7:50 AM            AdvancedDemo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">d----        12/29/2014   7:50 AM            Content</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">d----        12/29/2014   7:50 AM            Demo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">d----        12/29/2014   7:50 AM            Home</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">d----        12/29/2014   7:50 AM            Scripts</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-a---        12/29/2014   7:50 AM       5967 AdvancedDemo.html</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-a---        12/29/2014   7:50 AM       6802 Demo.html</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-a---        12/29/2014   7:47 AM      12862 favicon.ico</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-a---        12/29/2014   7:50 AM       8069 index.html</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>And that&#x27;s it for part 1 my friends! You now have a static version of the ASP.Net MVC site to dazzle the world with. I should say for the purposes of full disclosure that there are 2 pages in the site which are not entirely &quot;static&quot; friendly. For these 2 pages I&#x27;ve put messages in that are displayed when the page is served up in a static format explaining the limitations. Their full glory can still be experienced by cloning the project and running locally.</p><p><a href="/blog.johnnyreilly.com/2015/01/deploying-aspnet-mvc-to-github-pages-with-appveyor-part-2.html">Next time</a> we&#x27;ll take the mechanism detailed above and plug it into AppVeyor for some Continuous Integration happiness.</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/wget">wget</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/powershell">powershell</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/github-pages">github pages</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/app-veyor">AppVeyor</a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_3-lP"><a href="/blog.johnnyreilly.com/2014/12/12/gulp-npm-long-paths-and-visual-studio-fight">Gulp, npm, long paths and Visual Studio.... Fight!</a></h2><div class="margin-vert--md"><time datetime="2014-12-12T00:00:00.000Z" class="blogPostDate_Ta7i">December 12, 2014  Â· 3 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="how-i-managed-to-gulp-angular-templatecache-working-inside-visual-studio"></a><sub>How I managed to gulp-angular-templatecache working inside Visual Studio</sub><a class="hash-link" href="#how-i-managed-to-gulp-angular-templatecache-working-inside-visual-studio" title="Direct link to heading">#</a></h2><p> Every now and then something bites you unexpectedly. After a certain amount of pain, the answer comes to you and you know you want to save others from falling into the same deathtrap.</p><p>There I was minding my own business and having a play with a Gulp plugin called <a href="https://www.npmjs.com/package/gulp-angular-templatecache" target="_blank" rel="noopener noreferrer">gulp-angular-templatecache</a>. If you&#x27;re not aware of it, it &quot;Concatenates and registers AngularJS templates in the $templateCache&quot;. I was planning to use it so that all the views in an <a href="https://github.com/johnnyreilly/proverb-offline" target="_blank" rel="noopener noreferrer">Angular app of mine</a> were loaded up-front rather than on demand. (It&#x27;s a first step in making an &quot;offline-first&quot; version of that particular app.)</p><p>I digress already. No sooner had I tapped in:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ps codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">npm install gulp-angular-templatecache --saveDev</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Then I noticed my Visual Studio project was no longer compiling. It was dying a death on build with this error:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ps codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ASPNETCOMPILER : error ASPRUNTIME: The specified path, file name, or both are too long. The fully qualified file name must be less than 260 characters, and the directory name must be less than 248 characters.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>I was dimly aware that there were issues with the nested <a href="https://github.com/joyent/node/issues/6960" target="_blank" rel="noopener noreferrer">node_modules</a> leading to Windows-killing paths. This sounded just like that.... And it was! <code>gulp-angular-templatecache</code> had a dependency on <code>gulp-footer</code> which had a dependency on <code>lodash.assign</code> which had a dependency on <code>lodash._basecreatecallback</code> which had.... You see where I&#x27;m going? It seems that the lovely lodash has created the path from hell.</p><p>For reasons that aren&#x27;t particularly clear this kills Visual Studio&#x27;s build process. This is slightly surprising given that our rogue path is sat in the <code>node_modules</code> directory which isn&#x27;t part of the project in Visual Studio. That being the case you&#x27;d imagine that you could do what you liked there. But no, it seems VS is a delicate flower and we must be careful not to offend. Strange.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="its-workaround-time"></a>It&#x27;s Workaround Time!<a class="hash-link" href="#its-workaround-time" title="Direct link to heading">#</a></h2><p>After a <em>great deal</em> of digging I found the answer nestled in the middle of an <a href="http://stackoverflow.com/a/24144479/761388" target="_blank" rel="noopener noreferrer">answer on Stack Overflow</a>. To quote:</p><blockquote><p>If you will add &quot;lodash.bind&quot; module to your project&#x27;s package.json as dependency it will be installed in one level with gulp and not as gulp&#x27;s dependency</p></blockquote><p>That&#x27;s right, I just needed to tap enter this at the root of my project:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ps codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">npm install lodash.bind --saveDev</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>And all was sweetness and light once more - no more complaints from VS.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="the-future"></a>The Future<a class="hash-link" href="#the-future" title="Direct link to heading">#</a></h2><p>It looks like lodash are <a href="https://github.com/lodash/lodash-cli/issues/23" target="_blank" rel="noopener noreferrer">on course to address this issue</a>. So one day this this workaround won&#x27;t be necessary anymore which is good.</p><p>However, the general long path issue concerning node / npm hasn&#x27;t vanished for Windows users. Given VS 2015 is planning to make Gulp and Grunt 1st class citizens of Visual Studio I&#x27;m going to guess that sort of issue is likely to arise again and again for other packages. I&#x27;m hoping that means that someone will actually fix the underlying path issues that upset Windows with npm.</p><p>It sounds like npm are planning to take <a href="https://github.com/joyent/node/issues/6960#issuecomment-46704998" target="_blank" rel="noopener noreferrer">some steps</a> which is great. But I can&#x27;t be alone in having a slightly nagging feeling that Windows isn&#x27;t quite a first class citizen for node / io / npm yet. I really hope it will become one.</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/npm">npm</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/visual-studio">Visual Studio</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/long-paths">long paths</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/gulp-angular-templatecache">gulp-angular-templatecache</a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_3-lP"><a href="/blog.johnnyreilly.com/2014/12/05/whats-in-a-name">What&#x27;s in a (Domain) Name?</a></h2><div class="margin-vert--md"><time datetime="2014-12-05T00:00:00.000Z" class="blogPostDate_Ta7i">December 5, 2014  Â· 3 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><p>The observant amongst you may have noticed that this blog has a brand new and shiny domain name! That&#x27;s right, after happily trading under &quot;<a href="/blog.johnnyreilly.com/page/icanmakethiswork.blogspot.com">icanmakethiswork.blogspot.com</a>&quot; for the longest time it&#x27;s now &quot;<a href="/blog.johnnyreilly.com/page/blog.icanmakethiswork.io">blog.icanmakethiswork.io</a>&quot;. Trumpets and fanfare!</p><p> Why the change? Well let&#x27;s break that question down a little. First of all, why change at all? Secondly, why change to blog.icanmakethiswork.io?</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="why-do-things-have-to-change-at-all"></a>Why do things have to change at all?<a class="hash-link" href="#why-do-things-have-to-change-at-all" title="Direct link to heading">#</a></h2><p>I mean, weren&#x27;t we happy? Wasn&#x27;t it all good? Well quite. For the record, I have no complaints of Blogger who have hosted my blog since it began. They&#x27;ve provided good tools and a good service and I&#x27;m happy with them.</p><p>That said, I&#x27;ve been toying with the idea for a while now of trying out a few other blogging solutions - possibly even hosting it myself. Whilst my plans are far from definite at the moment I&#x27;m aware that I don&#x27;t own icanmakethiswork.blogspot.com - I can&#x27;t take it with me. So if I want to make a move to change my blogging solution a first step is establishing my own domain name for my blog. I&#x27;ve done that now. If and when I up sticks, people will hopefully come with me as the URL for my blog should not change.</p><p>Also, in the back of my mind I&#x27;m aware that Google owns Blogger. Given their recent spate of closing services it&#x27;s certainly possible that the Google reaper could one day call for Blogger. So it makes sense to be ready to move my blog elsewhere should that day come.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="why-blogicanmakethisworkio"></a>Why blog.icanmakethiswork.io?<a class="hash-link" href="#why-blogicanmakethisworkio" title="Direct link to heading">#</a></h2><p>Why indeed? And why the &quot;.io&quot; suffix? Doesn&#x27;t that just make you a desperate follower of fashion?</p><p>Good questions all, and &quot;no, I hope not&quot;. My original plans were to use the domain name &quot;icanmakethiswork.com&quot;. icanmakethiswork was the name of the blog and it made sense to keep it in the URL. So off I went to register the domain name when to my surprise I discovered this:</p><p><a href="http://4.bp.blogspot.com/-g4rYVOsfHrM/VIFF1KD4gYI/AAAAAAAAAwE/Ll5-YVAfwPM/s1600/Screenshot%2B2014-12-05%2B05.39.00.png" target="_blank" rel="noopener noreferrer"><img src="http://4.bp.blogspot.com/-g4rYVOsfHrM/VIFF1KD4gYI/AAAAAAAAAwE/Ll5-YVAfwPM/s640/Screenshot%2B2014-12-05%2B05.39.00.png" alt="null"></a>My domain is being <a href="https://en.wikipedia.org/wiki/Cybersquatting" target="_blank" rel="noopener noreferrer">cybersquatted</a>! I mean.... What??!!!!</p><p>I started to wonder &quot;is there another icanmakethiswork out there&quot;? Am I not the <a href="http://youtu.be/z8f2mW1GFSI" target="_blank" rel="noopener noreferrer">one and only</a>? So I checked with DuckDuckGo (&quot;The search engine that doesn&#x27;t track you.&quot;) and look what I found:</p><p><a href="http://4.bp.blogspot.com/-Ut96guCgZlU/VIFF_0ol1-I/AAAAAAAAAwM/LXI_I17jJgY/s1600/Screenshot%2B2014-12-05%2B05.41.59.png" target="_blank" rel="noopener noreferrer"><img src="http://4.bp.blogspot.com/-Ut96guCgZlU/VIFF_0ol1-I/AAAAAAAAAwM/LXI_I17jJgY/s640/Screenshot%2B2014-12-05%2B05.41.59.png" alt="null"></a>A whole screen of me. Just me.</p><p>As of June 3rd 2014 someone has been sitting on my blog name. I was actually rather outraged by this. I became even more so as I discovered that there was a mechanism (not free) by which I could try and buy it off the squatter. I could instead be like my life idol Madonna and go to court to get it back. But frankly in this sense I&#x27;m more like Rachel Green in Friends; not litigous.</p><p>So that&#x27;s why I went for icanmakethiswork.io instead. Path of least resistance and all that. I&#x27;d still like icanmakethiswork.com to be mine but I&#x27;m not going to court and I&#x27;m not paying the squatter. Maybe one day I&#x27;ll get it. Who knows?</p><p>Either way, from now on this is <a href="/blog.johnnyreilly.com/page/blog.icanmakethiswork.io">blog.icanmakethiswork.io</a> - please stick around!</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="is-anything-else-going-to-change"></a>Is anything else going to change?<a class="hash-link" href="#is-anything-else-going-to-change" title="Direct link to heading">#</a></h2><p>Not for now, no.</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/cybersquatting">cybersquatting</a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_3-lP"><a href="/blog.johnnyreilly.com/2014/11/26/Coded-UI-IE-11-and-the-runas-problem">Pretending to be someone you&#x27;re not and the dark pit of despair</a></h2><div class="margin-vert--md"><time datetime="2014-11-26T00:00:00.000Z" class="blogPostDate_Ta7i">November 26, 2014  Â· 11 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="coded-ui-ie-11-and-the-runas-problem"></a><sub>(Coded UI, IE 11 and the &quot;runas&quot; problem)</sub><a class="hash-link" href="#coded-ui-ie-11-and-the-runas-problem" title="Direct link to heading">#</a></h2><p> &quot;I&#x27;m not angry, I&#x27;m just disappointed.&quot;</p><p>That&#x27;s kind of how I feel about Coded UI tests. It may well be that you&#x27;ve never heard of them - in my experience very few people seem to be aware of them. What are they? Well, I&#x27;ve never used <a href="http://www.seleniumhq.org/" target="_blank" rel="noopener noreferrer">Selenium</a> but as best I understand Coded UI is Microsoft&#x27;s own version of that. Namely it&#x27;s a way to automate testing, in my case browser-based testing. You can write a suite of tests that will spin up your application and test it out, going from screen to screen, URL to URL and asserting all is as you would expect.</p><p>The project that I&#x27;m currently working on has a pretty comprehensive set of tests covering the use of the application. Each night as the clock strikes midnight a lonely computer in the West End of London whirrs into life and runs the full suite. It takes about 8 hours and at the end a report slips into your inbox letting you know of any failures.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="sounds-brilliant-right-how-could-someone-not-love-this"></a>Sounds brilliant right? How could someone not love this?<a class="hash-link" href="#sounds-brilliant-right-how-could-someone-not-love-this" title="Direct link to heading">#</a></h2><p>Well a number of reasons. First of all, <em>it takes 8 hours</em>!!!! That&#x27;s a long time; I&#x27;d rather learn what I broke today rather than tomorrow.</p><p>Also, and this is probably more significant, Coded UI tests are pretty flaky. Let me qualify that. For a test to be particularly useful it has to be quick, repeatable and reliable. As I&#x27;ve said, Coded UI tests are not quick.</p><p>By their very nature integration tests (of which Coded UI tests are a type) can never be entirely reliably repeatable. They test your app in it&#x27;s entirety. So, for example, if a 3rd party service goes down for 5 minutes then you will get failed tests. You&#x27;ll burn time investigating these false positives.</p><p>Further to that, Coded UI tests are repeatable, except when they&#x27;re not. I&#x27;ve seen colleagues reduced to near tears by incredible sensitivity of Coded UI tests. Out of the box Coded UI tests appear to ship with the <a href="http://blog.codinghorror.com/the-works-on-my-machine-certification-program/" target="_blank" rel="noopener noreferrer">&quot;Works on my machine&quot;</a> guarantee. It requires far more effort that you&#x27;d expect to come up with tests that can be reliably expected to pass. They will fail for surprising reasons. For instance, did you know that using the 2.x branch of jQuery won&#x27;t work with Coded UI? <a href="https://connect.microsoft.com/VisualStudio/Feedback/Details/794841" target="_blank" rel="noopener noreferrer">Neither did I.</a> I&#x27;ve lost track of the time that has been wasted running the same test in multiple different environments trying to identify what exactly is upsetting Coded UI about the environment this time.</p><p>It is sad but true that with Coded UI tests you can spend an <em>enormous</em> amount of time maintaining the test pack on a day to day basis. As infrastructure and project dependencies are upgraded you will sadly discover Coded UI has once again gone into the foetal position and has to tempted back to normal functioning by whispering sweet nothings in it&#x27;s ear. (<em>&quot;It&#x27;s not true that they&#x27;ve ended support for Windows XP&quot; / &quot;IE 6 will live forever&quot;</em> and so on)</p><p>Coded UI also appears to be badly supported by Microsoft. Documentation is pretty sparse and, as we&#x27;ll come back to in a minute, Coded UI is sometimes broken or damaged by other products shipped by Microsoft. This makes it hard to have faith in Coded UI. Indeed, if you&#x27;re thinking of automating your QA testing my advice would be &quot;look into Selenium&quot;. Not because I&#x27;ve used it (I haven&#x27;t) but those I&#x27;ve met who have used Selenium and Coded UI say Selenium wins hands down.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="and-yet-and-yet"></a>And yet, and yet...<a class="hash-link" href="#and-yet-and-yet" title="Direct link to heading">#</a></h2><p>All of the above said, if you have a Coded UI test suite it can still pay dividends. Significant dividends. As I mentioned, my current project has a significant coverage of Coded UI tests. We&#x27;ve crawled over a lot of broken glass to put these together. But now they&#x27;re there it is undeniably useful.</p><p>Every now and then we&#x27;ll do a significant refactor of part of the application. For instance, we&#x27;ve entirely changed our persistence strategy in the app but been able to check the code in with a high degree of confidence gleaned from running our test suite using the refactored codebase.</p><p>Let me be clear: Coded UI tests can be useful.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="the-runas-problem"></a>The &quot;runas&quot; Problem<a class="hash-link" href="#the-runas-problem" title="Direct link to heading">#</a></h2><p>Long preamble over, this post is about how to work around the latest issue Coded UI has thrown in our direction. I call it the &quot;runas&quot; problem. Our application is a Knockout / ASP.Net MVC web app built to be used in an intranet environment. By that I mean that identity is handled by Active Directory / <a href="http://en.wikipedia.org/wiki/Integrated_Windows_Authentication" target="_blank" rel="noopener noreferrer">Windows Authentication</a>. When someone logs into our app we know who they are without them having to directly supply us with a username and password. No, by logging into their computer they have announced just who they are and Internet Explorer (for it is he) will pass along the credentials. (The app can be used with pretty much any browser but we&#x27;re only mandated to support IE 9+.)</p><p>In order that we can test the app we have a number of test accounts set up in Active Directory. These test accounts have been assigned various roles (viewer / editor / administrator etc). Our tests are designed to run using these accounts in order that all scenarios can be adequately tested.</p><p>To achieve this lofty goal the following code (or something very like it) is executed as the first step in any Coded UI test:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">string browserLocation = &quot;C:\\Program Files\\Internet Explorer\\iexplore.exe&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">string url = &quot;http://localhost:12345/&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">string username = &quot;test.editor&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">string domain = &quot;theDomain&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var password = new SecureString();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">foreach (char c in &quot;test.editor.password&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    password.AppendChar(c);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ApplicationUnderTest.Launch(browserLocation, null, url, username, password, domain);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>What this does is fire up Internet Explorer as the supplied user of theDomain\test.editor, and navigate to the home page. With that as our starting place we could dependably then run a test as this test user. This was a solution not without quirks (on occasion Coded UI tests would &quot;stutter&quot; - repeating each keypress 3 times with calamitous effects). But generally, this worked.</p><p>Until that is either Visual Studio 2013 Update 3 or Internet Explorer 11 was installed. One of these (and it appears to be hotly contested) broke the ability to run the above code successfully. After these were installed running the above code resulted in the following error message:</p><blockquote><p>&quot;The application cannot be started. This could be due to one of the following reasons:</p><ol><li>Another instance of the application is already running and only one instance can be running at a time.</li><li>The application started another process and has now stopped. You may need to launch the process directly.</li><li>You do not have sufficient privileges for this application.&quot; File: C:\Program Files\Internet Explorer\iexplore.exe.&quot;</li></ol></blockquote><p>Lamentably, this was pretty much unresolvable and <a href="https://connect.microsoft.com/VisualStudio/feedbackdetail/view/949049/coded-ui-cannot-run-as-a-different-user-with-visual-studio-2013-update-3" target="_blank" rel="noopener noreferrer">logging it with Microsoft yielded nothing helpful</a>. This is what I mean about Coded UI being badly supported by Microsoft. Despite my best efforts to report this issue both to Connect and <a href="http://social.msdn.microsoft.com/Forums/vstudio/en-US/f48665e4-569a-4b67-9bdb-5522b2adffb2/cannot-run-coded-ui-tests-as-different-user-on-windows-81?forum=vsmantest#28c9decb-b579-4848-a7a9-f41c57584d59" target="_blank" rel="noopener noreferrer">elsewhere</a> and in the end nothing useful happened.</p><p>So what to do? I still have Coded UI tests, I still need to be able to run them. And crucially I need to be able to run them impersonating a different user. What to do indeed....</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="the-hack"></a>The <strike>hack</strike><a class="hash-link" href="#the-hack" title="Direct link to heading">#</a></h2><p> workaround</p><p>After IE 11 / Visual Studio Update 3 / whatev&#x27;s was installed I was left with a setup that allowed me to run Coded UI tests, <u>but only</u></p><p> as the current user. On that basis I started looking into a little MVC jiggery pokery. All my controllers inherit from a single base controller. Inside there I placed the following extra override:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public abstract class BaseController : System.Web.Mvc.Controller</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  //...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  protected override void OnAuthorization(AuthorizationContext filterContext)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#if DEBUG</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (filterContext.HttpContext.IsDebuggingEnabled)// Is compilation debug=&quot;true&quot; set in the web.config?</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      var userToImpersonate = Session[&quot;UserToImpersonate&quot;] as string;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      if (!string.IsNullOrEmpty(userToImpersonate))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        // userToImpersonate example: &quot;test.editor@theDomain.com&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        filterContext.HttpContext.User = new RolePrincipal(new WindowsIdentity(userToImpersonate));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#endif</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      base.OnAuthorization(filterContext);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  //...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Each request will trigger this method as one of the first steps in the MVC pipeline. What it does is checks the <code>Session</code> for a user to impersonate. (Yes I&#x27;m as wary of Session as the next chap - but in this case it&#x27;s the right tool for the job.) If a user has been specified then it replaces the current user with the <code>Session</code> user. From this point forwards the app is effectively running as that user. That&#x27;s great!</p><p>In order that Coded UI can make use of this mechanism we need to introduce a &quot;hook&quot;. This is going to look a bit hacky - bear with me. Inside <code>Global.asax.cs</code> we&#x27;re going to add a <code>Session_Start</code> method:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">protected void Session_Start(object sender, EventArgs eventArgs)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#if DEBUG</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // If a user to impersonate has been supplied then add this user to the session</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Impersonation will happen in the OnAuthorization method of our base MVC controller</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Note, this is only allowed in debug mode - not in release mode</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // This exists purely to support coded ui tests</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (Context.IsDebuggingEnabled)  // Is compilation debug=&quot;true&quot; set in the web.config?</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        var userToImpersonate = Request.QueryString[&quot;UserToImpersonate&quot;] as string;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        if (!string.IsNullOrEmpty(userToImpersonate))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            Session.Add(&quot;UserToImpersonate&quot;, userToImpersonate);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#endif</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>For the first Request in a Session this checks the <code>QueryString</code> for a parameter called <code>UserToImpersonate</code>. If it&#x27;s found then it&#x27;s placed into <code>Session</code>. With this hook exposed we can now amend the first step that all our Coded UI tests follow:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Various lines commented out as doesn&#x27;t work with IE 11 - left as an example of how it could be done in the past</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//string browserLocation = &quot;C:\\Program Files\\Internet Explorer\\iexplore.exe&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">string url = &quot;http://localhost:12345/&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">string username = &quot;test.editor&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">string domain = &quot;theDomain.com&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//var password = new SecureString();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//foreach (char c in &quot;test.editor.password&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//    password.AppendChar(c);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//ApplicationUnderTest.Launch(browserLocation, null, url, username, password, domain);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Suffixing url with UrlToImpersonate which will be picked up in Session_Start and used to impersonate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// in OnAuthorization in BaseController.  Also no longer using ApplicationUnderTest.Launch; switched to </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// BrowserWindow.Launch</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// No longer used parameters: browserLocation, password</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var userToImpersonate = username + &quot;@&quot; + domain; // eg &quot;test.editor@theDomain.com&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var urlWithUser = url + &quot;?UserToImpersonate=&quot; + HttpUtility.UrlEncode(userToImpersonate);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var browser = BrowserWindow.Launch(urlWithUser, &quot;-nomerge&quot;); // &quot;-nomerge&quot; flag forces a new session</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>As you can see we actually need less when we&#x27;re using this approach. We no longer need to directly specify the password or the browser location. And the user to impersonate is now passed in as the part of the initial URL used to launch the test.</p><p>Pay careful attention to the &quot;-nomerge&quot; flag that is passed in. This ensures that when another browser instance is opened a new session will be started. This is essential for &quot;multi-user&quot; tests that run tests for <em>different</em> users as part of the same test. It ensures that &quot;test.editor&quot; and &quot;test.different.editor&quot; can co-exist happily.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="what-do-i-think-of-the-workaround"></a>What do I think of the workaround?<a class="hash-link" href="#what-do-i-think-of-the-workaround" title="Direct link to heading">#</a></h2><p>This approach works reliably and dependably. More so than the original approach which on occasion wouldn&#x27;t work or would &quot;stutter&quot; keypresses. That&#x27;s the good news.</p><p>The not so good news is that this approach is, in my view, a bit of hack. I want you to know that this isn&#x27;t my ideal.</p><p>I <em>really</em> don&#x27;t like having to change the actual system code to facilitate the impersonation requirement. Naturally we only ship the release and not the debug builds to Production so the &quot;back door&quot; that this approach provides will not exist in our Production builds. It will only be accessible in our development environments and on our Coded UI test server. But it feels oh so wrong that there is an effective potential back door in the system now. Well, only if the stars were to align in a really terrible (and admittedly rather unlikely) way. But still, you take my point. Caveat emptor and all that. This is something of a cutdown example to illustrate the point. If anyone else intends to use this then I&#x27;d suggest doing more to safeguard your approach. Implementing impersonation whitelists so &quot;any&quot; user cannot be impersonated would be a sensible precaution to start with.</p><p>Perhaps this is just one more reason that I&#x27;m not that enamoured of Coded UI. Once again it is useful but I&#x27;ve had to compromise more than I&#x27;d like to keep it&#x27;s use. If anyone out there has a better solution I would <em>love</em> to hear from you.</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/ie-11">IE 11</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/runas">runas</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/coded-ui">Coded UI</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/nomerge">nomerge</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/internet-exporer">Internet Exporer</a></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog.johnnyreilly.com/page/13"><div class="pagination-nav__label">Â« Newer Entries</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog.johnnyreilly.com/page/15"><div class="pagination-nav__label">Older Entries Â»</div></a></div></nav></main></div></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 John Reilly. Built with Docusaurus.</div></div></div></footer></div>
<script src="/blog.johnnyreilly.com/styles.7c653e04.js"></script>
<script src="/blog.johnnyreilly.com/runtime~main.8fae10d8.js"></script>
<script src="/blog.johnnyreilly.com/main.aa01ada2.js"></script>
<script src="/blog.johnnyreilly.com/1.a2fa6ec1.js"></script>
<script src="/blog.johnnyreilly.com/2.541c8135.js"></script>
<script src="/blog.johnnyreilly.com/a6aa9e1f.8b47d5c4.js"></script>
<script src="/blog.johnnyreilly.com/c3b5bd8c.b5dc6e8e.js"></script>
<script src="/blog.johnnyreilly.com/006cd652.c3a3d198.js"></script>
<script src="/blog.johnnyreilly.com/8ad79eb5.163e13ab.js"></script>
<script src="/blog.johnnyreilly.com/cb5d9d95.71da55c6.js"></script>
<script src="/blog.johnnyreilly.com/69a5cb2c.8fb1266e.js"></script>
<script src="/blog.johnnyreilly.com/57f906a3.9000d6ce.js"></script>
<script src="/blog.johnnyreilly.com/a85279d2.093b0367.js"></script>
<script src="/blog.johnnyreilly.com/476b20cf.a0927ea0.js"></script>
<script src="/blog.johnnyreilly.com/7a43a6e3.5856385f.js"></script>
<script src="/blog.johnnyreilly.com/15e6eb78.dcf1cecf.js"></script>
<script src="/blog.johnnyreilly.com/6b5787b1.03034dfb.js"></script>
<script src="/blog.johnnyreilly.com/06ba4870.7b3eb8cd.js"></script>
</body>
</html>