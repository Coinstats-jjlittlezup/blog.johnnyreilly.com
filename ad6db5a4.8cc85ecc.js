(window.webpackJsonp=window.webpackJsonp||[]).push([[618],{681:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return l})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return p}));var a=n(3),o=n(7),r=(n(0),n(960)),i={title:"webpack: configuring a loader with query / options",author:"John Reilly",author_url:"https://github.com/johnnyreilly",author_image_url:"https://avatars.githubusercontent.com/u/1010525?s=400&u=294033082cfecf8ad1645b4290e362583b33094a&v=4",tags:["webpack 2","Webpack","query","options"],hide_table_of_contents:!1},l={permalink:"/blog.johnnyreilly.com/2017/01/01/webpack-configuring-loader-with-query",editUrl:"https://github.com/johnnyreilly/blog.johnnyreilly.com/edit/main/blog-website/blog/blog/2017-01-01-webpack-configuring-loader-with-query.md",source:"@site/blog/2017-01-01-webpack-configuring-loader-with-query.md",description:"webpack 2 is on it's way. As one of the maintainers of ts-loader I've been checking out that ts-loader works with webpack 2. It does: phew!",date:"2017-01-01T00:00:00.000Z",tags:[{label:"webpack 2",permalink:"/blog.johnnyreilly.com/tags/webpack-2"},{label:"Webpack",permalink:"/blog.johnnyreilly.com/tags/webpack"},{label:"query",permalink:"/blog.johnnyreilly.com/tags/query"},{label:"options",permalink:"/blog.johnnyreilly.com/tags/options"}],title:"webpack: configuring a loader with query / options",readingTime:2.805,truncated:!1,prevItem:{title:"webpack: resolveLoader / alias with query / options",permalink:"/blog.johnnyreilly.com/2017/01/06/webpack-resolveloader-alias-with-query"},nextItem:{title:"Using ts-loader with webpack 2",permalink:"/blog.johnnyreilly.com/2016/12/19/using-ts-loader-with-webpack-2"}},c=[{value:"What exactly is <code>query</code> / <code>options</code>?",id:"what-exactly-is-query--options",children:[]},{value:"webpack 2 is coming - look busy!",id:"webpack-2-is-coming---look-busy",children:[]}],s={toc:c};function p(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,Object(r.b)("a",{parentName:"p",href:"https://medium.com/webpack/webpack-2-2-the-release-candidate-2e614d05d75f#.ntniu44u6"},"webpack 2 is on it's way"),". As one of the maintainers of ",Object(r.b)("a",{parentName:"p",href:"https://github.com/TypeStrong/ts-loader/"},"ts-loader")," I've been checking out that ts-loader works with webpack 2. It does: phew!"),Object(r.b)("p",null," ts-loader has a continuous integration build that runs against webpack 1. When webpack 2 ships we're planning to move to running CI against webpack 2. However, webpack 2 has some breaking changes. The one that's particularly of relevance to our test packs is that a strict schema is now enforced for ",Object(r.b)("inlineCode",{parentName:"p"},"webpack.config.js")," with webpack 2. This has been the case since webpack 2 hit beta 23. Check the ",Object(r.b)("a",{parentName:"p",href:"https://github.com/webpack/webpack/pull/2974"},"PR that added it"),". You can see some of the ",Object(r.b)("a",{parentName:"p",href:"https://github.com/webpack/webpack/issues/3018"},"frankly tortured discussion that this generated as well"),"."),Object(r.b)("p",null,"Let's all take a moment and realise that working on open source is sometimes a rather painful experience. Take a breath. Breathe out. Ready to carry on? Great."),Object(r.b)("p",null,"There are 2 ways to configure loader options for ts-loader (and in fact this stands for most loaders). Loader options can be set either using a ",Object(r.b)("inlineCode",{parentName:"p"},"query")," when specifying the loader or through the ",Object(r.b)("inlineCode",{parentName:"p"},"ts")," (insert the name of alternative loaders here) property in the ",Object(r.b)("inlineCode",{parentName:"p"},"webpack.config.js"),"."),Object(r.b)("p",null,"The implicatations of the breaking change are: with webpack 2 you can ",Object(r.b)("strong",{parentName:"p"},"no longer")," configure ts-loader (or any other loader) with a ",Object(r.b)("inlineCode",{parentName:"p"},"ts")," (insert the name of alternative loaders here) property in the ",Object(r.b)("inlineCode",{parentName:"p"},"webpack.config.js"),". It ",Object(r.b)("strong",{parentName:"p"},"must")," be done through the ",Object(r.b)("inlineCode",{parentName:"p"},"query")," / ",Object(r.b)("inlineCode",{parentName:"p"},"options"),". The following code is no longer valid with webpack 2:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},"module.exports = {\n  ...\n  module: {\n    loaders: [{\n      test: /\\.tsx?$/,\n      loader: 'ts-loader' \n    }]\n  },\n  // specify option using `ts` property - **only do this if you are using webpack 1**\n  ts: {\n    transpileOnly: false\n  }\n}\n")),Object(r.b)("p",null,"This change means that we have needed to adjust how our test pack works. We can no longer make use of ",Object(r.b)("inlineCode",{parentName:"p"},"ts")," for configuration. Since I wasn't terribly aware of ",Object(r.b)("inlineCode",{parentName:"p"},"query")," I thought it made sense to share my learnings."),Object(r.b)("h2",{id:"what-exactly-is-query--options"},"What exactly is ",Object(r.b)("inlineCode",{parentName:"h2"},"query")," / ",Object(r.b)("inlineCode",{parentName:"h2"},"options"),"?"),Object(r.b)("p",null,"Good question. Well, strictly speaking it's 2 possible things; both ways to configure a webpack loader. Classically ",Object(r.b)("inlineCode",{parentName:"p"},"query")," was a string which could be appended to the name of the loader much like a ",Object(r.b)("inlineCode",{parentName:"p"},'<a href="https://en.wikipedia.org/wiki/Query_string">query string</a>')," but actually with ",Object(r.b)("a",{parentName:"p",href:"https://github.com/webpack/loader-utils#parsequery"},"greater powers"),":"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},"module.exports = {\n  ...\n  module: {\n    loaders: [{ \n      test: /\\.tsx?$/,\n      loader: 'ts-loader?' + JSON.stringify({\n        transpileOnly: false\n      })\n    }]\n  }\n}\n")),Object(r.b)("p",null,"But it can also be a separately specified object that's supplied alongside a loader (I understand this is relatively new behaviour):"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},"module.exports = {\n  ...\n  module: {\n    loaders: [{ \n      test: /\\.tsx?$/,\n      loader: 'ts-loader'\n      query: {\n        transpileOnly: false\n      }\n    }]\n  }\n}\n")),Object(r.b)("h2",{id:"webpack-2-is-coming---look-busy"},"webpack 2 is coming - look busy!"),Object(r.b)("p",null,"So if you're planning to move to webpack 2, be aware of this breaking change. You can start moving to using configuration via query right now with webpack 1. You don't need to be using webpack 2 to make the jump. So jump!"),Object(r.b)("p",null,"Finally, and by way of a PS, ",Object(r.b)("inlineCode",{parentName:"p"},"query")," is renamed to ",Object(r.b)("inlineCode",{parentName:"p"},"options")," in webpack 2; a much better name to my mind. There's actually a bunch of other renames on the way as well - check out the ",Object(r.b)("a",{parentName:"p",href:"https://webpack.js.org/guides/migrating/#module-loaders-is-now-module-rules"},"migration guide")," for more on this. The important thing to note is that ",Object(r.b)("strong",{parentName:"p"},"the old names work in webpack 2"),". But you should plan to move to the new naming at some point as they'll likely disappear when webpack 3 ships."))}p.isMDXComponent=!0},960:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return d}));var a=n(0),o=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=o.a.createContext({}),p=function(e){var t=o.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},b=function(e){var t=p(e.components);return o.a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},h=o.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,i=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),b=p(n),h=a,d=b["".concat(i,".").concat(h)]||b[h]||u[h]||r;return n?o.a.createElement(d,l(l({ref:t},s),{},{components:n})):o.a.createElement(d,l({ref:t},s))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=h;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var s=2;s<r;s++)i[s]=n[s];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,n)}h.displayName="MDXCreateElement"}}]);