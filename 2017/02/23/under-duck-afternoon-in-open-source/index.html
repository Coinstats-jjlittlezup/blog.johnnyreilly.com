<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog.johnnyreilly.com/rss.xml" title="I CAN MAKE THIS WORK Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog.johnnyreilly.com/atom.xml" title="I CAN MAKE THIS WORK Blog Atom Feed"><title data-react-helmet="true">Under the Duck: An Afternoon in Open Source | I CAN MAKE THIS WORK</title><meta data-react-helmet="true" property="og:title" content="Under the Duck: An Afternoon in Open Source | I CAN MAKE THIS WORK"><meta data-react-helmet="true" name="description" content="Have you ever wondered what happens behind the scenes of open source projects? One that I&#x27;m involved with is ts-loader; a TypeScript loader for webpack. Yesterday was an interesting day in the life of ts-loader and webpack; things unexpectedly broke. Oh and don&#x27;t worry, they&#x27;re fixed now."><meta data-react-helmet="true" property="og:description" content="Have you ever wondered what happens behind the scenes of open source projects? One that I&#x27;m involved with is ts-loader; a TypeScript loader for webpack. Yesterday was an interesting day in the life of ts-loader and webpack; things unexpectedly broke. Oh and don&#x27;t worry, they&#x27;re fixed now."><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><link data-react-helmet="true" rel="shortcut icon" href="/blog.johnnyreilly.com/img/favicon.ico"><link rel="stylesheet" href="/blog.johnnyreilly.com/styles.a755cef0.css">
<link rel="preload" href="/blog.johnnyreilly.com/styles.e251ffc4.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/runtime~main.17090397.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/main.76845b2c.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/1.32932134.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/2.7bb643e8.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/ccc49370.1c32a13b.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/c3b5bd8c.b09f7905.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/4794aebf.756415f6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/blog.johnnyreilly.com/"><img src="/blog.johnnyreilly.com/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/blog.johnnyreilly.com/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">I CAN MAKE THIS WORK</strong></a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/blog.johnnyreilly.com/"><img src="/blog.johnnyreilly.com/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/blog.johnnyreilly.com/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">I CAN MAKE THIS WORK</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"></ul></div></div></div></nav><div class="main-wrapper blog-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--2"><div class="sidebar_SWld thin-scrollbar"><h3 class="sidebarItemTitle_Km2m">Recent posts</h3><ul class="sidebarItemList_3UpA"><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog.johnnyreilly.com/2021/03/06/generate-typescript-and-csharp-clients-with-nswag">Generate TypeScript and CSharp clients with NSwag based on an API</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog.johnnyreilly.com/2021/02/27/goodbye-client-affinity-hello-data-protection-with-azure">Goodbye Client Affinity, Hello Data Protection with Azure</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog.johnnyreilly.com/2021/02/16/easy-auth-tokens-survive-releases-on-linux-azure-app-service">Making Easy Auth tokens survive releases on Linux Azure App Service</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog.johnnyreilly.com/2021/02/11/azure-app-service-health-checks-and-zero-downtime-deployments">Azure App Service, Health checks and zero downtime deployments</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog.johnnyreilly.com/2021/02/08/arm-templates-security-role-assignments">ARM templates, security, role assignments and magic GUIDs</a></li></ul></div></div><main class="col col--8"><article><header><h1 class="margin-bottom--sm blogPostTitle_3-lP">Under the Duck: An Afternoon in Open Source</h1><div class="margin-vert--md"><time datetime="2017-02-23T00:00:00.000Z" class="blogPostDate_Ta7i">February 23, 2017  Â· 6 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><p>Have you ever wondered what happens behind the scenes of open source projects? One that I&#x27;m involved with is <a href="https://github.com/typestrong/ts-loader" target="_blank" rel="noopener noreferrer">ts-loader</a>; a TypeScript loader for webpack. Yesterday was an interesting day in the life of ts-loader and webpack; things unexpectedly broke. Oh and don&#x27;t worry, they&#x27;re fixed now.</p><p> How things panned out reflects well on the webpack community. I thought it might be instructive to take a look at the legs furiously paddling underneath the duck of open source. What follows is a minute by minute account of my life on the afternoon of Wednesday 22nd February 2017:</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="355pm"></a>3:55pm<a class="hash-link" href="#355pm" title="Direct link to heading">#</a></h3><p> I&#x27;m sat at my desk in the City of London. I have to leave at 4pm to go to the dentist. I&#x27;m working away on a project which is built and bundled using ts-loader and webpack. However, having just npm installed and tried to spin up webpack in watch mode, I discover that everything is broken. Watch mode is not working - there&#x27;s an error being thrown in ts-loader. It&#x27;s to do with a webpack property called <code>mtimes</code>. ts-loader depends upon it and it looks like it is no longer always passed through. Go figure. ### 4:01pm</p><p>I&#x27;ve got to go. I&#x27;m 15 minutes from Bank station. So, I grab my bag and scarper out the door. On my phone I notice <a href="https://github.com/TypeStrong/ts-loader/issues/479" target="_blank" rel="noopener noreferrer">an issue</a> has been raised - other people are being affected by the problem too. As I trot down the various alleys that lead to the station I wonder whether I can work around this issue. Using GitHub to fork, edit code and submit a PR on a mobile phone is possible. Just. But it&#x27;s certainly not easy...</p><p><a href="https://github.com/TypeStrong/ts-loader/pull/481" target="_blank" rel="noopener noreferrer">My PR is in</a>, the various test packs are starting to execute somewhere out there in Travis and Appveyor-land. Then I notice <a href="https://github.com/mredbishop" target="_blank" rel="noopener noreferrer">Ed Bishop</a> has submitted a <a href="https://github.com/TypeStrong/ts-loader/pull/480" target="_blank" rel="noopener noreferrer">near identical PR</a>. Yay Ed! I&#x27;m always keen to encourage people to contribute and so I intend to merge that PR rather than my own.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="1612"></a>16:12<a class="hash-link" href="#1612" title="Direct link to heading">#</a></h3><p>Rubbish. The Waterloo and City Line is out of action. I need to get across London to reach Waterloo or I&#x27;ll miss my appointment. It&#x27;s time to start running....</p><iframe width="560" height="315" src="https://www.youtube.com/embed/4IBGernmtKA" frameborder="0"></iframe><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="1615"></a>16:15<a class="hash-link" href="#1615" title="Direct link to heading">#</a></h3><p>It&#x27;s rather nagging at me that behaviour has changed without warning. This has been reliably in place the entire time I&#x27;ve been involved with ts-loader / webpack. Why now? I don&#x27;t see any obvious mentions on the webpack GitHub repo. So I head over to the webpack Slack channel and ask: (conversation slightly abridged)</p><blockquote><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="johnny_reilly"></a>johnny_reilly<a class="hash-link" href="#johnny_reilly" title="Direct link to heading">#</a></h4><p>Hey all, has something happened to <code>mtimes</code>? Behaviour seems to have changed - now undefined occasionally during watch mode. A PR has been raised against ts-loader to work around this <a href="https://github.com/TypeStrong/ts-loader/pull/480#issuecomment-281714600" target="_blank" rel="noopener noreferrer">https://github.com/TypeStrong/ts-loader/pull/480#issuecomment-281714600</a></p><p>However I&#x27;m wondering if this should actually be merged given behaviour has changed unexpectedly</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="sokra"></a>sokra<a class="hash-link" href="#sokra" title="Direct link to heading">#</a></h4><p>ah...</p><p>i removed it. I thought it was unused.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="johnny_reilly-1"></a>johnny_reilly<a class="hash-link" href="#johnny_reilly-1" title="Direct link to heading">#</a></h4><p>It&#x27;s definitely not!</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="sokra-1"></a>sokra<a class="hash-link" href="#sokra-1" title="Direct link to heading">#</a></h4><p>it&#x27;s not in the public API^^</p><p>Any reason why you are not using <code>getTimes()</code>?</p><p>...</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="johnny_reilly-2"></a>johnny_reilly<a class="hash-link" href="#johnny_reilly-2" title="Direct link to heading">#</a></h4><p> Okay, I&#x27;m on a train and won&#x27;t be near a computer for a while. ts-loader is presently broken because it depends on mtimes. Would it be possible for you to add this back at least for now. I&#x27;m aware many people depend on ts-loader and are now broken. #### sokra</p><p>sure, I readd it but deprecate it.</p><p>...</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="seanlarkin"></a>sean.larkin<a class="hash-link" href="#seanlarkin" title="Direct link to heading">#</a></h4><p> @sokra is this the change you just made for that watchpack bug fix? Or unlrelated, just wanted to track if I didn&#x27;t already have the change/issue #### sokra</p><p><a href="https://github.com/webpack/watchpack/pull/48" target="_blank" rel="noopener noreferrer">https://github.com/webpack/watchpack/pull/48</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="johnny_reilly-3"></a>johnny_reilly<a class="hash-link" href="#johnny_reilly-3" title="Direct link to heading">#</a></h4><p>This is what the present code does:</p><div class="mdxCodeBlock_1zKU">const watcher = watching.compiler.watchFileSystem.watcher || watching.compiler.watchFileSystem.wfs.watcher</div><p>And then <code>.mtimes</code></p><p>Should I be able to do <code>.getTimes()</code> instead?</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="sokra-2"></a>sokra<a class="hash-link" href="#sokra-2" title="Direct link to heading">#</a></h4><p>actually you can&#x27;t rely on <code>watchFileSystem</code> being <code>NodeJsWatchFileSystem</code>. But this is another topic</p><p>...</p><p>but yes</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="johnny_reilly-4"></a>johnny_reilly<a class="hash-link" href="#johnny_reilly-4" title="Direct link to heading">#</a></h4><p>Thanks @sokra - when I get to a keyboard I&#x27;ll swap <code>mtimes</code> for <code>getTimes()</code> and report back.</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="1728"></a>17:28<a class="hash-link" href="#1728" title="Direct link to heading">#</a></h3><p>Despite various trains being out of action / missing in action I&#x27;ve made it to the dentists; phew! I go in for my checkup and plan to take a look at the issue later that evening. In the meantime I&#x27;ve hoping that Tobias (<a href="https://twitter.com/wsokra" target="_blank" rel="noopener noreferrer">Sokra</a>) will get chance to republish so that ts-loader users aren&#x27;t too impacted.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="1800"></a>18:00<a class="hash-link" href="#1800" title="Direct link to heading">#</a></h3><p>Done at the dentist and I&#x27;m heading home. Whilst I&#x27;ve been opening wide and squinting at the ceiling, <a href="https://blogs.msdn.microsoft.com/typescript/2017/02/22/announcing-typescript-2-2/" target="_blank" rel="noopener noreferrer">TypeScript 2.2 has shipped</a>. Whilst this is super exciting, according to Greenkeeper, <a href="https://github.com/TypeStrong/ts-loader/pull/483" target="_blank" rel="noopener noreferrer">the new version has broken the build</a>. Arrrrghhhh...</p><p>I start to look into this and realise we&#x27;re not broken because of TypeScript 2.2; we were broken because of the <code>mtimes</code>. Tobias has now re-added <code>mtimes</code> and published. With that in place I requeue a build and.... drum roll.... we&#x27;re green!</p><p>The good news just keeps on coming as <a href="https://twitter.com/bancek" target="_blank" rel="noopener noreferrer">Luka ZakrajÅ¡ek</a> has submitted a <a href="https://github.com/TypeStrong/ts-loader/pull/482" target="_blank" rel="noopener noreferrer">PR which uses <code>getTimes()</code> in place of <code>mtimes</code></a>. And the tests pass. Awesome! MERGE. I just need to cut a release and we&#x27;re done.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="1815"></a>18:15<a class="hash-link" href="#1815" title="Direct link to heading">#</a></h3><p>I&#x27;m home. My youngest son has been suffering from chicken pox all week and as a result my wife has been in isolation, taking care of him. We chat whilst the boys watch Paw Patrol as the bath runs. I flick open the laptop and start doing the various housekeeping tasks around cutting a release. This is interrupted by various bathtime / bedtime activities and I abandon work for now.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="1930"></a>19:30<a class="hash-link" href="#1930" title="Direct link to heading">#</a></h3><p>The boys are down and I get on with the release; updating the changelog, bumping the version number and running the tests. For various reasons this takes longer than it normally does.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="2030"></a>20:30<a class="hash-link" href="#2030" title="Direct link to heading">#</a></h3><p>Finally we&#x27;re there; ts-loader 2.0.1 ships: <a href="https://github.com/TypeStrong/ts-loader/releases/tag/v2.0.1" target="_blank" rel="noopener noreferrer">https://github.com/TypeStrong/ts-loader/releases/tag/v2.0.1</a>.</p><p>I&#x27;m tremendously grateful to everyone that helped out - thank you all!</p><blockquote><p>ts-loader 2.0.1 has shipped; thanks <a href="https://twitter.com/wSokra" target="_blank" rel="noopener noreferrer">@wsokra</a><a href="https://twitter.com/bancek" target="_blank" rel="noopener noreferrer">@bancek</a> and @mredbishop <a href="https://t.co/I00c7sJyFo" target="_blank" rel="noopener noreferrer">https://t.co/I00c7sJyFo</a><a href="https://twitter.com/hashtag/typescript?src=hash" target="_blank" rel="noopener noreferrer">#typescript</a></p><p>â€” John Reilly (@johnny_reilly) <a href="https://twitter.com/johnny_reilly/status/834515296077627392" target="_blank" rel="noopener noreferrer">February 22, 2017</a></p></blockquote><script src="//platform.twitter.com/widgets.js" charset="utf-8"></script></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/breaking-changes">breaking changes</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/ts-loader">ts-loader</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/webpack">Webpack</a></div></footer></article><div><a href="https://github.com/johnnyreilly/blog.johnnyreilly.com/edit/main/blog-website/blog/blog/2017-02-23-under-duck-afternoon-in-open-source.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog.johnnyreilly.com/2017/03/28/debugging-aspnet-core-in-vs-or-code"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Â« Debugging ASP.Net Core in VS or Code</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog.johnnyreilly.com/2017/02/14/typescript-types-and-repeatable-builds"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">@types is rogue Â»</div></a></div></nav></div></main><div class="col col--2"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#355pm" class="table-of-contents__link">3:55pm</a></li><li><a href="#1612" class="table-of-contents__link">16:12</a></li><li><a href="#1615" class="table-of-contents__link">16:15</a></li><li><a href="#1728" class="table-of-contents__link">17:28</a></li><li><a href="#1800" class="table-of-contents__link">18:00</a></li><li><a href="#1815" class="table-of-contents__link">18:15</a></li><li><a href="#1930" class="table-of-contents__link">19:30</a></li><li><a href="#2030" class="table-of-contents__link">20:30</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 John Reilly. Built with Docusaurus.</div></div></div></footer></div>
<script src="/blog.johnnyreilly.com/styles.e251ffc4.js"></script>
<script src="/blog.johnnyreilly.com/runtime~main.17090397.js"></script>
<script src="/blog.johnnyreilly.com/main.76845b2c.js"></script>
<script src="/blog.johnnyreilly.com/1.32932134.js"></script>
<script src="/blog.johnnyreilly.com/2.7bb643e8.js"></script>
<script src="/blog.johnnyreilly.com/ccc49370.1c32a13b.js"></script>
<script src="/blog.johnnyreilly.com/c3b5bd8c.b09f7905.js"></script>
<script src="/blog.johnnyreilly.com/4794aebf.756415f6.js"></script>
</body>
</html>