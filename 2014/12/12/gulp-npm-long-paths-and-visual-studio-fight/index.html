<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="I CAN MAKE THIS WORK Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="I CAN MAKE THIS WORK Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-51754530-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">Gulp, npm, long paths and Visual Studio.... Fight! | I CAN MAKE THIS WORK</title><meta data-react-helmet="true" property="og:title" content="Gulp, npm, long paths and Visual Studio.... Fight! | I CAN MAKE THIS WORK"><meta data-react-helmet="true" name="description" content="How I managed to gulp-angular-templatecache working inside Visual Studio"><meta data-react-helmet="true" property="og:description" content="How I managed to gulp-angular-templatecache working inside Visual Studio"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="/styles.cc9f3fb7.css">
<link rel="preload" href="/styles.f8cbd7ed.js" as="script">
<link rel="preload" href="/runtime~main.9d913733.js" as="script">
<link rel="preload" href="/main.b39d16fe.js" as="script">
<link rel="preload" href="/1.9d1369a3.js" as="script">
<link rel="preload" href="/2.b8669f88.js" as="script">
<link rel="preload" href="/ccc49370.96ba1876.js" as="script">
<link rel="preload" href="/c3b5bd8c.0459a1fb.js" as="script">
<link rel="preload" href="/c000615d.f0fa822b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><img src="/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">I CAN MAKE THIS WORK</strong></a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">I CAN MAKE THIS WORK</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"></ul></div></div></div></nav><div class="main-wrapper blog-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--2"><div class="sidebar_SWld thin-scrollbar"><h3 class="sidebarItemTitle_Km2m">Recent posts</h3><ul class="sidebarItemList_3UpA"><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/2021/03/10/managed-identity-azure-sql-entity-framework">Managed Identity, Azure SQL and Entity Framework</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/2021/03/06/generate-typescript-and-csharp-clients-with-nswag">Generate TypeScript and CSharp clients with NSwag based on an API</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/2021/02/27/goodbye-client-affinity-hello-data-protection-with-azure">Goodbye Client Affinity, Hello Data Protection with Azure</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/2021/02/16/easy-auth-tokens-survive-releases-on-linux-azure-app-service">Making Easy Auth tokens survive releases on Linux Azure App Service</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/2021/02/11/azure-app-service-health-checks-and-zero-downtime-deployments">Azure App Service, Health checks and zero downtime deployments</a></li></ul></div></div><main class="col col--8"><article><header><h1 class="margin-bottom--sm blogPostTitle_3-lP">Gulp, npm, long paths and Visual Studio.... Fight!</h1><div class="margin-vert--md"><time datetime="2014-12-12T00:00:00.000Z" class="blogPostDate_Ta7i">December 12, 2014  Â· 3 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="how-i-managed-to-gulp-angular-templatecache-working-inside-visual-studio"></a><sub>How I managed to gulp-angular-templatecache working inside Visual Studio</sub><a class="hash-link" href="#how-i-managed-to-gulp-angular-templatecache-working-inside-visual-studio" title="Direct link to heading">#</a></h2><p> Every now and then something bites you unexpectedly. After a certain amount of pain, the answer comes to you and you know you want to save others from falling into the same deathtrap.</p><p>There I was minding my own business and having a play with a Gulp plugin called <a href="https://www.npmjs.com/package/gulp-angular-templatecache" target="_blank" rel="noopener noreferrer">gulp-angular-templatecache</a>. If you&#x27;re not aware of it, it &quot;Concatenates and registers AngularJS templates in the $templateCache&quot;. I was planning to use it so that all the views in an <a href="https://github.com/johnnyreilly/proverb-offline" target="_blank" rel="noopener noreferrer">Angular app of mine</a> were loaded up-front rather than on demand. (It&#x27;s a first step in making an &quot;offline-first&quot; version of that particular app.)</p><p>I digress already. No sooner had I tapped in:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ps codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">npm install gulp-angular-templatecache --saveDev</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Then I noticed my Visual Studio project was no longer compiling. It was dying a death on build with this error:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ps codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ASPNETCOMPILER : error ASPRUNTIME: The specified path, file name, or both are too long. The fully qualified file name must be less than 260 characters, and the directory name must be less than 248 characters.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>I was dimly aware that there were issues with the nested <a href="https://github.com/joyent/node/issues/6960" target="_blank" rel="noopener noreferrer">node_modules</a> leading to Windows-killing paths. This sounded just like that.... And it was! <code>gulp-angular-templatecache</code> had a dependency on <code>gulp-footer</code> which had a dependency on <code>lodash.assign</code> which had a dependency on <code>lodash._basecreatecallback</code> which had.... You see where I&#x27;m going? It seems that the lovely lodash has created the path from hell.</p><p>For reasons that aren&#x27;t particularly clear this kills Visual Studio&#x27;s build process. This is slightly surprising given that our rogue path is sat in the <code>node_modules</code> directory which isn&#x27;t part of the project in Visual Studio. That being the case you&#x27;d imagine that you could do what you liked there. But no, it seems VS is a delicate flower and we must be careful not to offend. Strange.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="its-workaround-time"></a>It&#x27;s Workaround Time!<a class="hash-link" href="#its-workaround-time" title="Direct link to heading">#</a></h2><p>After a <em>great deal</em> of digging I found the answer nestled in the middle of an <a href="http://stackoverflow.com/a/24144479/761388" target="_blank" rel="noopener noreferrer">answer on Stack Overflow</a>. To quote:</p><blockquote><p>If you will add &quot;lodash.bind&quot; module to your project&#x27;s package.json as dependency it will be installed in one level with gulp and not as gulp&#x27;s dependency</p></blockquote><p>That&#x27;s right, I just needed to tap enter this at the root of my project:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ps codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">npm install lodash.bind --saveDev</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>And all was sweetness and light once more - no more complaints from VS.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="the-future"></a>The Future<a class="hash-link" href="#the-future" title="Direct link to heading">#</a></h2><p>It looks like lodash are <a href="https://github.com/lodash/lodash-cli/issues/23" target="_blank" rel="noopener noreferrer">on course to address this issue</a>. So one day this this workaround won&#x27;t be necessary anymore which is good.</p><p>However, the general long path issue concerning node / npm hasn&#x27;t vanished for Windows users. Given VS 2015 is planning to make Gulp and Grunt 1st class citizens of Visual Studio I&#x27;m going to guess that sort of issue is likely to arise again and again for other packages. I&#x27;m hoping that means that someone will actually fix the underlying path issues that upset Windows with npm.</p><p>It sounds like npm are planning to take <a href="https://github.com/joyent/node/issues/6960#issuecomment-46704998" target="_blank" rel="noopener noreferrer">some steps</a> which is great. But I can&#x27;t be alone in having a slightly nagging feeling that Windows isn&#x27;t quite a first class citizen for node / io / npm yet. I really hope it will become one.</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/tags/npm">npm</a><a class="margin-horiz--sm" href="/tags/visual-studio">Visual Studio</a><a class="margin-horiz--sm" href="/tags/long-paths">long paths</a><a class="margin-horiz--sm" href="/tags/gulp-angular-templatecache">gulp-angular-templatecache</a></div></footer></article><div><a href="https://github.com/johnnyreilly/blog.johnnyreilly.com/edit/main/blog-website/blog/blog/2014-12-12-gulp-npm-long-paths-and-visual-studio-fight.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/2014/12/29/deploying-aspnet-mvc-to-github-pages-with-appveyor-part-1"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Â« Deploying from ASP.Net MVC to GitHub Pages using AppVeyor part 1</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/2014/12/05/whats-in-a-name"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">What&#x27;s in a (Domain) Name? Â»</div></a></div></nav></div></main><div class="col col--2"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-i-managed-to-gulp-angular-templatecache-working-inside-visual-studio" class="table-of-contents__link"><sub>How I managed to gulp-angular-templatecache working inside Visual Studio</sub></a></li><li><a href="#its-workaround-time" class="table-of-contents__link">It&#39;s Workaround Time!</a></li><li><a href="#the-future" class="table-of-contents__link">The Future</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 John Reilly. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.f8cbd7ed.js"></script>
<script src="/runtime~main.9d913733.js"></script>
<script src="/main.b39d16fe.js"></script>
<script src="/1.9d1369a3.js"></script>
<script src="/2.b8669f88.js"></script>
<script src="/ccc49370.96ba1876.js"></script>
<script src="/c3b5bd8c.0459a1fb.js"></script>
<script src="/c000615d.f0fa822b.js"></script>
</body>
</html>