<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog.johnnyreilly.com/rss.xml" title="I CAN MAKE THIS WORK Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog.johnnyreilly.com/atom.xml" title="I CAN MAKE THIS WORK Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-51754530-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">Posts tagged &quot;build server&quot; | I CAN MAKE THIS WORK</title><meta data-react-helmet="true" property="og:title" content="Posts tagged &quot;build server&quot; | I CAN MAKE THIS WORK"><meta data-react-helmet="true" name="description" content="Blog | Tagged &quot;build server&quot;"><meta data-react-helmet="true" property="og:description" content="Blog | Tagged &quot;build server&quot;"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><link data-react-helmet="true" rel="shortcut icon" href="/blog.johnnyreilly.com/img/favicon.ico"><link rel="stylesheet" href="/blog.johnnyreilly.com/styles.a30a8c8e.css">
<link rel="preload" href="/blog.johnnyreilly.com/styles.b80bbee1.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/runtime~main.94d0c56d.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/main.08f1a502.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/1.b4966bec.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/2.7d3f6764.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/6875c492.e0138b94.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/c3b5bd8c.4d75ffb7.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/9957bc3e.0e0e78fa.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/66d4971b.d035278e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/blog.johnnyreilly.com/"><img src="/blog.johnnyreilly.com/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/blog.johnnyreilly.com/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">I CAN MAKE THIS WORK</strong></a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/blog.johnnyreilly.com/"><img src="/blog.johnnyreilly.com/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/blog.johnnyreilly.com/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">I CAN MAKE THIS WORK</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"></ul></div></div></div></nav><div class="main-wrapper blog-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--2"><div class="sidebar_SWld thin-scrollbar"><h3 class="sidebarItemTitle_Km2m">Recent posts</h3><ul class="sidebarItemList_3UpA"><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog.johnnyreilly.com/2021/03/10/managed-identity-azure-sql-entity-framework">Managed Identity, Azure SQL and Entity Framework</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog.johnnyreilly.com/2021/03/06/generate-typescript-and-csharp-clients-with-nswag">Generate TypeScript and CSharp clients with NSwag based on an API</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog.johnnyreilly.com/2021/02/27/goodbye-client-affinity-hello-data-protection-with-azure">Goodbye Client Affinity, Hello Data Protection with Azure</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog.johnnyreilly.com/2021/02/16/easy-auth-tokens-survive-releases-on-linux-azure-app-service">Making Easy Auth tokens survive releases on Linux Azure App Service</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog.johnnyreilly.com/2021/02/11/azure-app-service-health-checks-and-zero-downtime-deployments">Azure App Service, Health checks and zero downtime deployments</a></li></ul></div></div><main class="col col--8"><h1>1 post tagged with &quot;build server&quot;</h1><a href="/blog.johnnyreilly.com/tags">View All Tags</a><div class="margin-vert--xl"><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_3-lP"><a href="/blog.johnnyreilly.com/2013/10/30/getting-typescript-compile-on-save-and-continous-integration-to-play-nice">Getting TypeScript Compile-on-Save and Continuous Integration to play nice</a></h2><div class="margin-vert--md"><time datetime="2013-10-30T00:00:00.000Z" class="blogPostDate_Ta7i">October 30, 2013  Â· 5 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><p>Well sort of... Perhaps this post should more accurately called &quot;How to get CI to ignore your TypeScript whilst Visual Studio still compiles it...&quot;</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="once-there-was-web-essentials"></a>Once there was Web Essentials<a class="hash-link" href="#once-there-was-web-essentials" title="Direct link to heading">#</a></h2><p>When I first started using TypeScript, I was using it in combination with Web Essentials. Those were happy days. I saved my TS file and Web Essentials would kick off TypeScript compilation. Ah bliss. But the good times couldn&#x27;t last forever and sure enough when version 3.0 of Web Essentials shipped it <a href="http://madskristensen.net/post/Web-Essentials-2013-Where-is-the-TypeScript-support" target="_blank" rel="noopener noreferrer">pulled support for TypeScript</a>.</p><p>This made me, <a href="https://typescript.codeplex.com/workitem/1616" target="_blank" rel="noopener noreferrer">and others</a>, very sad. Essentially we were given the choice between sticking with an old version of Web Essentials (2.9 - the last release before 3.0) and keeping our Compile-on-Save *<strong>or</strong>* keeping with the latest version of Web Essentials and losing it. And since I understood that newer versions of TypeScript had differences in the compiler flags which slightly broke compatibility with WE 2.9 the latter choice seemed the most sensible...</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="but-there-is-still-compile-on-save-hope"></a>But there is still Compile on Save hope!<a class="hash-link" href="#but-there-is-still-compile-on-save-hope" title="Direct link to heading">#</a></h2><p>The information was that we need not lose our Compile on Save. We just need to follow the instructions <a href="https://typescript.codeplex.com/wikipage?title=Compile-on-Save" target="_blank" rel="noopener noreferrer">here</a>. Or to quote them:</p><blockquote><p>Then additionally add (or replace if you had an older PreBuild action for TypeScript) the following at the end of your project file to include TypeScript compilation in your project.</p><p>...</p><p>For C#-style projects (.csproj):</p><div class="mdxCodeBlock_1zKU">  &lt;PropertyGroup Condition=&quot;&#x27;$(Configuration)&#x27; == &#x27;Debug&#x27;&quot;&gt; &lt;TypeScriptTarget&gt;ES5&lt;/TypeScriptTarget&gt; &lt;TypeScriptIncludeComments&gt;true&lt;/TypeScriptIncludeComments&gt; &lt;TypeScriptSourceMap&gt;true&lt;/TypeScriptSourceMap&gt; &lt;/PropertyGroup&gt; &lt;PropertyGroup Condition=&quot;&#x27;$(Configuration)&#x27; == &#x27;Release&#x27;&quot;&gt; &lt;TypeScriptTarget&gt;ES5&lt;/TypeScriptTarget&gt; &lt;TypeScriptIncludeComments&gt;false&lt;/TypeScriptIncludeComments&gt; &lt;TypeScriptSourceMap&gt;false&lt;/TypeScriptSourceMap&gt; &lt;/PropertyGroup&gt; &lt;Import Project=&quot;$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)\TypeScript\Microsoft.TypeScript.targets&quot; /&gt;</div></blockquote><p>I followed these instructions (well I had to tweak the <code>Import Project</code> location) and I was in business again. But I when I came to check my code into TFS I came unstuck. The automated build kicked off and then, in short order, kicked me:</p><blockquote><p><code>C:\Builds\1\MyApp\MyApp Continuous Integration\src\MyApp\MyApp.csproj (1520): The imported project &quot;C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\TypeScript\Microsoft.TypeScript.targets&quot; was not found. Confirm that the path in the &lt;import&gt; declaration is correct, and that the file exists on disk. C:\Builds\1\MyApp\MyApp Continuous Integration\src\MyApp\MyApp.csproj (1520): The imported project &quot;C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\TypeScript\Microsoft.TypeScript.targets&quot; was not found. Confirm that the path in the &lt;import&gt; declaration is correct, and that the file exists on disk. &lt;/import&gt;&lt;/import&gt;</code></p></blockquote><p>That&#x27;s right, TypeScript wasn&#x27;t installed on the build server. And since TypeScript was now part of the build process my builds were now failing. Ouch.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="so-what-now"></a>So what now?<a class="hash-link" href="#so-what-now" title="Direct link to heading">#</a></h2><p>I did a little digging and found <a href="https://typescript.codeplex.com/workitem/1518" target="_blank" rel="noopener noreferrer">this issue report on the TypeScript CodePlex site</a>. To quote the issue, it seemed there were 2 possible solutions to get continuous integration and typescript playing nice:</p><ol><li>Install TypeScript on the build server</li><li>Copy the required files for Microsoft.TypeScript.targets to a different source-controlled folder and change the path references in the csproj file to this folder.</li></ol><p>#1 wasn&#x27;t an option for us - we couldn&#x27;t install on the build server. And covering both #1 and #2, I wasn&#x27;t particularly inclined to kick off builds on the build server since I was wary of <a href="https://typescript.codeplex.com/workitem/1432" target="_blank" rel="noopener noreferrer">reported problems with memory leaks</a> etc with the TS compiler. I may feel differently later when TS is no longer in Alpha and has stabilised but it didn&#x27;t seem like the right time.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="a-solution"></a>A solution<a class="hash-link" href="#a-solution" title="Direct link to heading">#</a></h2><p>So, to sum up, what I wanted was to be able to compile TypeScript in Visual Studio on my machine, and indeed in VS on the machine of anyone else working on the project. But I *<strong>didn&#x27;t</strong>* want TypeScript compilation to be part of the build process on the server.</p><p>The solution in the end was pretty simple - I replaced the <code>.csproj</code> changes with the code below:</p><div class="mdxCodeBlock_1zKU">  &lt;PropertyGroup Condition=&quot;&#x27;$(Configuration)&#x27; == &#x27;Debug&#x27;&quot;&gt; &lt;TypeScriptTarget&gt;ES5&lt;/TypeScriptTarget&gt; &lt;TypeScriptRemoveComments&gt;false&lt;/TypeScriptRemoveComments&gt; &lt;TypeScriptSourceMap&gt;false&lt;/TypeScriptSourceMap&gt; &lt;TypeScriptModuleKind&gt;AMD&lt;/TypeScriptModuleKind&gt; &lt;TypeScriptNoImplicitAny&gt;true&lt;/TypeScriptNoImplicitAny&gt; &lt;/PropertyGroup&gt; &lt;PropertyGroup Condition=&quot;&#x27;$(Configuration)&#x27; == &#x27;Release&#x27;&quot;&gt; &lt;TypeScriptTarget&gt;ES5&lt;/TypeScriptTarget&gt; &lt;TypeScriptRemoveComments&gt;false&lt;/TypeScriptRemoveComments&gt; &lt;TypeScriptSourceMap&gt;false&lt;/TypeScriptSourceMap&gt; &lt;TypeScriptModuleKind&gt;AMD&lt;/TypeScriptModuleKind&gt; &lt;TypeScriptNoImplicitAny&gt;true&lt;/TypeScriptNoImplicitAny&gt; &lt;/PropertyGroup&gt; &lt;Import Project=&quot;$(VSToolsPath)\TypeScript\Microsoft.TypeScript.targets&quot; Condition=&quot;Exists(&#x27;$(VSToolsPath)\TypeScript\Microsoft.TypeScript.targets&#x27;)&quot; /&gt;</div><p>What this does is enable TypeScript compilation *<strong>only</strong>* if TypeScript is installed. So when I&#x27;m busy developing with Visual Studio on my machine with the plugin installed I can compile TypeScript. But when I check in the TypeScript compilation is *<strong>not</strong>* performed on the build server. This is because TypeScript is not installed on the build server and we are only compiling if it is installed. (Just to completely labour the point.)</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="final-thoughts"></a>Final thoughts<a class="hash-link" href="#final-thoughts" title="Direct link to heading">#</a></h2><p>I do consider this an interim solution. As I mentioned earlier, when TypeScript has stabilised I think I&#x27;d like TS compilation to be part of the build process. Like with any other code I think compiling on check-in to catch bugs early is an excellent idea. But I think I&#x27;ll wait until there&#x27;s some clearer guidance on the topic from the TypeScript team before I take this step.</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/tfs">TFS</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/type-script">TypeScript</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/build-server">Build Server</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/continuous-integration">Continuous Integration</a></div><div class="col text--right"><a aria-label="Read more about Getting TypeScript Compile-on-Save and Continuous Integration to play nice" href="/blog.johnnyreilly.com/2013/10/30/getting-typescript-compile-on-save-and-continous-integration-to-play-nice"><strong>Read More</strong></a></div></footer></article></div></main></div></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 John Reilly. Built with Docusaurus.</div></div></div></footer></div>
<script src="/blog.johnnyreilly.com/styles.b80bbee1.js"></script>
<script src="/blog.johnnyreilly.com/runtime~main.94d0c56d.js"></script>
<script src="/blog.johnnyreilly.com/main.08f1a502.js"></script>
<script src="/blog.johnnyreilly.com/1.b4966bec.js"></script>
<script src="/blog.johnnyreilly.com/2.7d3f6764.js"></script>
<script src="/blog.johnnyreilly.com/6875c492.e0138b94.js"></script>
<script src="/blog.johnnyreilly.com/c3b5bd8c.4d75ffb7.js"></script>
<script src="/blog.johnnyreilly.com/9957bc3e.0e0e78fa.js"></script>
<script src="/blog.johnnyreilly.com/66d4971b.d035278e.js"></script>
</body>
</html>