<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.71">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="I CAN MAKE THIS WORK Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="I CAN MAKE THIS WORK Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-51754530-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">Posts tagged &quot;definitely typed&quot; | I CAN MAKE THIS WORK</title><meta data-react-helmet="true" property="og:title" content="Posts tagged &quot;definitely typed&quot; | I CAN MAKE THIS WORK"><meta data-react-helmet="true" name="description" content="Blog | Tagged &quot;definitely typed&quot;"><meta data-react-helmet="true" property="og:description" content="Blog | Tagged &quot;definitely typed&quot;"><meta data-react-helmet="true" property="og:url" content="https://johnnyreilly.github.io//tags/definitely-typed"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="blog_tags_posts"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://johnnyreilly.github.io//tags/definitely-typed"><link data-react-helmet="true" rel="alternate" href="https://johnnyreilly.github.io//tags/definitely-typed" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://johnnyreilly.github.io//tags/definitely-typed" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.aa821496.css">
<link rel="preload" href="/assets/js/styles.46f4853d.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.6eba6eb2.js" as="script">
<link rel="preload" href="/assets/js/main.ad5bf55b.js" as="script">
<link rel="preload" href="/assets/js/1.40d4c38d.js" as="script">
<link rel="preload" href="/assets/js/2.efe45cdf.js" as="script">
<link rel="preload" href="/assets/js/6875c492.1e1d7044.js" as="script">
<link rel="preload" href="/assets/js/c3b5bd8c.e43a454c.js" as="script">
<link rel="preload" href="/assets/js/fca55932.0d0332f0.js" as="script">
<link rel="preload" href="/assets/js/3844e31e.0404e0c2.js" as="script">
<link rel="preload" href="/assets/js/0ffd0b88.c62d826d.js" as="script">
<link rel="preload" href="/assets/js/78d410a3.fdeeeb57.js" as="script">
<link rel="preload" href="/assets/js/de995ae1.492217a4.js" as="script">
<link rel="preload" href="/assets/js/84c6cc5c.c060c046.js" as="script">
<link rel="preload" href="/assets/js/8f5729b9.b3a03205.js" as="script">
<link rel="preload" href="/assets/js/7f06378e.86820332.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">I CAN MAKE THIS WORK</strong></a><a class="navbar__item navbar__link" href="/about">About</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Twitter</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">üåû</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">I CAN MAKE THIS WORK</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/about">About</a></li><li class="menu__list-item"><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" class="menu__link">Twitter</a></li></ul></div></div></div></nav><div class="main-wrapper blog-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--3"><div class="sidebar_2ahu thin-scrollbar"><h3 class="sidebarItemTitle_2hhb">Recent posts</h3><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/03/10/managed-identity-azure-sql-entity-framework">Managed Identity, Azure SQL and Entity Framework</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/03/06/generate-typescript-and-csharp-clients-with-nswag">Generate TypeScript and CSharp clients with NSwag based on an API</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/02/27/goodbye-client-affinity-hello-data-protection-with-azure">Goodbye Client Affinity, Hello Data Protection with Azure</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/02/16/easy-auth-tokens-survive-releases-on-linux-azure-app-service">Making Easy Auth tokens survive releases on Linux Azure App Service</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/02/11/azure-app-service-health-checks-and-zero-downtime-deployments">Azure App Service, Health checks and zero downtime deployments</a></li></ul></div></div><main class="col col--7"><h1>7 posts tagged with &quot;definitely typed&quot;</h1><a href="/tags">View All Tags</a><div class="margin-vert--xl"><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_GeHD"><a href="/2019/10/08/definitely-typed-movie">Definitely Typed: The Movie</a></h2><div class="margin-vert--md"><time datetime="2019-10-08T00:00:00.000Z" class="blogPostDate_fNvV">October 8, 2019 ¬∑ 48 min read</time></div><div class="avatar margin-vert--md"><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><div class="markdown"><p>I&#x27;d like to tell you a story. It&#x27;s the tale of the ecosystem that grew up around a language: TypeScript. TypeScript is, for want of a better description, JavaScript after a trip to Saville Row. Essentially the same language, but a little more together, a little less wild west. JS with a decent haircut and a new suit. These days, the world seems to be written in TypeScript. And when you pause to consider just how young the language is, well, that&#x27;s kind of amazing.</p><p>Who could have predicted it would end up like this? When I was a boy I remember coming down the stairs in my childhood home. Shuffling to the edge of each step on my bottom before thumping down to the one beneath. When I look at those same stairs now they&#x27;re so small. I barely notice the difference between one step and the next. But back then each step seemed giant, each one so far apart. Definitely Typed had any number of steps in its evolution. They all seemed so significant then; whereas now they&#x27;re just a memory. Let&#x27;s remember together‚Ä¶</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="prologue"></a>Prolog(ue)<a class="hash-link" href="#prologue" title="Direct link to heading">#</a></h2><p>When it was first unveiled to the world by Anders Hejlsberg back in 2012, there was nothing to suggest TypeScript was going to be seismic in its effects. The language brought two important things to the table. First of all, the ability to write JavaScript with optional static typing (imagine this as &quot;belts and braces&quot; for JS). The second feature was interoperability with existing JavaScript.</p><p>The reason TypeScript has the traction that it does, is a consequence of the latter feature. The JavaScript ecosystem was already a roaring success by 2012. Many useful libraries were out there, authored in vanilla JavaScript. jQuery, Backbone, Knockout were all going concerns. People were building things.</p><p>Wisely, having TypeScript able to work with existing JavaScript libraries was a goal of the language right from the off. This made sense; otherwise it would have been like unveiling Netflix to the world whilst saying &quot;sorry you can&#x27;t use a television set to watch this&quot;. Remember, JS was great as is - people wanted static typing so they could be more productive and so they could sleep better at night. (&quot;Oh wait, did I write that unit test to check all the properties? Dammit, it&#x27;s 3am!&quot;) If TypeScript had hove onto the scene requiring that everything was written <em>in</em> TypeScript then I would not be writing this. It didn&#x27;t.</p><p>Interoperability was made possible by the concept of &quot;type definitions&quot;. Analogous to header files in C, these are TypeScript files with a <code>.d.ts</code> suffix that tell the compiler about an existing JavaScript library which is in scope. This means you can write TypeScript and use jQuery or [insert your favourite library name here]. Even though they are not written in TypeScript.</p><p>At the time of the initial TypeScript announcement (v0.8.1) there was no concept of a repository of type definitions. I mean, there was every chance that TypeScript wasn&#x27;t going to be a big deal. Success wasn&#x27;t guaranteed. But it happened. You&#x27;re reading this in a world where Definitely Typed is one of the most popular repos on GitHub and where type definitions from it are published out to npm for consumption by developers greedy for static types. A world where the TypeScript team has pretty much achieved its goal of &quot;types on every desk&quot;.</p><p>I want to tell you the story of the history of type definitions in the TypeScript world. I&#x27;m pretty well placed to do this since I&#x27;ve been involved since the early days. Others involved have been kind enough to give me their time and tell me their stories. There&#x27;s likely to be errors and omissions, and that&#x27;s on me. It&#x27;s an amazing tale though; I&#x27;m fortunate to get to tell it.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="the-first-type-definition"></a>The First Type Definition<a class="hash-link" href="#the-first-type-definition" title="Direct link to heading">#</a></h2><p>I was hanging out for something like TypeScript. I&#x27;d been busily developing rich client applications in JS and, whilst I loved the language, I was dearly missing static typing. All the things broke all of the time and I wanted help. I wanted a compiler to take me by the hand and say &quot;hey John, you just did a silly thing. Don&#x27;t do it John; you&#x27;ll only be filled with regret...&quot;. The TypeScript team wrote that compiler.</p><p>When TypeScript was announced, it was important that the world could see that interop with JS was a first class citizen. Accordingly, a jQuery type definition was demonstrated as well. At the time, jQuery was the number one JavaScript library downloaded on the internet. So naturally it was the obvious choice for a demo. The type definition was fairly rough and ready but it worked. <a href="https://channel9.msdn.com/posts/Anders-Hejlsberg-Introducing-TypeScript" target="_blank" rel="noopener noreferrer">You can see Anders Hejlsberg showing off the jQuery definition 45 minutes into this presentation introducing TypeScript.</a></p><p>Consumption was straightforward, if perhaps quirky. You took the <code>jquery.d.ts</code> file, copied it into your project location. Back then, to let the compiler know that a JS library had come to the party you had to use a kind of comment pragma in the header of your TypeScript files. For example: <code>/// &amp;lt;reference path=&quot;jquery/jquery.d.ts&quot; /&amp;gt;</code>. This let TypeScript know that the type definition living at that path was relevant for the current script and it should scope it in.</p><p>There was no discussion of ‚Äúhow do we type the world‚Äù? Even if they wanted to, the TypeScript team didn&#x27;t really have the resources at that point to support this. They&#x27;d got as far as they had on the person power of four or five developers and some testers as well. There was a problem clearly waiting to be solved. As luck would have it, in Bulgaria a man named Boris Yankov had been watching the TypeScript announcement.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="boris-yankov"></a>Boris Yankov<a class="hash-link" href="#boris-yankov" title="Direct link to heading">#</a></h2><p><img src="/assets/images/boris_yankov-8ccc0df7a1d26e1b11af11e101017d7d.jpeg"></p><p>Boris Yankov was a handsome thirty year old man, living in the historic Bulgarian city of Plovdiv. He was swarthy with dark hair; like Ben Affleck if had been hanging out in Eastern Europe for a couple of years.</p><p>Boris was a backend developer who&#x27;d found himself doing more and more frontend. More JavaScript. He was accustomed to C# on the backend with static typing a-gogo. From his point of view JS was brittle. It was super easy to break things and have no idea until runtime that you&#x27;d done so. It seemed so backward. He was ready for something TypeScript shaped.</p><p>&quot;What people forget is how different it was back then. Microsoft made this announcement, but probably most of the people that were listening were part of the MS ecosystem. I certainly was. Remember, back then if you had a Mac or did Linux you probably didn&#x27;t think about MS too much.&quot;</p><p>Boris thought TypeScript just seemed like this interesting and weird thing that Microsoft were doing. He was excited by types; he was missing them and there was a real need there. A problem to solve. There were already people trying to address this. But the attempts so far had been underwhelming. Boris had encountered Google Closure Compiler; a tool built by Google which, amongst other things, introduces some measure of type safety to JavaScript by reading annotations in JSDoc format. Boris viewed GCC as a tentative first step. <a href="https://github.com/google/closure-compiler/wiki/Annotating-JavaScript-for-the-Closure-Compiler" target="_blank" rel="noopener noreferrer">One which lead the way for things like TypeScript and Flow to follow.</a></p><p>The other aspect of TypeScript that excited Boris was transpilation. Transpilation is the term coined to describe what TypeScript does when it comes to emit output. It takes in TypeScript and pumps out JavaScript. The question is: what sort of JavaScript? One choice the TypeScript team could have made was just having the compiler stripping out types from the codebase. If it worked that way then you&#x27;d get out the JavaScript equivalent of the TypeScript you wrote. You wrote a <code>class</code>? TypeScript emits a <code>class</code>; just; one shorn of types and interfaces.</p><p>The TypeScript team made a different choice. They wrote the compiler such that the user could write ES6 style TypeScript syntax and have the TypeScript compiler transpile that down to ES5 or even ES3 syntax. This made TypeScript a much more interesting proposition than it already was, for a couple of reasons.</p><p>ES6 had been in the works for some time at this point. The release was shaping up to be the biggest incremental change to JavaScript that had so far happened. Or that would ever happen. Prior to this, JavaScript had experienced no small amount of tension and disagreement as it sought to evolve and develop. These played out in the form of the abandoned fourth edition of the language. There were arguments, harsh words, public disagreements and finally a failure to ship ECMAScript 4. In an alternate universe this was the end of the road for JavaScript. However, in our universe JavaScript got another throw of the dice.</p><p>It&#x27;s telling that ES5 was for a long time known also as ES3.1; reflecting that it was initially planned to be the stepping stone between ES3 and ES4. In reality it ended up being the stepping stone between ES3 and ES6. As it turned out, it was a vital one too, <a href="https://en.m.wikipedia.org/wiki/ECMAScript" target="_blank" rel="noopener noreferrer">it allowed the TC39 to recalibrate after a very public shelving of plans.</a></p><p>The band was back together (albeit with a new rhythm section) and ES6 was going to be <em>massive</em>. JavaScript was going to get new constructs such as <code>Map</code>, <code>Set</code>, new scoping possibilities with <code>let</code> and <code>const</code>, <code>Promise</code>s which paved the way for new kinds of async programming, the contentious <code>class</code>es‚Ä¶. And who can forget where they were when they first heard about &quot;fat&quot; arrow functions?</p><p>People salivated at the idea of it all. Such new shiny toys! But how could we use them? Whilst all this new hotness was on the way, where could you actually run your new style code? Complete browser implementations of ES6 wouldn&#x27;t start to materialise until 2018. Given the slowness of people to upgrade and the need to support the lowest common denominator of browser this could have meant that all the excitement was trapped in a never tomorrow situation.</p><p>Back to TypeScript. The team had a solution for this issue. In their wisdom, the TypeScript team allowed us to write ES6 TypeScript and the compiler could (with some limitations) transpile it down to ES3 JavaScript. The audacity of this was immense. The TypeScript team brought the future back to the past. What&#x27;s more, they made it work in Internet Explorer 6. Now that&#x27;s rock&#x27;n&#x27;roll. It&#x27;s nothing short of miraculous!</p><p>The significance of transpilation to TypeScript cannot be overstated.</p><p>You might be thinking to yourself, &quot;that&#x27;s just Babel, right?&quot; Right. It&#x27;s just that Babel didn&#x27;t exist then. 6to5 was still an idea waiting for Sebastian McKenzie to think of. Even if you were kind of &quot;meh&quot; on types, the attraction of using a tool which allowed you to use new JavaScript constructs without breaking your customers was a significant draw. People may have come for types, but once they&#x27;d experienced the joy of a lexically bound <code>this</code> in a fat arrow function they were <em>never</em> going back.</p><p>Success has many parents. TypeScript is a successful project. One reason for this is that it&#x27;s an excellent product that fills a definite need. Another reason is one that can&#x27;t be banked upon; timing. TypeScript has enjoyed phenomenal timing. Appearing just when JavaScript was going off like a rocket and having the twin benefits of types and future JS today when nothing else offered anything close, that&#x27;s perfect timing. It got people&#x27;s curiosity. Now it got Boris&#x27;s attention.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="definitely-typed"></a>Definitely Typed<a class="hash-link" href="#definitely-typed" title="Direct link to heading">#</a></h2><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIwAAACMCAIAAAAhotZpAAAAA3NCSVQICAjb4U/gAAAAX3pUWHRSYXcgcHJvZmlsZSB0eXBlIEFQUDEAAAiZ40pPzUstykxWKCjKT8vMSeVSAANjEy4TSxNLo0QDAwMLAwgwNDAwNgSSRkC2OVQo0QAFmJibpQGhuVmymSmIzwUAT7oVaBst2IwAACAASURBVHic7V15rK1XVV/r3HPvu7dv6nstLZQitFC1UMuoRoKiEEYHJCaGRA34h4Q4YCAqccKoMVoSxL8QRyASYzSoQQ0KsQRkxrZUZCxDy9DS1+G9vnfffXc8yz/2Xmv91t77+8537jv3vraye/q97+xv7TXsvdew1/72ubz0B3cQERExMZEIERMJMZEwERELiQKQEDGxkHCuT3W5ebMmwhfNazBH0V9PUGqcTeqIqh8G5e2RZd8IjaO8Vtq1/WBcNpMuyK5H0ksb63HYmi2kgaxXqIyrhEnViK2YIvtAaOzikpQdKUQce9BrVG2Q1xoe2gWhGNmq+CcKyCM8IgzEOBApeSuBkTe9QhOSbEmmzNZ9ITRmayHE2g12k68cuGG4RgsHTcjrOaHWQc7NRZE4GCdtd0KitXZftdKWyUaXfeYI0VwCn4rKONSapnSIDcseExoruOTeY4frHpmqBkes7mYq2qIEHWBMssDPvGrlMUsI97AuIh/7xsYdpyf5q89KHsf5XZSqUmDwpPF8F6y1sYhMlsa/+LxjP3FsQUSYOV2noxMhon7IGmF9P5Xc/Alt7bziX++7/fRG6BNhYhqDPeRsIE0tBA0f58raVxiAa3pum5U7G1IJOEzxnQIayn0qA8d+3wgV9iuNQjJ3buN8jNwiQQsGmwit9F+o57pGzWxCEh8VhDo0e/5lf0ZoNkLYG8xENEr1PaFFf3gzJfgZ1lCq67cK9sa4DqYDYHTwwRl1PK0Ku6FDMNEnMSIKPCKWYTMxWfkhkJlO5SQuNCHBjk3GZyxmWcA9CIflUKpv4FS3FUZB12DuztKYDlRJnQdWZrVIw3u5AH5QEBJ1CuDxx4x6pX1zcHl0yYWOfc8sjkiDqLmXGu2Qmv0jlFe9eSk1FrAzZvh+7AeOv+0ZK4aiOfJ7FBdZYPr3d2yRWpXhIfishPrv95+QFOGdiDCPyYxcdAw4vPVQJ+z7MM3TPV73lFB9fwEIifuXNC5jJtHES7Kd6kamLe7w6xxnX4HqQTLB940Qa2YvaUG6jm0s3c0riuLe1tg2bLnhvLWqQGVf50gCecZeu+CEmpTHzJ7gwYi6Zzadf1w0U9kj5I1Z/CAgBMORw4QUgsex029ds6nWpL0ue02onuAXkJAPRwjBiUOy1FM8M2jSnpb/V4R8t0b3ach2Zi3TaWvWZkSHQcTezbuEfHRu+5fedc/r9rjjfvZ5l/zmdx5I9z0S3X5i/affderu9T1VNbn/3KRSJCHicdpNl5Dg6UzCow7ttR964dXL7/+py84Hyalzk5/5x3tuX50QaXQKGfok/6kt7/ceibZ35M4zO3etS5rGIqKmyOdu+tZFKD71bJiI6C22zYokQkwy1sWt8TMowtkHfTp8YHRoic+T0DtefPGP/tPJk5vpW0p55b6pgYcQSm1tMJnci5d9WBOKCcw0CoBBEAkSGnft3UxVlP3Rp/Mk9NSrL7rhWZuvfN9q+ooGA5b1sxBSG0SQ6YRH2t8dhOoN7pBCwDEHQiMhnAJEopShUGvlX1znWOZIYsT8sqceecljFz2rEuQNZqNgoGDJ4NP/Gqg1Evc9hDpr4GoXIzQiYiFOoUO+2ceN0X0oiwcW3vico8eWTDQGkWddKjFJasUiyRqxGJ5UIx2EgFYGE4YOV3jDAIRGqQWJkF3rzZyHeHn0I1f+5SUXP+IAE0oqu5BUGh/vNGGsiYTEO7ZqmwAEMMTPOO1qF4xY6XekJ09v/v6HztyzMaOk/d1wZPy66y86uMBEJCN61KGFldEc0D79CYf+7Lk7P/MfZ9Z2Qng7G28h6vKMAImILjeLBiUhriCDywKzB4TGBpdfhZSg8D0jRETrG5N/+/y529csONT3TjyLq2/M6mDnV2czWOLbwVLi9x8+eppSoLU4eu7jl69cokc+ZuVVVx+4aHl0dDy4R6vy4icf+fmvbr7xfzcwmJq5WJ96z2iHFa/W1M7Ke0UfOwy2hXsiEhmH+MJDx5n4tmAHRclICw/ahdo8OOE029y58XNrIkK3rt2wQE967Mrzn7Dyy9evXLbE/drVYQD4155z9MY777vpvp0BUnWXHsuTv7P2YpzwMWIHRYPukUqtiEY5hmhFJLvhvWuzJAZI1HiEAGLVli+mHfn0l9fe9J77rvnTu1/9yXMbE+op0vFS3OGDSzd8/6HDi7RL71uyWkkEV53wQEgqJNldNeud0IiZmZg4Fxr8JoYVbhbyi4Eocr9ifdWciCkwx8zM22vbf/Xu+6592z3vumenv4+btvpZTzz0imsOOJ3dSUrVTbOifEqlMN4pPf3AI9HAQ0SEhGBZMFAMwUUFwY1jy/X4lQCSiuYaEpFYDBSRi9x598ZPvuPuX7l1fRMGwritb7Crf/VZh69Y4bgAGlQCe7W8JkuQInQOSdVd8AltgdCIhZmYhJmYhSnNXTXrQ8RIGOCTkrcJm+76iqIlI+FNKDThjFAScmKod/aI+Nzkze++90UfWF2b5Plk3Iq+M1VPOGa+7NLlX//ulcUFLt5IK+VqbJsGEUAWyoJLIRdXNdR4KqGGK0KgSXBTCDZ9fuGsUQXwkx4KQ/ZInKKAziAn2LB4SqSKOZEPfeTUC288c2q7nE/FDLOv6foT1x269thCf4gklWMDDGV3BcHF5IoSCXBey+toS0IjYv8vT7WpwxJLbkbQGlNh5Pde2Xnth6ECITPRRD5+0wMv//DZ1clQKkR0/OjSK687sLgwRZM4RomM0tFUWuEp4z1P7YdAaEQQc3tU4h7DZ199zZC+SrJLPUO1pgr/BCOfiLCoMRRek0zihN77kVO/95mN9Ykz38+2EL30iYeedHyhH7ht7ZHtsitK/lHPAoKABE1Og9CISKN5hk+qADvevHqxlFU2pBVOr7c3aLP7imB9V/VFDPf56c7O5C3vO/nXd24j510lAVxy8eJPXr3UI13RxCStPiARSZtzw5EWqcGXBem4NRwjVsel/aadOtjsYbygaDmSQ+QN99tdQ0QU/GqMMjSmICbeWt1+4/se+NS5gVwTEV//2JXh0FFY/bT8fIwCYAx9UlmHEMhV9o99RnX81zJWfaUKwc1QqDP1OojCQxNrg143M1J6Y4M0nrX+618/9/qbzq4NZ39htrRgvRIIPl8inxR48w6p5MVWjavIyHXR/N2MoYPOH2aNPtREsGsW1JmiYhN9jm5VZ13hbstWOewhZhb5z1vO/PPd55f16ZO0lNE5KcMCDvfaxW6kmMODgLgkNNJIkImoSi4NKkIsxKLZj/pDxVdJwPUVPnAiWwSfMmDztrYNvbm6/aZPrJ6YkovYZUH2ypu2FFQ81eU5RxiOHcUFoZHuLgklryZSZ9z7C+xPEVwFh50z8qQbupmVyZFvb3kIIhE/RT6NhHAYT2KSz3xp7a1f3Tr/IWlJWuziFXt8SWSJAEE6AkjfKzQpQm84oZEOHesiFt+zAP66baAI+/Iszg5yv6I39lXVxY232eZaBd38U6AlAKn4d9a2//zms1/bmm2q9ctIyEzBs7EBATXqB0IGea3DUZOKniQSSdGdmn5d0zZHolNm9w3BEqv5Nd+EENF4lzacoL72VgED1xiY+Wu3r73zru3ZhmhAKVhy79nkWe+jV3JB9SlNg0zRnS6uLF6aiXXXAY9yVCVilBfTHR70AJjOM3HFE6hHyBJDhhch4fWdt99y9uS8HZMSKsJLst6zGgw+4SlV9wgjIG8gNCKxoN7XHzV/xcywa3pIcUEAmVDTUk0+CkFlAMg1AvWiqy6J9WFhoTWSzXsi9KXb1z50sr3pNNWsdcEgaSNEQnpEBTkHDoVZ0mpPJZLMbYDJ17J/SHJaCGZJL7s4ax3Y/3W7SuGZIBXAphetz5gjpFis5+zpTDTwitDGuZ2339b3WnDXUE0bQicKfAo8CkJK2TnhXoBr8KyITYholGc/aaqBibqZRAH8HuIV/Qqr7FCvERIRxcU6foAG0va5FVsFNpzchD78lfVvzD0W54oQ3ASJIrx6/har4J9a3UUjCCJSATfRUQxOGZFqVkkxy11Z7avYfwkbTqZSRz3YMWdFZslhDgowQ3TqzvUb750MFKQHzCELAQobomIKMlz4JJQXYST7J8RmdynBimNvwV5fcTgsHK5c1Nht6xEXGszF1dUFXSFqVcDARETbm5MPf3OzXwoTZKq8wAgXhErtKaRtyoEGrLPr8tNxMWown/sMBeNGi+A/peXtAAp2u6qp0TUMekVIyuodefeXNzavX17skQQb9IoMABUh6D2oKZ/iD2BKA7ILWzyOiWVqCFTMxIzT+Ag1HPCnry2igVVrWDSnJomITStP37Px6Q1+6nK/KKVEfQAFOfzaJX7EkRC1ZaklEqJwHNNq07eOacXVWRSfFkiGQAyKN02GTISuwSsga/Fa+M89sPXh+7ef8qiFpiwlhamahDT6YYuhSqW/pkt2O47pDQrX1CqFT3IMBeGe+4JcpzeSttXuxwAAsiP/c+82XzHoxdfpmlQw08NJJ88g0eC2xQ/l+lAO1yS1qw2FF/hhXvuaAASsWLxPd6ICFaVtX6S0oWoud/ijX92Q7zrQlKVEPU2TQNIeftocR4kG2XqDGUcS8HMBgzUpxyFCeY6ALoefGRQNWtJkyr0qxIxgYazyFX58ShgRmseqfhrVh+yOU9sPMF/c3SWFXL0QtdVl4tZIwZVJ+5aAZ5rm1YDQSFcoQkS2ZEi3uErouqZWVIY9UsYttg7yCMlaEdaIY4tFWnlFrREyj6HiKOjO6vZXNvtWPwEZXJuQTqwiZDLonZBJpL2KaHzh5Eu8uERUQjnjkOe4fVrcd5aiYfPekwWsmupgzBEJN/yQcEko5QK5JERkK38mIpqc3vr86ZL/Iem76cJGQtMEjxLpbhI3W0VC9S9HNsajXyRVB1FdIIFZolpaJLFCqio8z9PPUUPqIrcRxONKJMoFJqhle0KfPTOvDXUx9mpCXdIRBelrVA7pbQOhsWlRspvlibIBhcn3UQuvqC8wCeX8t9iAa5hjj8JvTFB2cYaTw++CC+DBqwgBM2bX713vPYMxi6z5t3+pRcg8EMWwtPBPRPZDdma0Sik4EBrbvGQdxFkNQTCGMIVMFCGyWDDdMLosBBa8SnUFbwoJZ2zrczU/EprwF09s0XcuzShWh6xGuiLkPOicK+5Dh1A/ZCA01rydT/mmxespbDMrNGfS+Q/6RP61+kF6e38hNmHVm/JpaMtIgpSBXHnv3Mwdsl0R4rIPcwXKwh2QkeGC0Fj/eADDXyqZTZeEqIyM4d4pw6wnLpvkS1Ln9EVPpoqR4XRw0zCQGxExyvFfJhK6a07mzggiB3G2kKWyAudJUJModBFzOqDpbYsJz2OYfcxCUh+bn1Y63i6SONiKVjsUBlMqPAEhAEtVQ2rqDHODmVPrk3WiYQm8vqLyRHNXFq/nViXVEmmHCFHcFldzVyV24e/6DPuxGPGuq7PbmVFTgHwJTUD7gJnwc8p1t1StwEmVqGRdThI9KlvmAZmFfkmRdMEbApTzSrhDdjUK7A8joSILHlJLA4WBLHi5r6IuMrktSzKwbWDhPVmM6f8knuosOGTHJfnZZDTUP1JSTN0N3Z6cnUWibkmVVSNdEKJwn3lzl2P/QDQnnhGseyP/rQpY44aYiwbPuzILjgaX4iKotYsiRROxpAmrkKojdUyDEzrMUyWXmoic2iSaMb6rDUmWlEvSTqgyDSh1crCoMD75BLsLfBIRCY05vzqZR7j0JAOmHgtkS7NXY8l2U5nP70EKUxXV4VVDcO8F/W0KfxpboYyQyTXqGWTiK6vd6xPr7851EpKKq7omYarlLSVyQuNSXGOo2I+Ar3WCtX55RPujFSqKeGtBaIQpJUOQTIIjUL2TlpHLaHXr5KZHDvX2f5d0daqFC3kjIY9+mlOeQu8wNKr7AQmNSscnhcnoTK2GtKMmSVLrlFZ0MQRgAlp/BnRF+dCHBOQwD2NoHSlpPjTqyo5sl6Qr/juulcXLgrYJGf+Q53EZrZtLGO0aJA2ExmVnGJoBMljPOOWAo2TdeYXb0qGJhkFFbZQ5jFykUPDvs6WSqF86wFCi7iTkNg/4VKfNgICDRChjg1D2SekhbgARBA640Vdv+lloz0a6WMkQ6buZQp4yri2JnmaMuu25QTHIshi24m2K8Ah8UuC/Q7pmWhnjtAYhHIv6IBFKREFSLjBFQiOL9IgLfzK4aNZd8SC39sIVCem7tA5ZDIei8gMujiocFkH4KJrbUDu/Oqs4vcXmTJsQHGcpONeP71wEmEafOKHwIoqAMx++41JsfJWhU7HqxPDFqflzZ4M0i2KJ/IipQatA5TDzGqjKIhWE2Pn0+SQoSrjX16cdEhMOhtleRMlJTBk8NlbY/xc1mWZhjFC2nQYQEqyaiVR0GpamCeoaSQqJhGqcNaF5FYYtkyah9suO2hUBEvZaMjZNBkhBKL9mHP3v+Uhl6lFMuoIKBhgW1SWYNnUBxuq2sX6qmu2+iGNuE1I+TZYpEknoMYGnTmicbWqekbubdpbV1DS22mjXB06WO/32ItvVJ6KuCtS54+sl8AQgUZ3Y4M2ycf6VRt9hmyrGACvSUE4kVMs1TaLKHCBkJjSGTTj2/p1FDNvPA59jNQFQL2a8KTbUGkZU5Gaea/gCxkgjdZkcPXDpoJe6phRp3tZ8UrxiDwcE5ppALqlkzwlW9UiE/qTJZfNP/rgrcB+S4XPCMy/fldn8tQkmpnlaT8ahWu1+DGQ95M155Tx+F9QljSy1CAXeNLEM6VfIoKpEsGfagGRKvwuOyYFdlMIrCAngNIOLjsQgG2Y430Lz2u2gw4s8aw4AFuZCxEwrg140HlIkcB4JBYfsT0Pz8ouUj200jMrYonyNmtqlJ68F6SpLaIYlSpo3Nu3jbjpScJeC07WjXgC5bber0OCGmIQOjI5VsvSXLhitFfiO/cDY65gdJOeQCHug7KgaMrxm7O6C3NOU941SKQ0+KTyVcgZzjFszCpp30QOYTLq2+okQL4+OdUvRlcprgtYMUJBI+71EgBw2kZSQCDMWDzYI0+rFVEJvVHgmAZUSGBSf11mI9DWn39W7pHvBjBRnEt4z1WsrvuURWdItF3EXJixXLI9GPcox/E9vcrHzUBKKARrGudZMMKBLFfD6lr86j4TGpF0pUYXq2VTmg/1rNncQxaQ8KWOnur7oxldYmQMLQbdzDbQl3WCyJUbOMWYugMUcK12+3Pcna2tN6ipqasqRMkKwN1eou04ggwnTMvYG7MIlQuO4NcI6Facb7nD0RfQ2Xc33ERhesfeRNIZxF1luOQdCdX21oa4zsVjnMRHJiB956SIKVOhNU5PacazLWIyC+xRVaVzzuRyiXVFIAe4gYEu14zymOWXrPdE/s8IhMjGCnl/T/kJdAM2zPx6d3nwwMyiwpSveMNSH7dHUEgyhvyTJpK9VXH5oVAjUlK7bVADjsGFaEnKzkPjQjvEuMEORjV66T36T1cg4CduZTS+i+AYsDEPPICEARP6eg4+JgJBM8OxAfOSNKTaEWRkgazyGDTwDj/iqQwtDQrohR196CGFOISlEXHU6zyEorKWrZN+D45it2KdR34QBD9uA4QjZRFJRGTN/28poiM8Z9MpNzXMHKBhnvemv6ZJdaEyp33Xla29e9kyr1jsC5ET0L6RBwJODn1yJsRBeySJNm3Y+ObNBYULITKbAEKmPDo4fd3A0LHabZjyyFGwWFgkBn86tcaiGGSApQLojUzxGaExpBnlYZZ7Gp0r/zqw3xMgHd8FDRORgAtckjCtD3H1xA04axtVuKMEYTX3naOHw4lXLpZI03/vskg5BSCV1A6GErPdK46RPs/R5soojAh1KNRr/5OcW3QlZxK9iFFI1r4TRF4yPyU0aseTABLdRCJq4vcbuMMiwnMfX+RUmj2cI+0SE+fJj48uaG+GtJGQtXQki8bUkE5P1EXQ6SmONWOcd+CWVyEYyEhrrCgVmeerv4ZrkWXBgikijhxzqkN6IGb3SG0q9Agk4pZSdHJutOowQCxGN+NlXV3rUUQZoUgjLkJAqTI4/XZ2M58boqtHzftCYNhIaC+No+iwfrkmwmes6Y1jsthQalzQKhr7fmoffF8sAZU2BQZEwjeiaI6OBkeoATTK2C5UHPvOuFnMUuZEdRxMTkXMkZLk7z+ioiR2uSRSjE4FREV9sN756Qyn1p4Ys+WwSKhT6wMHFp188rtWi9Km9Hhdpd8RhNZ/FCNm1IVdNSd1bJjS28y6crbqU1KaVkDFkG7Ps81lNbFZ8FhHNgRHUqCvL3gbOJ2H/I0LxfEZajGP6MgOvHF96yqEZ5emRNLMEpE1MtdSWhiOUQtuD7KGLAA+6pExorLkGisozQwmNUP/ASXjEI61WsUJzzXnmZctdIbQ2uOsR7kb8tCsP4CbFeRdxviqSwKHfo7kJ5+FgMtfwHAmN1VIKxEuzjRVuLUJzVmKIHGhBVIGHKXMshw2lfRwTA6nmcUwZj5555VyOyqKsdRfVPOjeWKqgoj5AUiUXlf1D4zxk7iNm1iY1ZHBN1WHsfDFUAhdBnqKMlj/C1Bj8apNEDh5aeM4j5rFt3pbUCXVK5Jy3ZERJy5pAaOwLo7QLEB1iTzAKbHBCrh4tk8WlKusxN6UL6UVibcYoPvDZqrd0K1n47jWJn8setXzdwaEDMKQgUdclk8ISweBG1fVE3RftgYRW9GmY2E5oDNa9sJNEQ92UzahQU73X7c8F6ICJt41Pj3+0nuPT4iUIDPH138XR869ZORIZHTTnuoHLHIsCllIIU7RImX8pIQGDtXJIIxSOYxbbncOFUYRcqKKGN3mLRV+68ldmdIXHLm3+J+6+FBoOqa4EVB/HXD40fvGjy5+MnCk0agXuyoaRpuR4fT8M7zNv7mjDPcJw7g0ueoMsC+5mJHrE/LbXgNwwuhXDkMcuzHnsguAHzSAEwYTI9nulNghxjxSVkejRj17+3iM8k+oUpdVWLPUTDQ5FtsjAUMcL91waQJvqsPxIhMZkPkVXwbuQyV0DGFs1vKr7thzQr24JmaSoTwhj8zZkJJQZWlx46bUrx0aufOGljBktnudWyHP8oNhaqQogjat3Tt0tbXggNE5mRROTbu5gT497rolHZzfeqBaoUuoU8gAzLe9hWx10iBA/2mEX12eiCkBMREeOjn/0iiXkv+j6or5POgQLxslZEeiEis9OcxfkbbfNWPflOCbCQJvg7J2uKB/mXt2QKSFADa2M8Pdce/BphzpVp+sdrua1VDsVNJcQAUQ+S97akKkfEF7vndDD8DjmytHFVz1ppUjY9by/MHUWVuPURiWqCCWfuv0UfTBKhDI2CD3cjmMS8zOfdOi5xxcIfElRSv6/dRzTrpJGyjqcqeh8MVTWHFDleq7go2hHji2+9qkXrbRc0VyKzRn72NQi5BCk8L5ViRySoxShT5zQw+s45uLopd939NlH9mR4gMGqyphh5zO+v2WihPsMIw6JexCG+eFzHFOIn/D4g7/9xOV5ZusqWb91HDPBtKnXUR22JaLDx5du+MEjVw78uxRERPKpL68Nh0bSykBDn5VPk2WKRBJ6DOMIJzRK1tFsf/qbXzNyziTZ55A6n7y+FSIhfT1GN4TzIzfMLExC8PfLyJvbvRlyqdoSyfL4919w7EXHZziF9MVvrr/l0+HvOw+x8Iy9JMYD8FnyNkWiWhaAzIQeDscxZWn02hcc/9nHLi5w5aW6ymTy1lvOfu3sbDZDmrc1nxSv2MMBgbkmkEsq2R8GxzEnS6PXvPCS1197YHnUw3hZbv7K2t98bmNWs86RJbKhqPhE/s//OObYZ/ZufVHL01hm2CeRP6paeWPtZ4HmmHw0F5sQLh9ceN0LL3ntNUs2QkMyqusb23/0kdUT6zObdWMNeRbgB0Vjf9ohJJqVui0QeqgexxSixz1u5Q3PufhHLl9YiMo9xbVsT/76ptX3fGOLi+5pyduoz/8KfMd+YJx+ddoPmmsPlB1VQz4Ej2MK06XHl172jMOvvu6ibzswgL1Ybvz8mdd/cHV927ntSuU1ijRkpCCR9nuJwOPAMn1S0aiuD6njmMR01SOWfvjJh17+HcvXH9nNcfKzZzd/96NnV7dVJVXSriRQWb51HNNYCLrNtLS8cPWRhSuuXP6Fb1++/soDj1lqsze9TOSP/+uBm+7ewf4xVEMQqqkpR8qCMt0fL1XJXwgwmDAtY2+EfViiB9txTCE6cnDh8qWM+YeuO/TsSxcuOjx+9hVLB0fTurC3iMgHv3DmDbes7ySGCdzKw/s45tHDize84NjqVg/gjIXpqiuXv+/iEUPf5V2q3YWeWu65f/NV7z2zOcnLFttLxtKznaFVZK8lsfnV5DBiwi5FpZFQmc4zw2JvRCUYJzGX45gXLS/8+LVzfWmqg9D5IZD1rZ3XvPfUl1YlrNd2QUh96UPvOObcS/lmwfkR2t6RG957/zu/tNFay4cy5JUb/NIP2iDUX1OwB6jmcxxz7qV+AWF3ZWdn8ub33/+Hn9zQeZmDWSKi8K7CIEJsh5EeQscx90ir5qVJkx35iw+efN3HzsXdd5ywpROaJpEuX3D/TJOm1ntNQhoy0AU4jrlHWnXemiSbW/LmD9z/Gx8759ZB+8LRxYEYINFD8DjmXnsm7YGZCa1ubP/Wv5/8y89u5L+blF+sZp/lUnYjDdKkEJbpV4gPegg1RleNnive3hzH3AfPNCuhL3x97ef+/dQnTuzs5MgrC2WeFrv/f+9Y/6vt7ak4TzywubaTVnywZ0xEhOvAPkKN7LjGgGSQe3Ecc6990qwkNjYnb7/59B9+fO2u1QkIFUrsOLrx1jM33kq90VWNoIacTkivgscRakiocUJzOI75oCgiH/zyud/5wOlPnNje2skLSNnjU5IUAPaQ0ByOY17gIvKhO9bf9InV99+xq5OkKgAAAdxJREFUeWYT/nYfRljVvWANOhjyDqzh1Vsj+v0gNIfjmBeq3HV6+5avr7/pv8/efGJ7bWtSu9E8J+EFo/mektw3QnM4jrmvRei2e7e+eWbrT25eu+3ezdtOTgSdKXZg/hqviMiv9cpJOmrkghCax3HMOZUOWnL3mZ07z042tiZ/e+vq7auTT921ede5iQKzztXGcUyy7Zm9OSW5b4TaxzEfWN3+7L3TA9M9K5O/++TZzz2QI7TbTmx+5uQEeoXJFT4ZAohiW2DZ2qddLCBznqck940QH/iDr4LG4W3xJdGHBVn1tAUvthInW+ZVp9oaOLKfFdiEqYDg6nGUW6HQrpYrPhUuWYc+aS9D949Q+zimv+YmrmPhLQqbBkKouqbgRAof5jxQj37QDEIQTGjXxzEDo8VYGvLMKOCq7VLsQcNA+0io+zhm8TqPv/8fTC6xDqoxqCOmhld1X32ffVVHiWidEFXN25CRUOB4j09J7huhzuOYzaJPlZ2ycHGjWkD6CmaeQh5g7s1xTFBHhiZBCpQl3gMb7bZcfN9rQu3jmPmScq+4e52zsfkqal5EsCEJicdp9q/EN9dF4Fn6OCduEfxeHInpKoVWmbBRqsDsJZuyeY0wS123zYLuJ6H/A5e2m4eyf33jAAAAAElFTkSuQmCC"></p><p>Boris had been feeling unproductive. He would build applications in JS and watch them unaccountably break as he made simple tweaks to them. He was constantly changing things, breaking them, fixing them and hoping he hadn&#x27;t broken something else along the way. It was exhausting. He saw the promise in what TypeScript was offering and decided to give it a go.</p><p>It was great. He fired up Visual Studio and converted a <code>.js</code> file to end with the mystical TypeScript suffix of <code>.ts</code>. In front of his eyes, red squiggly lines started to appear here and there in his code. As he looked at the visual noise he could see this was TypeScript delivering on its promise. It was finding the bugs he hadn&#x27;t spotted. These migrations were also addictive; the more information you could feed the compiler, the more problems it found. Boris felt it was time to start writing type definitions, whatever they were.</p><p>Boris quickly learned how to write a type definition and set to work. Most libraries weren&#x27;t well documented and so he found himself reading the source code of libraries he used in order that he could write the definitions. At first, the definitions were just files dropped in his ASP.NET MVC projects that he copied around. That wasn&#x27;t going to scale; there needed to be somewhere he could go to grab type definitions when he needed them. And so on October 5th 2012 he created a repository under his profile at GitHub called &quot;DefinitelyTyped&quot;: <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/commit/647369a322be470d84f8d226e297267a7d1a0796" target="_blank" rel="noopener noreferrer">https://github.com/DefinitelyTyped/DefinitelyTyped/commit/647369a322be470d84f8d226e297267a7d1a0796</a></p><p>Boris took his type definitions and put them into this repository. Were you ever curious what the first definition added was? Close your eyes and think... You might imagine it was the (then number one JavaScript library on the web) jQuery. In fact it was Modernizr. Then Underscore followed, and then jQuery. Take a look:</p><p><a href="https://github.com/DefinitelyTyped/DefinitelyTyped/commits?after=4a4cf23ff4301835a45bb138bbb62bf5f0759255+699&amp;author=borisyankov" target="_blank" rel="noopener noreferrer">https://github.com/DefinitelyTyped/DefinitelyTyped/commits?after=4a4cf23ff4301835a45bb138bbb62bf5f0759255+699&amp;author=borisyankov</a></p><p><a href="https://1.bp.blogspot.com/-0DbMi8aGa1c/XZwdP4VnoKI/AAAAAAAAR9k/33evIreTYEA4KTuZnNnZ9KhlgEAgVrskQCPcBGAYYCw/s1600/Initial-CommitsDefinitelyTyped.png" target="_blank" rel="noopener noreferrer">![null](&lt;https://1.bp.blogspot.com/-0DbMi8aGa1c/XZwdP4VnoKI/AAAAAAAAR9k/33evIreTYEA4KTuZnNnZ9KhlgEAgVrskQCPcBGAYYCw/s640/Initial-CommitsDefinitelyTyped.png&gt; =640x191)</a>It wasn&#x27;t complicated; it was just a folder with subfolders underneath; each folder representing a project. One for jQuery, one for jQuery UI, one for Knockout.... You get the idea. It&#x27;s not so different now.</p><p>Boris had laid simple but dependable foundations. Definitely Typed had been born.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-do-you-test-a-type-definition"></a>How Do You Test a Type Definition?<a class="hash-link" href="#how-do-you-test-a-type-definition" title="Direct link to heading">#</a></h2><p>Boris was careful too. Right from the first type definition he added tests alongside them. Now tests for a type definition were a conundrum. How do you write a test for interfaces that don&#x27;t exist in the runtime environment? Code that is expunged as part of the compilation process. Well, the answer Boris came to was this: a compilation test.</p><p>Someone once said: compilation is the first unit test... But it&#x27;s a doozy. They&#x27;re right. The value you get from compilation, from a computer checking the assertions your code makes, is significant. Simply put, it takes a large amount of tests to get the same level of developer confidence. Computers are wonderful at attention to detail in a way that puts even the most anally retentive human being to shame.</p><p>So if Boris had written a definition called <code>mylib.d.ts</code>, he&#x27;d write a file that exercises this type definition. A <code>mylib.tests.ts</code> if you will. This file would contain code that exercises the type definition in the way that it should correctly be used. This is code that will never be executed in the way that tests normally are; a test program is never actually run. Rather these tests exist solely for compilation time. (In much the same way that TypeScript types only exist for compilation time.) Boris&#x27;s plan was this: no compilation errors in <code>mylib.tests.ts</code> represents passing tests. Compilation errors in <code>mylib.tests.ts</code> represents failing tests. It was functional, brutal and also beautiful in it&#x27;s simplicity.</p><p>So, imagine your definition looked like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">declare function turnANumberIntoAString (numberToMakeStringOutOf: number): string</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>You might write a compilation test that looks like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">const itIsAString: string = turnANumberIntoAString(42);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This test ensures that you can use your function in the way you&#x27;d expect. It returns the types you&#x27;d desire (a <code>string</code> in this case) and it accepts the parameters you&#x27;d expect (a single <code>number</code> for this example). If someone changed the definition in future, such that a different type was returned or a different set of parameters was required it would break the test. The test code wouldn&#x27;t compile anymore. That&#x27;s the nature of our &quot;test&quot;. It&#x27;s blunt but effective.</p><p>This is the very first test committed to Definitely Typed; a test for Modernizr.</p><p><a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/a976315cacbcfc151d5f57b25f4325dc7deca6f2/Tests/modernizr.ts" target="_blank" rel="noopener noreferrer">https://github.com/DefinitelyTyped/DefinitelyTyped/blob/a976315cacbcfc151d5f57b25f4325dc7deca6f2/Tests/modernizr.ts</a></p><p>This idea represents what tests look like throughout Definitely Typed today. They&#x27;re now &quot;run&quot; as part of Continuous Integration and type definitions are tested in concert with one another to ensure that a change to one type definition doesn&#x27;t break another. But there is nothing fundamentally different in place today to what Boris originally came up with.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="independence"></a>Independence<a class="hash-link" href="#independence" title="Direct link to heading">#</a></h2><p>Very quickly, Definitely Typed became a known project. People like Steve Fenton (author of the first book about TypeScript) were vocal supporters of the project. The TypeScript team talked up the project and were entirely supportive of its existence. In fact, at every given opportunity Anders Hejlsberg would sing its praises. For a while you could guarantee that any TypeScript talk by Anders would include a variant of &quot;this guy called Boris started a project called Definitely Typed&quot;. The impression he gave was that he was kind of amazed, and thoroughly delighted, the project existed.</p><p>The TypeScript team were completely uninvolved with Definitely Typed. That in itself is worth considering. The perception of Microsoft by developers generally in 2012 was at best, highly suspicious. &quot;Embrace, extend, extinguish&quot; - a strategy attributed to MS was very much a current perspective. This was born out in online comments and conversations at meetups. <a href="https://news.ycombinator.com/item?id=4597716" target="_blank" rel="noopener noreferrer">The Hacker News comments on the TypeScript release were a mixed bag.</a> The reaction on social media was rather less generous. Certainly it was harsh enough to prompt Scott Hanselman to write something of <a href="https://www.hanselman.com/blog/WhyDoesTypeScriptHaveToBeTheAnswerToAnything.aspx" target="_blank" rel="noopener noreferrer">a defence of TypeScripts right to exist</a>.</p><p>Given that TypeScript had arrived with the promise of transforming the JavaScript developer experience, the developer community was understandably cautious. Was Microsoft doing a good or ill? Could they be trusted? There were already signs that MS was changing. For example, it had been shipping open source libraries such as jQuery with ASP.Net MVC for some time. Microsoft was starting to engage with the world of open source software.</p><p>How Microsoft interacted with the (very open source driven) JS community was going to be key to the success (or not) of TypeScript. What happened with the establishment of Definitely Typed very much indicated TypeScripts direction of travel.</p><p>On day one of its existence, Boris took type definitions written by Microsoft and made them available via Definitely Typed. A ballsy move. It would have been completely possible for MS to object to this. They didn&#x27;t.</p><p>People like Diullei Gomes started submitting pull requests to improve the existing definitions and add new ones. Diullei even wrote the first command line tooling which allowed people to install type definitions: TSD. Within a surprisingly short period, DT had become the default home of type definitions on the web. There were briefly alternative Definitely Typed styled collections of type definitions elsewhere on GitHub but they didn&#x27;t last.</p><p>This all happened completely independently of the TypeScript team. Definitely Typed existing actually allowed TypeScript itself to prosper. It was worth persevering with this bleeding edge language because of the interoperability Definitely Typed was providing to the community. So the hands off attitude of MS was both surprising and encouraging. It showed trust of the community; something that hadn&#x27;t hitherto been a commonly noted characteristic of MS.</p><p>Boris started adding contributors to Definitely Typed to help him with the work. Definitely Typed was no longer a one man band, it had taken an important step. It was built and maintained by an increasing number of creative and generous people. All motivated by a simple aim: the best developer experience when working with TypeScript and existing JS libraries.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="basarat-ali-syed"></a>Basarat Ali Syed<a class="hash-link" href="#basarat-ali-syed" title="Direct link to heading">#</a></h2><p><img src="/assets/images/basarat-e926a480a3a806fad291682d3d18df93.jpg"></p><p>Basarat Ali Syed was a 27 year old who had recently moved to Melbourne, Australia from Pakistan. You might know of him for a number of reasons, not least being the TypeScript equivalent of Jon Skeet. That, incidentally, is not a coincidence. Basarat had watched Jon Skeet&#x27;s impressive work, being <em>the</em> gold standard in C# answers and thought &quot;there&#x27;s something worth emulating here&quot;.</p><p>Bas was working for a startup who had a JS frontend. About six months before TypeScript was announced to the world he watched Anders Hejlsberg do a presentation on JavaScript which included Anders saying to the audience &quot;don&#x27;t you just wish you had type safety?&quot; with a twinkle in his eye. TypeScript was of course well underway by this time; just not yet public. Bas remembered the comment and, when TypeScript was announced, he was ready. He made it his personal mission to be the goto person answering questions about TypeScript on Stack Overflow.</p><p>In those early days of TypeScript, if you put a question about TypeScript onto Stack Overflow there was a very good chance that Bas would answer it. And Bas was more helpful than your typical SO answerer. Not only would he provide helpful commentary and useful guidance, he would often find him answering &quot;yeah, the problem isn&#x27;t your code, it&#x27;s the type definition. It needs improvement. In fact, I&#x27;ve raised a PR to fix it here‚Ä¶&quot;</p><p>Boris saw the drip, drip of Basarat PRs turning into a flood. So, very quickly, he invited Basarat join Definitely Typed. Now Bas could not just suggest changes, he could ensure they were made. Step by step the quality of type definitions improved.</p><p>Basarat describes himself as a &quot;serial OSS contributor and mover on-er&quot;. It&#x27;s certainly true. As well as his Stack Overflow work, he&#x27;s been someone involved in the early days of any number of open source projects. Not just Definitely Typed. Bas also worked on the TypeScript port of the JavaScript task runner; Grunt TS. He met up with Pete Hunt (he of React) at a Decompress conference and together they hacked together a POC webpack TypeScript loader. (That POC ultimately lead to James Brantly creating ts-loader which I maintain.) Bas wrote the atom-typescript plugin which offers first class support for TypeScript in Atom. Not content with that he went on to write a full blown editor of his own called alm-tools.</p><p>This is not an exhaustive list of his achievements and already I&#x27;m tired. Besides this he wrote the TypeScript Deep Dive book and the VS Code TypeScript God extension. And more.</p><p>Bas had the level of self knowledge required to realise that getting others involved was key to the success of open source projects. Particularly given that he knew he had a predilection to eventually move on, to work on other things. So Bas kept his eyes open and welcomed in new maintainers for projects he was working on. Bas&#x27; actions in particular were to be crucial. Bas grew the Definitely Typed team; he invited others in, he got people involved.</p><p>On December 28th 2013 Basarat decided that a regular contributor to Definitely Typed might be a potential team member. Bas opened up Twitter and sent a Direct Message to John Reilly.</p><p><a href="https://4.bp.blogspot.com/-IZzAtFiDQi8/XZuNoLYhMBI/AAAAAAAAR7k/i-khpa5KpDUjocNFhEfDALsXLCuhlffMACPcBGAYYCw/s1600/2019-10-02%2B21_51_58-basarat%2B_%2BTwitter.png" target="_blank" rel="noopener noreferrer">![null](&lt;https://4.bp.blogspot.com/-IZzAtFiDQi8/XZuNoLYhMBI/AAAAAAAAR7k/i-khpa5KpDUjocNFhEfDALsXLCuhlffMACPcBGAYYCw/s640/2019-10-02%2B21<em>51_58-basarat%2B</em>%2BTwitter.png&gt; =640x371)</a>## John Reilly</p><p><img src="/assets/images/johnny_reilly-590bfe683f94ef3b006a3c7c1f17e6f5.jpg"></p><p>That&#x27;s me. Or <a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer">johnny_reilly on Twitter</a> and <a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer">johnnyreilly</a> on GitHub (as John Papa and I have learned to our chagrin; GitHub don&#x27;t support the &quot;_&quot; character in usernames). Relatively few people call me Johnny. I&#x27;m named that online because back when I applied for an email address, someone had already bagsied john_<a href="mailto:reilly@popularemailhotness.com." target="_blank" rel="noopener noreferrer">reilly@popularemailhotness.com.</a> So rather than sully my handle with a number or a middle name I settled for johnny_reilly. I haven&#x27;t looked back and have generally tried to keep that nom de plume wherever I lay my hat online.</p><p>In contrast to others I was a relatively late starter to TypeScript. I was intrigued right from the initial announcement, but held off from properly getting my hands dirty until generics was added to the language in 0.9. (This predisposition towards generics in a language perhaps explains why I didn&#x27;t get too far with Golang.)</p><p>At that point I was working in London for a private equity house. It was based in the historic and affluent area of St James. St James is an interesting part of London, caught midway between the Government, Buckingham Palace and the heart of the West End. It&#x27;s old fashioned, dripping with money and physically delightful. It&#x27;s the sort of place film crews dash towards when they&#x27;re called upon to show old fashioned London in all its pomp. It rocks.</p><p>My team hated JavaScript. Absolutely loathed it. I was the solo voice saying &quot;but it&#x27;s really cool!&quot; whilst they all but burned effigies of Brendan Eich in each code review. However, to my delight (and their abject horror) the project we were working on could only be implemented using JS. Essentially the house wanted an application offering rich interactivity which had to be a web app. So‚Ä¶ JS. We were coding then with a combination of jQuery and Knockout JS. And, in large part due to the majority of the team being unfamiliar with JS, we were shipping bugs. The kind of bugs that could be caught by a compiler. By static typing. Not to put too fine a point on it; by TypeScript.</p><p>So I proposed an experiment: &quot;Let&#x27;s take one screen and develop it with TypeScript. Let&#x27;s leave the rest of the app as is; JavaScript as usual. And then once we&#x27;re done with that screen let&#x27;s see how we feel about it. TypeScript might not be that great. But that&#x27;s fine, if it isn&#x27;t we&#x27;ll take the generated JS, keep that and throw away the TypeScript. Deal?&quot;</p><p>The team were on board and, one sprint review later, we decided that all future JS functionality would be implemented with TypeScript. We were in!</p><p>From day one of using TypeScript I was in love. I had the functionality of JavaScript, the future semantics of JavaScript and I was making less mistakes. Our team had become more productive. We were shipping faster and more reliably with fewer errors. People were noticing; our reputation as a team was improving, in part due to our usage of TypeScript. We had a jetpack.</p><p>However. I wasn&#x27;t satisfied. As I tapped away at my keyboard I found type definitions to be‚Ä¶ imperfect. And that niggled. Did it ever niggle. By then <a href="https://github.com/staxmanade" target="_blank" rel="noopener noreferrer">Jason Jarrett</a> had wired up Definitely Typed packages to be published out to Nuget. Devs using ASP.NET MVC 4 (as I then was) were busily installing type definitions alongside AutoFac and other dependencies. Whilst most of those dependencies arrived like polished diamonds, finished products ready to be plugged into the project and start adding value. The type definitions by contrast felt very beta. And of course, they were. TypeScript was beta. The definitions reflected the newness of the language.</p><p>I could make it better.</p><p>I started submitting pull requests. The first problem I decided to solve was IntelliSense. I wanted IntelliSense for jQuery. If you went to <a href="https://api.jquery.com" target="_blank" rel="noopener noreferrer">https://api.jquery.com</a> there was rich documentation for every method jQuery exposed. I wanted to see that documentation inside Visual Studio as I coded. If I keyed in <code>$.appendTo(</code> I wanted VS to be filled with the content from <a href="https://api.jquery.com/appendTo/" target="_blank" rel="noopener noreferrer">https://api.jquery.com/appendTo/</a> . That was my mission. For each overload of the method I&#x27;d add something akin to this to the type definition file:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * Insert every element in the set of matched elements to the end of the target.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param value A selector, element, HTML string, array of elements, or jQuery </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     *              object; the matched set of elements will be inserted at the end </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     *              of the element(s) specified by this parameter.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    appendTo(target: string): JQuery;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>It was a tedious task plugging it all in, but the pleasure I got from having rich IntelliSense in VS more than made up for it to me. Along the way I added and fixed sections of the jQuery API that hadn&#x27;t been implemented, or had been implemented incorrectly. It got to a point where jQuery was a good example of what a type definition should look like. That remains the case to this day; surprisingly few type definitions enjoy the JSDoc richness of jQuery. <a href="https://blog.johnnyreilly.com/2014/05/typescript-jsdoc-and-intellisense.html" target="_blank" rel="noopener noreferrer">I have tried to encourage more use of this with blog posts code reviews and the like, but it&#x27;s never got the traction I&#x27;d hoped.</a></p><p>I&#x27;m fairly relentless when I put my mind to something. I work very hard to make things come to pass. What this meant at one point was the Definitely Typed maintainers receiving multiple PRs a day. Which prompted Bas to wonder &quot;I wonder if he&#x27;d like to join us?&quot;</p><p>I happily accepted Bas&#x27; invitation and soon found myself reading this email:</p><blockquote><p>From: Bas</p><p>Sent: 28 December 2013 11:47</p><p>To: Boris Yankov; johnny_<a href="mailto:reilly@hotmail.com" target="_blank" rel="noopener noreferrer">reilly@hotmail.com</a>; Bas; vvakame; Bart van der Schoor; Diullei Gomes; steve fenton; Jason Jarret Subject: DefinitelyTyped team introduction</p><p>Dear All,</p><p>Meet John Reilly (github : <a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer">https://github.com/johnnyreilly</a> , twitter : <a href="https://twitter.com/johnny%5C_reilly" target="_blank" rel="noopener noreferrer">https://twitter.com/johnny\_reilly</a>) who will be helping with Definitely Typed definitions.</p><p>Boris manages the project and he can add you as a collaborator.</p><p>Additional team member introductions:</p><p>Admin : Boris Yankov</p><p>TSD package manager : <a href="https://github.com/DefinitelyTyped/tsd" target="_blank" rel="noopener noreferrer">https://github.com/DefinitelyTyped/tsd</a> : Diullei / Bart van der Schoor</p><p>NUGET: <a href="https://github.com/DefinitelyTyped/NugetAutomation" target="_blank" rel="noopener noreferrer">https://github.com/DefinitelyTyped/NugetAutomation</a> : Json Jarret</p><p>Passionate TypeScript users like yourself: Wakame, Myself and SteveFenton .</p><p>Cheers, Bas (Basarat)</p></blockquote><p>Some of those names you&#x27;ll recognise; some perhaps not. Jason Jarrett wrote the Nuget distribution mechanism for type definitions that ended up existing for far longer than anyone (least of all Jason) anticipated. Steve Fenton was largely a cheerleader for Definitely Typed in its early days. Diullei and Bart, amongst other things, worked on the initial command line tooling for DT: TSD.</p><p>After being powered up in Definitely Typed, my contributions only increased. Anything that I was using in my day to day work, I wanted to have an amazing TypeScript experience. I wanted the language to thrive and I was pretty sure I could help by trying to get users the best-in-class developer experience as they used JS libraries. I&#x27;ve always found good developer experience a strong motivation; the idea being, if someone loves their tools, they&#x27;ll do great work. The end customer (of whatever they&#x27;re building) gets a better product sooner. Great developer experience is a force multiplier for building software.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="policy-time"></a>Policy time<a class="hash-link" href="#policy-time" title="Direct link to heading">#</a></h2><p>TypeScript was now at version 0.9.1. Still very much beta. Back then every release was breaking. Breaking. Very much with a capital &quot;B&quot;.</p><p>TypeScript had, since the very early days, made a commitment to track the ECMAScript standard. All JavaScript is valid TypeScript. However, there was briefly a period where this might not have been so. One of the things people most remember from the initial release is that they could now write classes. These were already the standardised classes of ES6 but it almost wasn&#x27;t to be. For a brief period there had been consideration of doing something subtly different. In fact Anders would describe the TypeScript team&#x27;s journey towards embracing the standards as a tale tinged with regret. In doing so they&#x27;d had to say goodbye to a different implementation of classes which he&#x27;d preferred but which they&#x27;d ditched because they weren&#x27;t standard.</p><p>Alongside differences like this there were other delineations. Types had different names in the past which, as time went by, were renamed to align with standards. <code>boolean</code> was originally <code>bool</code> for instance; likely a reflection of Anders involvement with C#.</p><p>These sorts of changes, alongside any number of others, meant that each release of TypeScript sometimes entirely broke the definitions in Definitely Typed. Most notable was the 0.9.1 -&gt; 0.9.5 migration. This was both an exercise in serious pain endurance and also a testament to the already strong commitment to TypeScript that existed. The reason people were willing to put the effort in to keep these migrations going was because they believed it was worth it. They believed in TypeScript. This PR is testament to that: <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/pull/1385" target="_blank" rel="noopener noreferrer">https://github.com/DefinitelyTyped/DefinitelyTyped/pull/1385</a></p><p>A level of flux meant that for a long time Definitely Typed committed only to support the latest version of TypeScript and the latest version of packages therein. These days it&#x27;s not so brutal, but then it had to be as a matter of necessity.</p><p>The compiler was changing too fast and there were too few people involved to allow for any realistic alternative. As is often the case in software development, it was &quot;good enough&quot;. Any other choice would probably have increased the workload of maintainers to a point where the project would no longer be a going concern. It was a choice with downsides; trade-offs. But it was the choice that best served the future of Definitely Typed and TypeScript.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="masahiro-wakame"></a>Masahiro Wakame<a class="hash-link" href="#masahiro-wakame" title="Direct link to heading">#</a></h2><p><img src="/assets/images/masahiro_wakame-e05f5086575752951c370a4296f7b9ed.jpg"></p><p>Time passed. Autumn turned into winter, winter into spring. TypeScript reached 1.0. It wasn&#x27;t beta anymore. As each release came, the changes in the compiler became more gradual. This was a blessing for the Definitely Typed team. The projects popularity was ticking up and up. New definitions were added each day. The trickle of issues and PRs had become a stream, then a river. A river very much ready to burst its banks.</p><p>It was taking its toll. Inside Definitely Typed roles were shifting. Boris was starting to step back from day to day reviewing of PRs. New members were joining the project, like Igor Oleinikov. But the pace was insatiable.</p><p>Some people left the project entirely, burned out by the never ending issues and PRs. Basarat started contributing less, beginning to turn his attention to one of his many sidejams. Fortunately, it turned out that before Basarat stepped back, he had done a very fine thing. In Tokyo, Japan was a 28 year old developer named Masahiro Wakame.</p><p>Mas was using JS to build the web applications he worked on. But ECMAScript 5 wasn&#x27;t hitting the mark for him. For a time Masahiro used CoffeeScript (Jeremy Ashkenas Ruby style JS alternative). He liked it, but, as he put it: &quot;I was shooting my foot everyday&quot;. Looking out for that elusive solution he landed on Dart. It looked amazing. But it wasn&#x27;t ECMAScript. Masahiro worried he&#x27;d be locked in. He&#x27;d built some libraries and a testing framework using Dart. But he didn&#x27;t feel he could suggest that his company adopted it; it was too different and only he knew it. He was left with the &quot;what if I go under a bus?&quot; problem. If he left the company, his colleagues would find it hard to move away from using Dart. This made him very hesitant. He didn&#x27;t feel he could justify the choice.</p><p>Then Masahiro heard about TypeScript. Like Goldilocks and the three bears, this third language sounded just right. He loved the type safety. It also had a compelling proposition: the transpiled JS that TypeScript generated was human readable and idiomatic. Generating idiomatic JS as opposed to some kind of strange byte code was a goal of the language from the early days, as Anders Hejlsberg would repeatedly explain. This generation of &quot;real JS&quot; made test driving TypeScript a low risk proposition. One that appealed to the likes of Masahiro. No lock-in. You decide TypeScript isn&#x27;t for you? Fine. Take the generated JS files and shake the TypeScript dust off your sandals. Masahiro consequently went all in on TypeScript. This was his bet. And he was going to cover his bet by trying to make the ecosystem even stronger.</p><p>Masahiro started out trying to improve the testing framework in DT; sending in pull requests. Before too long, Basarat messaged him to say &quot;do you wanna become a committer?&quot; <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/pull/1358" target="_blank" rel="noopener noreferrer">Masahiro became a committer.</a></p><p>It turned out that MH had a special qualities that DT was going to sorely need: he was willing and able to review PR after PR, day after day. His stamina was incredible.</p><p>Whilst it may not have been obvious from the outside, by now Definitely Typed was a slightly troubled project. The speed at which issues and PRs landed was relentless. Anyone who had once set GitHub to &quot;watching&quot; for Definitely Typed soon unsubscribed. It was becoming unmanageable. And whilst almost everyone else in the project was in the process of burning out / moving on / stepping back and similar, Masahiro kept going. He kept showing up. He kept reviewing. He kept merging. At his peek he was spending 2 hours a day, every day, glued to his screen in Tokyo and reviewing PRs for GitHub. The pulse of Definitely Typed may have slowed. But Masahiro kept the heart beating.</p><p>As Masahiro kept the lights on, in a hotel room in Buenos Aires an Australian named Blake Embrey was making plans...</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="blake-embrey"></a>Blake Embrey<a class="hash-link" href="#blake-embrey" title="Direct link to heading">#</a></h2><p><img src="/assets/images/blake_embrey-a11b4d7d9c04ce6b5fb99954663adb24.jpeg"></p><p>Blake was a 21 year old Australian. He was a nomadic developer, travelling around the world and working remotely. He travelled from country to country armed with a suitcase and his trusty MacBook in search of WiFi. He found himself dialing into standups from caf√©s in Vietnam at 1am to provide Jira updates, coding from airports as he criss-crossed the globe. It was an unusual life.</p><p>A friend showed Blake TypeScript somewhere around the TypeScript 1.2 era. He was interested. He was mostly working on backend NodeJS at the time. He could see the potential that TypeScript had to help him. Around the TypeScript 1.5 era Blake started to take a really good look at what was possible. From his vantage point, there was good and there was also bad. And he thought he could help.</p><p>As a module author and developer, he loved TypeScript. It allowed him to write, publish and consume 100% type-safe JavaScript. Features like autocompletion, type validation and ES6 features became part of his typical workflow. It was so good!</p><p>However, one step in this development lifecycle was broken to his mind. The problem was module shaped. Yeah, modules. Wade into the controversy!</p><p>Thanks again to Basarat, Blake soon became a DT contributor. Of all the contributors to Definitely Typed, Blake was the first one who was looking hard at the module problem. This was because whilst he wanted TypeScript to solve the same problems as everyone else, he wanted to solve them in a world of package dependencies. He wanted to solve for Node.</p><p>Now it&#x27;s worth taking a moment to draw a comparison between web development then, and web development now. Because it&#x27;s changed. The phrase &quot;web development fatigue&quot; exists with good reason. Web development in 2014 as compared to web development in 2019 is a very different proposition. Historically, JavaScript has not had a good story around modularisation. The language meandered forwards without ever gaining an official approach to modularisation until ES6. So for twenty years, if you wanted to write a large JS application you had to think hard about how to solve this problem. And even when modules were nailed down it was longer still until module loading was standardised.</p><p>But that didn&#x27;t stop us. JavaScript apps were still being built on the frontend and the backend. On the frontend an approach to modularisation emerged called the Asynchronous Module Definition. It had some adoption but in the main that wasn&#x27;t how people rolled. The frontend was generally a sea of global variables. People would write programs that depended upon global variables and worked hard to make sure that they didn‚Äôt collide. Everything did this. Everything. Underscore? It was a global variable called <code>_</code>. jQuery? It was two global variables: <code>$</code> and <code>jQuery</code>. That&#x27;s just what people did. I&#x27;m a person. I did that. If you were there you probably did too.</p><p>On the server side, in Node JS land, a different standard had emerged: CommonJS. Unlike AMD, CommonJS was simply how the Node JS community worked. Everything was a CommonJS module. Alongside Node, npm was growing and growing. Exposing Node developers to a rich ecosystem of modules or packages that they could drop into their apps with merely a tap tap tap of <code>npm install super-cool-package</code> and then <code>var scp = require(&#x27;super-cool-package&#x27;)</code>.</p><p>And therein, as the Bard would have it, lay the rub. You see, in the frontend it was simpler. Uglier but simpler. By and large, the global variables were fine. They weren&#x27;t beautiful but they were functional. It may have impaired the development of frontend apps, but it certainly didn&#x27;t stop it.</p><p>And since a design goal of TypeScript was to meet JavaScript developers where they were and try and make their lives better, the initial focus of Definitely Typed was necessarily types that existed in the global namespace. So <code>jquery.d.ts</code> would declare global <code>$</code> and <code>jQuery</code> variables and underneath them all the jQuery methods and variables that were implemented. Alongside jQuery, maybe an application would have jQuery UI which would extend the <code>$</code> variable and add extra functionality. In addition maybe there&#x27;d be a couple of jQuery plugins in play too. (It&#x27;s worth saying that jQuery was the crack cocaine of web development back in the day. People just couldn&#x27;t get enough.)</p><p>TypeScript catered for this world by allowing type definitions to extend interfaces created by other definition files. The focus of most of the Definitely Typed contributors up to this point was frontend and hence DT was an ocean of global type definitions.</p><p>Of course, this is not what the frontend world looks like these days. The frontend now is all about npm thanks to tools like Browserify, webpack, Rollup and the like. Client and server side development is mighty similar these days. Or at least, it&#x27;s swimming in more of the same waters. There&#x27;s a good TypeScript story to tell about this as well. But there wasn&#x27;t always. Back to Blake.</p><p>Blake had published a bunch of modules on npm. But no one had ever been able to consume the type definitions from them. Why was that? Well, without delving into great detail it comes down to type definitions of a package generally conflicting with type definitions that a user installs themselves.</p><p>This essentially came down to how TSD worked and what Definitely Typed contained. TSD was a pretty simple tool; by and large it worked by copying files from Definitely Typed into a users project. The files copied would contain type definitions which contained global types. So even though you cared solely about external modules, because of Definitely Typed you found yourself installing globals alongside which lead to conflicts between different type definitions. Different type definitions punching it out whilst the TypeScript compiler stood in between ineffectually shouting &quot;leave it alone mate - it&#x27;s not worth it!&quot;</p><p>How could we have a world where external modules and global were treated distinctly? Blake had ideas‚Ä¶ Plan one was to rewrite TSD to support external modules; the type of modules that were standard in Node land. After working hard on that for some time, Blake came to conclusion that solving global variables alongside external modules was a hard problem. A very hard problem. And perhaps that just running with external modules, <a href="https://github.com/DefinitelyTyped/tsd/issues/150" target="_blank" rel="noopener noreferrer">a new start if you will, represented the best way forwards</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="typings"></a>Typings<a class="hash-link" href="#typings" title="Direct link to heading">#</a></h2><p><img src="/assets/images/typings-7d0446cdf52dd2a87f2e46b4742d73c2.jpg"></p><p>Blake made <a href="https://github.com/typings/typings" target="_blank" rel="noopener noreferrer">typings</a>. Typings was a number of things; it was a new command line tool to replace TSD, it was a new approach to distributing type definitions and it was a registry. But Typings was a registry which pointed out to the web. Typings installation was entirely decentralized and the typings themselves could be downloaded from almost anywhere - GitHub, NPM, Bower and even over HTTP or the filesystem. Those type definitions could be external modules or globals.</p><p>It was radical. From centralisation to decentralisation. As Blake described it:</p><blockquote><p>This decentralization solves the biggest pain point I see with maintaining DefinitelyTyped. How does an author of one typings package maintain their file in DefinitelyTyped when they get notifications on thousands of others? How do you make sure typings maintain quality when you have 1000s to review? The solution in typings is you don‚Äôt, the community does. If typings are incorrect, I can just write and install my own from wherever I want, something that TSD doesn‚Äôt really allow. There‚Äôs no merge or review process you need to wait for (300+ open pull requests!).</p><p>However, decentralization comes with the cost of discoverability. To solve this, a registry exists that maintains locations of where the best typing can currently be installed from, for any version. If there‚Äôs a newer typing, patches, or the old typing author has somehow disappeared, you can replace the entry with your own so people will be directed to your typings from now on.</p></blockquote><p>The world started to use Typings as the default CLI for type definitions. <code>typings.json</code> files started appearing in people&#x27;s repos. Typings allowed consumption of types both from the Typings registry and from Definitely Typed and so there was an easy on ramp for people to start using Typings.</p><p>Little by little, people started consuming type definitions that came from the typings registry rather than from Definitely Typed. Typings began to thrive whilst DT continued to choke. The community was beginning to diverge.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="the-typescript-team"></a>The TypeScript Team<a class="hash-link" href="#the-typescript-team" title="Direct link to heading">#</a></h2><p><img src="/assets/images/TypeScriptTeam-b65c524927428e172e058aeaef36b304.jpg"></p><p>Over in Seattle, the TypeScript team was thinking hard about the type definition ecosystem. About Definitely Typed and Typings. And about tooling and distribution.</p><p>At this point, there wasn&#x27;t a dedicated registry for type definitions. There was GitHub. By and large, all type definitions lived in GitHub. Since GitHub is a git based source control provider it was possible for it to be used as a makeshift registry. So that&#x27;s exactly what Definitely Typed and Typings were doing; piggy backing on GitHub and MacGyvering &quot;infrastructure&quot;. It worked.</p><p>There wasn&#x27;t a great versioning story. Definitely Typed just didn&#x27;t do versioning. The latest and greatest was supported. Nothing else. The Typings approach was more nuanced. It did have an approach for versioning. It supported it by dint of allowing a version number in the registry to point to a specific git hash in a repo. It was an elegant and smart approach. Blake Embrey was one sharp cat.</p><p>Innovative though it was, the decentralised Typings approach presented potential security risks as it pointed out to the web making auditing harder. Alongside this, The TypeScript team was pondering ways they could reduce friction for developers that wanted to use TypeScript.</p><p>By now, the JavaScript ecosystem had started to coalesce around npm as the registry du jour. Bower and jspm were starting to fade in popularity. NuGet (the .NET package manager) was no longer being encouraged as a place to house JS. npm was standard. TypeScript users found themselves using npm to install jQuery and reaching for tsd or Typings to install the associated type definitions. That&#x27;s two commands. With two package managers. Each with subtly different syntax. And then perhaps you had to fiddle with the <code>tsconfig.json</code> to get the compiler looking in the right places. It worked. But it didn&#x27;t feel ‚Ä¶. idiomatic. It didn&#x27;t feel like TypeScript was meeting their users where they were.</p><p>The likes of Daniel Rosenwasser, Mohamed Hegazy and Ryan Cavanaugh found themselves pondering the problem. Alongside this, they were thinking more about what a first class module support experience in TypeScript would look like, motivated in part by the critical mass around npm, which was entirely module / package based.</p><p>That wasn‚Äôt the only thing on their minds; there was also the testing story. Definitely Typed had a straightforward testing story due to being a real mega-repo. Everything lived together and could be tested together. Thanks to the hard work of the Definitely Typed team this was already in place; every PR spun up Travis and tested all the type definitions individually and in concert with one another. Typings didn‚Äôt have this. What‚Äôs more, it would be hard to build. The decentralised nature of Typings meant that you‚Äôd need to build infrastructure to crawl the Typings registry, download the type definitions and then perform the tests. It was non-trivial and unlikely to be speedy.</p><p>There was one more factor in play. The TypeScript team were aware that for the longest time they&#x27;d been working on the language. But they&#x27;d become distant from one of the most significant aspects of how the language was used. They weren‚Äôt well enough informed about the rough edges in the type definition space. They weren‚Äôt feeling their users pain. They needed to address this and really there was only one thing to do... It was time for the TypeScript team to start eating their own dogfood.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="a-plan-emerges"></a>A Plan Emerges<a class="hash-link" href="#a-plan-emerges" title="Direct link to heading">#</a></h2><p>The TypeScript team reached out to Blake Embrey and started to talk about ways forward. They started collaborating over Slack.</p><p><img src="/assets/images/typings_typescript_collaboration-ab6b1b1d4f3485953b7b9e6a391bd4a9.jpg"></p><p>The TypeScript team had also been in contact with the Definitely Typed team. They were, at this point, aware that Definitely Typed was being kept going mainly due to the hard graft of Masahiro Wakame. As Daniel observed ‚Äúvvakame was a champ‚Äù.</p><p>At this point I have to stick my own hand up and confess to thinking that Definitely Typed was not long for this world. Steve Ognibene (another DT member) and others were all feeling similarly. It seemed inevitable.</p><p><a href="https://1.bp.blogspot.com/-c9HAg6SjhoM/XZuUCF0ZYOI/AAAAAAAAR8s/_K-q62ccC54gjBr6JW1d7RAL1D_mYaLLgCPcBGAYYCw/s1600/steveognibe.png" target="_blank" rel="noopener noreferrer">![null](&lt;https://1.bp.blogspot.com/-c9HAg6SjhoM/XZuUCF0ZYOI/AAAAAAAAR8s/_K-q62ccC54gjBr6JW1d7RAL1D_mYaLLgCPcBGAYYCw/s640/steveognibe.png&gt; =640x542)</a>The TypeScript team were about to change that. After talking, thinking, thinking and talking they put together a plan. It was going to change TypeScript and change Definitely Typed. It was also going to effectively end Typings.</p><p>It‚Äôs worth saying at this point that the TypeScript team didn‚Äôt enter into this lightly. They were hugely impressed by Typings. It was, to quote Daniel Rosenwasser, ‚Äúan impressive piece of work‚Äù. It also had the most amazing command line experience. Everyone on the team felt that it was an incredible endeavour and had their proverbial hats off to Blake Embrey. But Definitely Typed had critical mass and, whilst it had known problems, they were problems that could be likely solved (or ameliorated) through automation. The Typings approach was very innovative, but it presented other issues which seemed harder to solve. The TypeScript team made a bet. They placed their money on Definitely Typed.</p><p>To remove friction in the type acquisition space they decided to change the compiler. It would now look out for a special scoped namespace on npm named @types. Type definitions from Definitely Typed would be published out to @types. They would land as type definition packages that matched the non @types package. This meant that TypeScript was now sharing the same infrastructure as the rest of the JS ecosystem: npm. And consequently, installation of a package like jQuery in a TypeScript workflow now looked like this: <code>npm install jquery @types/jquery</code>. One command, one tool, one registry.</p><p>They published their plans here: <a href="https://github.com/Microsoft/TypeScript/issues/9184" target="_blank" rel="noopener noreferrer">https://github.com/Microsoft/TypeScript/issues/9184</a></p><p>There was more. The TypeScript team had really enjoyed knowing that this open source project which ran completely independently from the TypeScript team existed. And whilst they were focused directly on the language that was reasonable. But with the changes that were being planned, TypeScript was about to start explicitly depending upon Definitely Typed. It had been unofficially true up until that point. But now it was different; TypeScript were going to automate publishing Definitely Typed packages to the special @types scope in npm which the TypeScript compiler gave preference to. TypeScript and Definitely Typed were going from dating to being engaged.</p><p>It was time for the TypeScript team to get involved.</p><p>The team committed to doing weekly rotations of a TypeScript team member working on Definitely Typed. Reviewing PRs, merging them and, crucially, helping with automation and testing.</p><p>TypeScript was now part of Definitely Typed. Definitely Typed was part of TypeScript.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="typescript-20--definitely-typed-20"></a>TypeScript 2.0 / Definitely Typed 2.0<a class="hash-link" href="#typescript-20--definitely-typed-20" title="Direct link to heading">#</a></h2><p>Blake was immensely disappointed. He&#x27;d put his heart and soul into Typings. It was a massive amount of work and he&#x27;d not only started a project, he&#x27;d started a community that he felt responsible for.</p><p>Although that work had arguably kickstarted the discussion of what the future of type acquisition in TypeScript should look like, Typings wouldn&#x27;t be coming along for the ride. It was a burner rocket, carrying the good ship TypeScript into outer orbit, dropping back to Earth once it&#x27;s job was done.</p><p>Very much, Blake had in mind all the people that had contributed to Typings. That all their work was going to be abandoned. He felt a sense of responsibility. It was both frustrating and heartbreaking.</p><p>When TypeScript 2.0 shipped, in the release announcement was the following statement: <a href="https://devblogs.microsoft.com/typescript/announcing-typescript-2-0/" target="_blank" rel="noopener noreferrer">https://devblogs.microsoft.com/typescript/announcing-typescript-2-0/</a></p><blockquote><p>We‚Äôd like to thank Blake Embrey for his work on Typings and helping us bring this solution forward.</p></blockquote><p>Blake really appreciated the recognition. In years to come Blake would come to feel that the decisions made were the right ones. That they lead to TypeScripts continued success and served the community well. But he has regrets. He says now &quot;I am disappointed we didn&#x27;t get to integrate the two philosophies for managing types. It hurt Typings registry contributors without a story in place, I didn‚Äôt want to let down and alienate potential contributors of type definitions.&quot;</p><p>A young Australian man had helped change the direction of TypeScript. It was time for him to take a well earned rest.</p><p>In the meantime, the TypeScript team was starting to get stuck into the work of giving Definitely Typed a make-over.</p><p><a href="https://3.bp.blogspot.com/--rEYhuJOjSw/XZuUpGM2eVI/AAAAAAAAR88/qXYMxPswi0cRXriaCx7nwlYCpMQdKHF1wCPcBGAYYCw/s1600/rotation.png" target="_blank" rel="noopener noreferrer"><img src="https://3.bp.blogspot.com/--rEYhuJOjSw/XZuUpGM2eVI/AAAAAAAAR88/qXYMxPswi0cRXriaCx7nwlYCpMQdKHF1wCPcBGAYYCw/s1600/rotation.png" alt="null"></a>At this point, Definitely Typed had more than 500 open pull requests. Most of which had been open for a very long time. The most urgent and pressing problem was getting that down. The TypeScript team committed to, in perpetuity, a weekly rotation where one team member would review PRs. This would, in future, mean that PRs were handled in a timely fashion and that the number of open PRs was generally kept beneath 100.</p><p>Alongside this, changes were being made to the TypeScript compiler. In large part these related to enabling automatic type acquisition through the @types scope. To make that work, the TypeScript team realised pretty quickly that many of the type definitions would not work as is. Ryan wrote up this report:</p><p><a href="https://2.bp.blogspot.com/-VixlEWrjrg8/XZuVk6o1LmI/AAAAAAAAR9M/yNYln8kGI08eKe4Foh7D4Nx9wwQ_RYq2gCPcBGAYYCw/s1600/RyansDefTypReport.png" target="_blank" rel="noopener noreferrer">![null](&lt;https://2.bp.blogspot.com/-VixlEWrjrg8/XZuVk6o1LmI/AAAAAAAAR9M/yNYln8kGI08eKe4Foh7D4Nx9wwQ_RYq2gCPcBGAYYCw/s640/RyansDefTypReport.png&gt; =640x380)</a>At this point in time there were around 1700 type definitions. Pretty much all of them required some massaging. Roughly speaking, with TS 2.0, the language was going to move from a name based type acquisition approach to a file based one. New features were added to TypeScript 2.0 such as the <code>export as namespace</code> syntax to support a type definition supporting both being used in modules (where there are <code>import</code> / <code>export</code>s) but also in script files (where there aren&#x27;t)</p><p>Ryan Cavanaugh put together scripts that migrated 1200 of the type definitions to TypeScript 2.0 syntax. The remaining 500 were delicately transitioned by hand by diligent TypeScript team members. It was a task of utter drudgery that still sparks flickers of PTSD in those who were involved. It was like being in the digital equivalent of a Dickensian workhouse.</p><p>This was one of the reasons why going with the centralised approach of Definitely Typed instead of the decentralised one of Typings was necessary. Because the TypeScript team were involved in DT they could help make things happen. They could do the hard work. In a decentralised world that wouldn&#x27;t be possible; everything would constantly be held up, waiting.</p><p>It took a long time to get the types 2.0 branch to a point where CI went green. All this time, merges we&#x27;re taking place between the master branch and the future one. It was hard, unglamorous work. As Ryan put it, &quot;I partied hard when CI went green for the first time on types 2.0.&quot;</p><p><a href="https://3.bp.blogspot.com/-8Y0e7jeMEgE/XZuWVTGTK9I/AAAAAAAAR9Q/VWVitGY2u6kgXRtYM4jJjgqyEstCANVlACLcBGAsYHQ/s1600/types20goinggreen.png" target="_blank" rel="noopener noreferrer">![null](&lt;https://3.bp.blogspot.com/-8Y0e7jeMEgE/XZuWVTGTK9I/AAAAAAAAR9Q/VWVitGY2u6kgXRtYM4jJjgqyEstCANVlACLcBGAsYHQ/s640/types20goinggreen.png&gt; =640x193)</a>The first and most obvious addition was the automation of TypeScript definitions being published out to npm.</p><p>Next came a solution for the &quot;notification flood&quot; issue. It was no longer feasible for a user to have Definitely Typed set up as &quot;watching&quot; in GitHub. That way lead an unstoppable deluge of information about issues and pull requests. The result of that was that users were generally unaware of changes / issues and so on. People, as much as they wanted to be, were becoming disconnected from the type definitions they were interested in in DT.</p><p>The solution for this problem was, as with so many problems, a bot. It would send notifications to the users who had historically worked on a type definition when someone sent a PR. This was hugely useful. It made it possible for people to become effective stewards of the type definitions they knew about. It meant people could effectively remain involved with DT; giving them targeted information. It was the solution to a communications problem.</p><p>As Ryan Cavanaugh put it when he looked back upon TypeScripts story, he had this to say: ‚ÄúDefinitely Typed is the best thing that could exist from our perspective‚Äù.</p><p>He was speaking from the perspective of a TypeScript team member. He could as well be speaking for the developer world at large. Definitely Typed is an organic monster of open source goodness; bringing types to the world thanks to nearly 10,000 contributors. Each person of which has donated at least an hour or their time for the greater good. Far more than that in many cases. It‚Äôs incredible. I‚Äôm glad I get to be part of it. I never would have guessed it would have turned out like this.</p></div><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/tags/type-script">TypeScript</a><a class="margin-horiz--sm" href="/tags/definitely-typed">Definitely Typed</a></div><div class="col text--right"><a aria-label="Read more about Definitely Typed: The Movie" href="/2019/10/08/definitely-typed-movie"><strong>Read More</strong></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_GeHD"><a href="/2019/09/14/coming-soon-definitely-typed">Coming Soon: Definitely Typed</a></h2><div class="margin-vert--md"><time datetime="2019-09-14T00:00:00.000Z" class="blogPostDate_fNvV">September 14, 2019 ¬∑ One min read</time></div><div class="avatar margin-vert--md"><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><div class="markdown"><p>A long time ago (well, 2012) in a galaxy far, far away (okay; Plovdiv, Bulgaria)....</p><p><a href="https://github.com/DefinitelyTyped/DefinitelyTyped" target="_blank" rel="noopener noreferrer">Definitely Typed</a> began!</p><p>This is a project that set out to provide type definitions for every JavaScript library that lacked them. An ambitious goal. Have you ever wondered what the story that lay behind it was?</p><p>Perhaps you know that the project was started by a shadowy figure named &quot;Boris Yankov&quot;. And maybe you know that the TypeScript team is now part of the Definitely Typed team. There&#x27;s a lot more to tell.</p><p>This autumn, I&#x27;d like to tell you the story of how Definitely Typed came to be what it is. From an individual commit in a repo that Boris created in 2012 to <a href="https://octoverse.github.com/projects" target="_blank" rel="noopener noreferrer">the number 10 project by contributions on GitHub in 2018</a>. I&#x27;m part of that story. Basarat Ali Syed is part of that story. Masahi Wakame too. Blake Embrey. Steve Fenton. Igor Oleinikov. It&#x27;s an amazing and unexpected tale. One that turns upon the actions of individuals. They changed your life and I&#x27;d love you to learn how.</p><p>So, coming soon to a blog post near you, is the story of Definitely Typed. It&#x27;s very exciting! Stay tuned...</p></div><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/tags/type-script">TypeScript</a><a class="margin-horiz--sm" href="/tags/definitely-typed">Definitely Typed</a></div><div class="col text--right"><a aria-label="Read more about Coming Soon: Definitely Typed" href="/2019/09/14/coming-soon-definitely-typed"><strong>Read More</strong></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_GeHD"><a href="/2019/08/17/symbiotic-definitely-typed">Symbiotic Definitely Typed</a></h2><div class="margin-vert--md"><time datetime="2019-08-17T00:00:00.000Z" class="blogPostDate_fNvV">August 17, 2019 ¬∑ 6 min read</time></div><div class="avatar margin-vert--md"><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><div class="markdown"><p>I did ponder calling this post &quot;how to enable a good TypeScript developer experience for npm modules that aren&#x27;t written in TypeScript&quot;... Not exactly pithy though.</p><p>Definitely Typed is the resource which allows developers to use TypeScript with existing JavaScript libraries that ship without their own type definitions.</p><p>DT began as a way to enable interop between JS and TS. When DT started, everything on npm was JavaScript. Over time it has become more common for libraries (eg <a href="https://github.com/mobxjs/mobx" target="_blank" rel="noopener noreferrer">Mobx</a> / <a href="https://github.com/angular/angular" target="_blank" rel="noopener noreferrer">Angular</a>) to be written (or rewritten) in TypeScript. For publishing, they are compiled down to JS with perfect type definitions generated from the TypeScript alongside the compiled JavaScript. These libraries do not need to exist in Definitely Typed anymore.</p><p>Another pattern that has emerged over time is that of type definitions being removed from Definitely Typed to live and be maintained alongside the libraries they support. An example of this is <a href="https://github.com/moment/moment" target="_blank" rel="noopener noreferrer">MomentJS</a>.</p><p>This week, I think for the first time, there emerged another approach. <a href="https://kentcdodds.com/" target="_blank" rel="noopener noreferrer">Kent C Dodds</a>&#x27; <code>react-testing-library</code> had started out with the MomentJS approach of hosting type definitions alongside the JavaScript source code. <a href="https://github.com/testing-library/react-testing-library/pull/437" target="_blank" rel="noopener noreferrer">Alex Krolic raised a PR which proposed removing the type definitions from the RTL repo in favor of having the community maintain them at DefinitelyTyped.</a></p><p>I&#x27;ll directly quote Kent&#x27;s explanation of the motivation for this:</p><blockquote><p>We were getting a lot of drive-by contributions to the TypeScript typings and many pull requests would either sit without being reviewed by someone who knows TypeScript well enough, or be merged by a maintainer who just hoped the contributor knew what they were doing. This resulted in a poor experience for TypeScript users who could experience type definition churn and delays, and it became a burden on project maintainers as well (most of us don&#x27;t know TypeScript very well). Moving the type definitions to DefinitelyTyped puts the maintenance in much more capable hands.</p></blockquote><p>I have to admit I was reticent about this idea in the first place. I like the idea that types ship with the package they support. It&#x27;s a good developer experience; users install your package and it works with TypeScript straight out of the box. However Alex&#x27;s PR addressed a real issue: what do you do when the authors of a package aren&#x27;t interested / equipped / don&#x27;t have the time to support TypeScript? Or don&#x27;t want to deal with the noise of TypeScript related PRs which aren&#x27;t relevant to them. What then?</p><p>Alex was saying, let&#x27;s not force it. Let the types and the library be maintained separately. This can and is done well already; React is a case in point. The React team does not work on the type definitions for React, that&#x27;s done (excellently) by a crew of dedicated React lovers in Definitely Typed.</p><p>It&#x27;s a fair point. The thing that was sad about this move was that the developer experience was going to have more friction. Users would have to <code>yarn add -D @testing-library/react</code> and then subsequently <code>yarn add -D @types/testing-library__react</code> to get the types.</p><p>This two step process isn&#x27;t the end of the world, but it does make it marginally harder for TypeScript users to get up and running. It reduces the developer joy. As a side note, this is made more unlovely by <code>@testing-library/react</code> being a scoped package. <a href="https://stackoverflow.com/questions/47296731/how-can-i-install-typescript-declarations-for-scoped-namespaced-packages-via-ty" target="_blank" rel="noopener noreferrer">Types for a scoped package have a quirky convention for publishing.</a> A fictional scoped package of <code>@foo/bar</code> would be published to npm as: <code>@types/foo__bar</code>. This is functional but non-obvious; it&#x27;s tricky to discover. A two step process instead of a one step process is a non-useful friction that it would be great to eliminate.</p><p>Fortunately, Kent and <a href="https://github.com/FredyC" target="_blank" rel="noopener noreferrer">Daniel K</a> had one of these moments:</p><p> <a href="https://4.bp.blogspot.com/-tmH5nbo_kGY/XG-8jmokKdI/AAAAAAAAN_U/umq24uPgdKAZgAlePU5teNs57i8RWOg7gCPcBGAYYCw/s1600/hang-on-lads-ive-got-a-great-idea.jpg" target="_blank" rel="noopener noreferrer">![null](&lt;https://4.bp.blogspot.com/-tmH5nbo_kGY/XG-8jmokKdI/AAAAAAAAN_U/umq24uPgdKAZgAlePU5teNs57i8RWOg7gCPcBGAYYCw/s640/hang-on-lads-ive-got-a-great-idea.jpg&gt; =640x271)</a>Kent suggested that at the same time as dropping the type definitions that were shipped with the library, we try making <code>@types/testing-library__react</code> a dependency of <code>@testing-library/react</code>. This would mean that people installing <code>@testing-library/react</code> would get <code>@types/testing-library__react</code> installed <em>automatically</em>. So from the developers point of view, it&#x27;s as though the type definitions shipped with the package directly.</p><p>To cut a long story short reader, that&#x27;s what happened. If you&#x27;re using <code>@testing-library/react</code> from 9.1.2 you&#x27;re getting Definitely Typed under the covers. This was <a href="https://github.com/testing-library/react-testing-library/pull/437#issuecomment-521763117" target="_blank" rel="noopener noreferrer">nicely illustrated by Kent</a> showing what the TypeScript consumption experience looked like before the Definitely Typed switch:</p><p><a href="https://1.bp.blogspot.com/-wJCLzg0uPuU/XVhqss-lXwI/AAAAAAAAQ48/SGCl9aEHGjUh1qE7OpyyY8MhqPkd2Rw4wCPcBGAYYCw/s1600/RTL-9.1.1.png" target="_blank" rel="noopener noreferrer">![null](&lt;https://1.bp.blogspot.com/-wJCLzg0uPuU/XVhqss-lXwI/AAAAAAAAQ48/SGCl9aEHGjUh1qE7OpyyY8MhqPkd2Rw4wCPcBGAYYCw/s640/RTL-9.1.1.png&gt; =640x385)</a>And here&#x27;s what it looked like after:</p><p><a href="https://4.bp.blogspot.com/-jeTQeQnKpVY/XVhrvq8D-0I/AAAAAAAAQ5E/tOieujozFZQ_pttgStAAj_zQwtpGl1AsgCLcBGAs/s1600/RTL-9.1.2.png" target="_blank" rel="noopener noreferrer">![null](&lt;https://4.bp.blogspot.com/-jeTQeQnKpVY/XVhrvq8D-0I/AAAAAAAAQ5E/tOieujozFZQ_pttgStAAj_zQwtpGl1AsgCLcBGAs/s640/RTL-9.1.2.png&gt; =640x403)</a>Identical! i.e it worked. I grant you this is one of the more boring before / after comparisons there is‚Ä¶ But hopefully you can see it demonstrates that this is giving us exactly what we need.</p><p>To quote Kent once more:</p><blockquote><p>By adding the type definitions to the dependencies of React Testing Library, the experience for users is completely unchanged. So it&#x27;s a huge improvement for the maintenance of the type definitions without any breaking changes for the users of those definitions.</p></blockquote><p>This is clearly an approach that&#x27;s useful; it adds value. It would be tremendous to see other libraries that aren&#x27;t written in TypeScript but would like to enable a good TypeScript experience for those people that do use TS also adopting this approach.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="update-use-a-loose-version-range-in-packagejson"></a>Update: Use a Loose Version Range in <code>package.json</code><a class="hash-link" href="#update-use-a-loose-version-range-in-packagejson" title="Direct link to heading">#</a></h2><p>When I <a href="https://twitter.com/johnny_reilly/status/1162843916661592064" target="_blank" rel="noopener noreferrer">tweeted this article</a> it prompted this helpful response from <a href="https://twitter.com/atcb" target="_blank" rel="noopener noreferrer">Andrew Branch</a> of the TypeScript team:</p><blockquote><p>&gt; use a loose version range This is my advice as well and should probably be mentioned in the article TBH.</p><p>‚Äî Kent C. Dodds (@kentcdodds) <a href="https://twitter.com/kentcdodds/status/1162876792287293440?ref_src=twsrc%5Etfw" target="_blank" rel="noopener noreferrer">August 18, 2019</a></p></blockquote><script src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><p>Andrew makes the useful point that if you are adding support for TypeScript via an <code>@types/...</code> dependency then it&#x27;s wise to do so with a loose version range. <a href="https://github.com/testing-library/react-testing-library/blob/c4ba755e42938018ec67dbc716037cfafca15e03/package.json#L46" target="_blank" rel="noopener noreferrer">In the case of RTL we did it like this:</a></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><div tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token property">&quot;@types/testing-library__react&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;^9.1.0&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>i.e. Any type definition with a version of <code>9.1</code> or greater (whilst still lower than <code>10.0.0</code>) is considered valid. You could go even looser than that. If you really don&#x27;t want to think about TypeScript beyond adding the dependency then a completely loose version range would do:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><div tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token property">&quot;@types/testing-library__react&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;*&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This will always install the latest version of the <code>@types/testing-library__react</code> dependency and (importantly) allow users to override if there&#x27;s a problematic <code>@types/testing-library__react</code> out there. This level of looseness is not really advised though. As in the scenario when a library (and associated type definitions) do a major release, users of the old major would get the wrong definitions by default when installing or upgrading (in range).</p><p>Probably the most helpful approach is the approach followed by RTL; fixing the major version but allowing all minor and patch releases <em>inside</em> a major version.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="update-2-further-discussions"></a>Update 2: Further Discussions!<a class="hash-link" href="#update-2-further-discussions" title="Direct link to heading">#</a></h2><p>The technique used in this blog post sparked an interesting conversation with members of the TypeScript team when it was applied to <code>&lt;a href=&quot;https://github.com/testing-library/jest-dom&quot;&gt;https://github.com/testing-library/jest-dom&lt;/a&gt;</code>. <a href="https://github.com/testing-library/jest-dom/issues/123#issuecomment-523586977" target="_blank" rel="noopener noreferrer">The conversation can be read here</a>.</p></div><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/tags/type-script">TypeScript</a><a class="margin-horiz--sm" href="/tags/react-testing-library">react-testing-library</a><a class="margin-horiz--sm" href="/tags/definitely-typed">Definitely Typed</a></div><div class="col text--right"><a aria-label="Read more about Symbiotic Definitely Typed" href="/2019/08/17/symbiotic-definitely-typed"><strong>Read More</strong></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_GeHD"><a href="/2018/09/15/ivan-drago-and-definitely-typed">Ivan Drago and Definitely Typed</a></h2><div class="margin-vert--md"><time datetime="2018-09-15T00:00:00.000Z" class="blogPostDate_fNvV">September 15, 2018 ¬∑ 5 min read</time></div><div class="avatar margin-vert--md"><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><div class="markdown"><p>This a tale of things that are and things that aren&#x27;t. It&#x27;s a tale of semantic versioning, the lack thereof and heartbreak. It&#x27;s a story of terror and failing builds. But it has a bittersweet ending wherein our heroes learn a lesson and understand the need for compromise. We all come out better and wiser people. Hopefully there&#x27;s something for everybody; let&#x27;s start with an exciting opener and see where it goes...</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="definitely-typed"></a>Definitely Typed<a class="hash-link" href="#definitely-typed" title="Direct link to heading">#</a></h2><p>This is often the experience people have of using type definitions from Definitely Typed:</p><p><a href="https://1.bp.blogspot.com/-mG6pw3oJA4E/W5tD5vgfD4I/AAAAAAAAMQQ/upV1w2nJw1whI7MGp9HI5pniFEbVTJNxACPcBGAYYCw/s1600/i-must-break-you.jpg" target="_blank" rel="noopener noreferrer"><img src="https://1.bp.blogspot.com/-mG6pw3oJA4E/W5tD5vgfD4I/AAAAAAAAMQQ/upV1w2nJw1whI7MGp9HI5pniFEbVTJNxACPcBGAYYCw/s1600/i-must-break-you.jpg" alt="null"></a>Specifically, people are used to the idea of semantic versioning and expect it from types published to npm by Definitely Typed. They wait in vain. <a href="https://blog.johnnyreilly.com/2017/02/typescript-types-and-repeatable-builds.html" target="_blank" rel="noopener noreferrer">I&#x27;ve written before about the Definitely Typed / @types semantic version compromise.</a> And I wanted to talk about it a little further as (watching the issues raised on DT) I don&#x27;t think the message has quite got out there. To summarise:</p><ol><li><p>npm is built on top of <a href="http://semver.org/" target="_blank" rel="noopener noreferrer">semantic versioning</a> and they <a href="https://docs.npmjs.com/getting-started/semantic-versioning" target="_blank" rel="noopener noreferrer">take it seriously</a>. When a package is published it should be categorised as a major release (breaking changes), a minor release (extra functionality which is backwards compatible) or a patch release (backwards compatible bug fixes).</p></li><li><p>Definitely Typed publishes type definitions to npm under the <code>@types</code> namespace</p></li><li><p>To make consumption of type definitions easier, the versioning of a type definition package will seek to emulate the versioning of the npm package it supports. For example, right now <code>&lt;a href=&quot;https://www.npmjs.com/package/react-router&quot;&gt;react-router&lt;/a&gt;</code>&#x27;s latest version is <code>4.3.1</code>. The corresponding type definition <code>&lt;a href=&quot;https://www.npmjs.com/package/@types/react-router&quot;&gt;@types/react-router&lt;/a&gt;</code>&#x27;s latest version is <code>4.0.31</code>. (It&#x27;s fairly common for type definition versions to lag behind the package they type.)</p><p>If there&#x27;s a breaking change to the <code>react-router</code> type definition then the new version published will have a version number that begins <code>&quot;4.0.&quot;</code>. If you are relying on semantic versioning this will break you.</p></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="i-couldnt-help-but-notice-your-pain"></a>I Couldn&#x27;t Help But Notice Your Pain<a class="hash-link" href="#i-couldnt-help-but-notice-your-pain" title="Direct link to heading">#</a></h2><p>If you&#x27;re reading this and can&#x27;t quite believe that @types would be so inconsiderate as to break the conventions of the ecosystem it lives in, I understand. But hopefully you can see there are reasons for this. In the end, being able to use npm as a delivery mechanism for versioned type definitions associated with another package has a cost; that cost is semantic versioning for the type definitions themselves. It wasn&#x27;t a choice taken lightly; it&#x27;s a pragmatic compromise.</p><p>&quot;But what about my failing builds? Fine, people are going to change type definitions, but why should I burn because of their choices?&quot;</p><p>Excellent question. Truly. Well here&#x27;s my advice: don&#x27;t expect semantic versioning where there is none. Use specific package versions. You can do that directly with your <code>package.json</code>. For example replace something like this: <code>&quot;@types/react-router&quot;: &quot;^4.0.0&quot;</code> with a specific version number: <code>&quot;@types/react-router&quot;: &quot;4.0.31&quot;</code>. With this approach it&#x27;s a specific activity to upgrade your type definitions. A chore if you will; but a chore that guarantees builds will not fail unexpectedly due to changing type defs.</p><p>My own personal preference is <a href="https://yarnpkg.com/lang/en/" target="_blank" rel="noopener noreferrer">yarn</a>. Mother, I&#x27;m in love with a <code>yarn.lock</code> file. It is the alternative npm client that came out of Facebook. It pins the exact versions of all packages used in your <code>yarn.lock</code> file and guarantees to install the same versions each time. Problem solved; and it even allows me to keep the semantic versioning in my <code>package.json</code> as is.</p><p>This has some value in that when I upgrade I probably want to upgrade to a newer version following the semantic versioning convention. I should just expect that I&#x27;ll need to check valid compilation when I do so. yarn even has it&#x27;s own built in utility that tells you when things are out of date: <code>yarn outdated</code>:</p><p><a href="https://1.bp.blogspot.com/-CMAE-6BZQjQ/W5yfpzZG_iI/AAAAAAAAMRU/GkH9ZDr_SmMIzLwO1dlwS0Y0bVqWkhXyQCPcBGAYYCw/s1600/Screenshot%2B2018-09-15%2B06.56.20.png" target="_blank" rel="noopener noreferrer">![null](&lt;https://1.bp.blogspot.com/-CMAE-6BZQjQ/W5yfpzZG_iI/AAAAAAAAMRU/GkH9ZDr_SmMIzLwO1dlwS0Y0bVqWkhXyQCPcBGAYYCw/s640/Screenshot%2B2018-09-15%2B06.56.20.png&gt; =640x159)</a>So lovely</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="you-were-already-broken---i-just-showed-you-how"></a>You Were Already Broken - I Just Showed You How<a class="hash-link" href="#you-were-already-broken---i-just-showed-you-how" title="Direct link to heading">#</a></h2><p>Before I finish I wanted to draw out one reason why breaking changes can be a reason for happiness. Because sometimes your code is wrong. An update to a type definition may highlight that. This is analogous to when the TypeScript compiler ships a new version. When I upgrade to a newer version of TypeScript it lights up errors in my codebase that I hadn&#x27;t spotted. Yay compiler!</p><p>An example of this is <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/pull/28868" target="_blank" rel="noopener noreferrer">a PR I submitted to DefinitelyTyped earlier this week</a>. This PR changed how <code>react-router</code> models the parameters of a <code>Match</code>. Until now, an object was expected; the user could define any object they liked. However, <code>react-router</code> will only produce <code>string</code> values for a parameter. <a href="https://github.com/ReactTraining/react-router/blob/34ff1f8077d95edf01e9d5ca8ea4708b8d0290e2/packages/react-router/modules/matchPath.js#L36" target="_blank" rel="noopener noreferrer">If you look at the underlying code it&#x27;s nothing more than an <code>exec</code> on a regular expression.</a></p><p>My PR enforces this at type level by changing this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><div tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">match</span><span class="token class-name operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token class-name constant" style="color:rgb(130, 170, 255)">P</span><span class="token class-name operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  params</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">P</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>To this</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><div tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">match</span><span class="token class-name operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">Params</span><span class="token class-name" style="color:rgb(255, 203, 107)"> </span><span class="token class-name keyword" style="color:rgb(255, 203, 107);font-style:italic">extends</span><span class="token class-name" style="color:rgb(255, 203, 107)"> </span><span class="token class-name punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token class-name" style="color:rgb(255, 203, 107)"> </span><span class="token class-name punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token class-name constant" style="color:rgb(130, 170, 255)">K</span><span class="token class-name" style="color:rgb(255, 203, 107)"> </span><span class="token class-name keyword" style="color:rgb(255, 203, 107);font-style:italic">in</span><span class="token class-name" style="color:rgb(255, 203, 107)"> </span><span class="token class-name keyword" style="color:rgb(255, 203, 107);font-style:italic">keyof</span><span class="token class-name" style="color:rgb(255, 203, 107)"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">Params</span><span class="token class-name punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token class-name operator" style="color:rgb(137, 221, 255)">?</span><span class="token class-name operator" style="color:rgb(137, 221, 255)">:</span><span class="token class-name" style="color:rgb(255, 203, 107)"> </span><span class="token class-name builtin" style="color:rgb(130, 170, 255)">string</span><span class="token class-name" style="color:rgb(255, 203, 107)"> </span><span class="token class-name punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token class-name" style="color:rgb(255, 203, 107)"> </span><span class="token class-name operator" style="color:rgb(137, 221, 255)">=</span><span class="token class-name" style="color:rgb(255, 203, 107)"> </span><span class="token class-name punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token class-name punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token class-name operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  params</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">Params</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>So any object definition supplied must have <code>string</code> values (and you don&#x27;t actually need to supply an object definition; that&#x27;s optional now).</p><p>I expected this PR to break people <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/issues/28894" target="_blank" rel="noopener noreferrer">and it did</a>. But this is a useful break. If they were relying upon their parameters to be types other than strings they would be experiencing some unexpected behaviour. In fact, it&#x27;s exactly this that prompted my PR in the first place. A colleague had defined his parameters as <code>number</code>s and couldn&#x27;t understand why they weren&#x27;t behaving like <code>number</code>s. Because they weren&#x27;t <code>number</code>s! And wonderfully, this will now be caught at compile time; not runtime. Yay!</p></div><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/tags/react-router">react-router</a><a class="margin-horiz--sm" href="/tags/definitely-typed">DefinitelyTyped</a><a class="margin-horiz--sm" href="/tags/ivan-drago">Ivan Drago</a><a class="margin-horiz--sm" href="/tags/type-script">TypeScript</a><a class="margin-horiz--sm" href="/tags/semantic-versioning">semantic versioning</a></div><div class="col text--right"><a aria-label="Read more about Ivan Drago and Definitely Typed" href="/2018/09/15/ivan-drago-and-definitely-typed"><strong>Read More</strong></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_GeHD"><a href="/2017/10/20/typescript-definitions-webpack-and-module-types">TypeScript Definitions, webpack and Module Types</a></h2><div class="margin-vert--md"><time datetime="2017-10-20T00:00:00.000Z" class="blogPostDate_fNvV">October 20, 2017 ¬∑ 4 min read</time></div><div class="avatar margin-vert--md"><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><div class="markdown"><p>A funny thing happened on the way to the registry the other day. Something changed in an npm package I was using and confusion arose. You can read my unfiltered confusion <a href="https://github.com/Microsoft/TypeScript/issues/18791" target="_blank" rel="noopener noreferrer">here</a> but here&#x27;s the slightly clearer explanation.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="the-tldr"></a>The TL;DR<a class="hash-link" href="#the-tldr" title="Direct link to heading">#</a></h2><p>When modules are imported, your loader will decide which module format it wants to use. CommonJS / AMD etc. The loader decides. It&#x27;s important that the export is of the same &quot;shape&quot; regardless of the module format. For 2 reasons:</p><ol><li>You want to be able to reliably use the module regardless of the choice that your loader has made for which export to use.</li><li>Because when it comes to writing type definition files for modules, there is support for a <em>single</em> external definition. Not one for each module format.</li></ol><p><a href="https://2.bp.blogspot.com/-3yKFfse82vg/Wen3PsVsN6I/AAAAAAAAG1Q/OudrhuBvVs0BdzXt67OyMtxRB8peLwbeACPcBGAYYCw/s1600/one-definition-to-rule-them-all.jpg" target="_blank" rel="noopener noreferrer"><img src="https://2.bp.blogspot.com/-3yKFfse82vg/Wen3PsVsN6I/AAAAAAAAG1Q/OudrhuBvVs0BdzXt67OyMtxRB8peLwbeACPcBGAYYCw/s1600/one-definition-to-rule-them-all.jpg" alt="null"></a>## The DR</p><p>Once upon a time we decided to use <a href="https://github.com/MikeMcl/big.js/" target="_blank" rel="noopener noreferrer">big.js</a> in our project. It&#x27;s popular and my old friend <a href="https://twitter.com/nycdotnet" target="_blank" rel="noopener noreferrer">Steve Ognibene</a> apparently originally wrote the type definitions which can be found <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types/big.js" target="_blank" rel="noopener noreferrer">here</a>. Then the definitions were updated by <a href="https://github.com/googol" target="_blank" rel="noopener noreferrer">Miika H√§nninen</a>. And then there was pain.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="umd--commonjs-and-global-exports-oh-my"></a>UMD / CommonJS **and** Global exports oh my!<a class="hash-link" href="#umd--commonjs-and-global-exports-oh-my" title="Direct link to heading">#</a></h2><p>My usage code was as simple as this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports operator" style="color:rgb(137, 221, 255)">*</span><span class="token imports"> </span><span class="token imports keyword module" style="font-style:italic">as</span><span class="token imports"> </span><span class="token imports maybe-class-name">BigJs</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;big.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> lookABigJs </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">BigJs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>If you execute it in a browser it works. It makes me a <code>Big</code>. However the TypeScript compiler is **not** happy. No siree. Nope. It&#x27;s bellowing at me:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><div tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">ts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token maybe-class-name">Cannot</span><span class="token plain"> use </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;new&#x27;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">with</span><span class="token plain"> an expression whose </span><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">lacks</span><span class="token plain"> a call or construct signature</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>So I think: &quot;Huh! I guess Miika just missed something off when he updated the definition files. No bother. I&#x27;ll fix it.&quot; I take a look at how <code>big.js</code> exposes itself to the outside world. At the time, thusly:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//AMD.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">typeof</span><span class="token plain"> define </span><span class="token operator" style="color:rgb(137, 221, 255)">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;function&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> define</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">amd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">define</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token maybe-class-name">Big</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Node and other CommonJS-like environments that support module.exports.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">typeof</span><span class="token plain"> module </span><span class="token operator" style="color:rgb(137, 221, 255)">!==</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;undefined&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">exports</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token maybe-class-name">Big</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">exports</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">Big</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token maybe-class-name">Big</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//Browser.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        global</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">Big</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token maybe-class-name">Big</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Now, we were using webpack as our script bundler / loader. webpack is supersmart; it can take all kinds of module formats. So although it&#x27;s more famous for supporting CommonJS, it can roll with AMD. That&#x27;s exactly what&#x27;s happening here. When webpack encounters the above code, it goes with the AMD export. So at runtime, <code>import * as BigJs from &#x27;big.js&#x27;;</code> lands up resolving to the <code>return Big;</code> above.</p><p>Now this turns out to be super-relevant. I took a look at the relevant portion of the definition file and found this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token maybe-class-name">Big</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">BigConstructor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Which tells me that <code>Big</code> is being exported as a subproperty of the module. That makes sense; that lines up with the <code>module.exports.Big = Big;</code> statement in the the big.js source code. There&#x27;s a &quot;gotcha&quot; coming; can you guess what it is?</p><p>The problem is that our type definition is not exposing <code>Big</code> as a default export. So even though it&#x27;s there; TypeScript won&#x27;t let us use it. What&#x27;s killing us further is that webpack is loading the AMD export which <em>doesn&#x27;t</em> have <code>Big</code> as a subproperty of the module. It only has it as a default.</p><p><a href="https://twitter.com/kitsonk" target="_blank" rel="noopener noreferrer">Kitson Kelly</a> expressed the problem well when he said:</p><blockquote><p>there is a different shape depending on which loader is being used and I am not sure that makes a huge amount of sense. The AMD shape is different than the CommonJS shape. While that is technically possible, that feels like that is an issue.</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="one-definition-to-rule-them-all"></a>One Definition to Rule Them All<a class="hash-link" href="#one-definition-to-rule-them-all" title="Direct link to heading">#</a></h2><p>He&#x27;s right; it is an issue. From a TypeScript perspective there is no way to write a definition file that allows for different module &quot;shapes&quot; depending upon the module type. If you really wanted to do that you&#x27;re reduced to writing multiple definition files. That&#x27;s blind alley anyway; what you want is a module to expose itself with the same &quot;shape&quot; regardless of the module type. What you want is this:</p><p><code>AMD === CommonJS === Global</code></p><p>And that&#x27;s what we now have! Thanks to <a href="https://github.com/mikemcl" target="_blank" rel="noopener noreferrer">Michael McLaughlin</a>, author of big.js, <a href="https://github.com/MikeMcl/big.js/pull/87#issuecomment-332663587" target="_blank" rel="noopener noreferrer">version 4.0 unified the export shape of the package</a>. Miika H√§nninen submitted another <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/pull/20096" target="_blank" rel="noopener noreferrer">PR</a> which fixed up the type definitions. And once again the world is a beautiful place!</p></div><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/tags/amd">AMD</a><a class="margin-horiz--sm" href="/tags/definitely-typed">DefinitelyTyped</a><a class="margin-horiz--sm" href="/tags/type-script">TypeScript</a><a class="margin-horiz--sm" href="/tags/common-js">CommonJS</a></div><div class="col text--right"><a aria-label="Read more about TypeScript Definitions, webpack and Module Types" href="/2017/10/20/typescript-definitions-webpack-and-module-types"><strong>Read More</strong></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_GeHD"><a href="/2015/09/23/authoring-npm-modules-with-typescript">Definitely Typed Shouldn&#x27;t Exist</a></h2><div class="margin-vert--md"><time datetime="2015-09-23T00:00:00.000Z" class="blogPostDate_fNvV">September 23, 2015 ¬∑ 11 min read</time></div><div class="avatar margin-vert--md"><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><div class="markdown"><p>OK - the title&#x27;s total clickbait but stay with me; there&#x27;s a point here.</p><p> I&#x27;m a member of the Definitely Typed team - and hopefully I won&#x27;t be kicked out for writing this. My point is this: <code>.d.ts</code> files should live with the package they provide typing information for, in npm / GitHub etc. Not separately. TypeScript 1.6 has just been released. Yay! In the <a href="http://blogs.msdn.com/b/typescript/archive/2015/09/16/announcing-typescript-1-6.aspx" target="_blank" rel="noopener noreferrer">release blog post</a> it says this:</p><blockquote><p>We‚Äôve changed module resolution when doing CommonJS output to work more closely to how Node does module resolution. If a module name is non-relative, we now follow these steps to find the associated typings:</p><ol><li>Check in <code>node_modules</code> for <code>&amp;lt;module name&amp;gt;.d.ts</code></li><li>Search <code>node_modules\&amp;lt;module name&amp;gt;\package.json</code> for a <code>typings</code> field</li><li>Look for <code>node_modules\&amp;lt;module name&amp;gt;\index.d.ts</code></li><li>Then we go one level higher and repeat the process</li></ol><p><strong>Please note:</strong> when we search through node_modules, we assume these are the packaged node modules which have type information and a corresponding <code>.js</code> file. As such, we resolve only <code>.d.ts</code> files (not <code>.ts</code> file) for non-relative names.</p><p>Previously, we treated all module names as relative paths, and therefore we would never properly look in node_modules... We will continue to improve module resolution, including improvements to AMD, in upcoming releases.</p></blockquote><p>The TL;DR is this: consuming npm packages which come with definition files should JUST WORK‚Ñ¢... npm is now a first class citizen in TypeScriptLand. So everyone who has a package on npm should now feel duty bound to include a <code>.d.ts</code> when they publish and Definitely Typed can shut up shop. Simple right?</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="wrong"></a>Wrong!<a class="hash-link" href="#wrong" title="Direct link to heading">#</a></h2><p>Yeah, it&#x27;s never going to happen. Surprising as it is, there are many people who are quite happy without TypeScript in their lives (I know - mad right?). These poor unfortunates are unlikely to ever take the extra steps necessary to write definition files. For this reason, there will probably <em>always</em> be a need for a provider of typings such as Definitely Typed. As well as that, the vast majority of people using TypeScript probably don&#x27;t use npm to manage dependencies. There are, however, an increasing number of users who are using npm. Some (like me) may even be using tools like <a href="http://browserify.org/" target="_blank" rel="noopener noreferrer">Browserify</a> (with the <a href="https://github.com/smrq/tsify" target="_blank" rel="noopener noreferrer">TSIFY plugin</a>) or <a href="https://webpack.github.io/" target="_blank" rel="noopener noreferrer">WebPack</a> (with the <a href="https://github.com/jbrantly/ts-loader" target="_blank" rel="noopener noreferrer">TS loader</a>) to bring it all together. My feeling is that, over time, using npm will become more common; particularly given the improvements being made to module resolution in the language.</p><p>An advantage of shipping typings with an npm package is this: those typings should accurately describe their accompanying package. In Definitely Typed we only aim to support the latest and greatest typings. So if you find yourself looking for the typings of an older version of a package you&#x27;re going to have to pick your way back through the history of a <code>.d.ts</code> file and hope you happen upon the version you&#x27;re looking for. Not a fantastic experience.</p><p>So I guess what I&#x27;m saying is this: if you&#x27;re an npm package author then it would be fantastic to start shipping a package with typings in the box. If you&#x27;re using npm to consume packages then using Definitely Typed ought to be the second step you might take after installing a package; the step you only need to take if the package doesn&#x27;t come with typings. Using DT should be a fallback, not a default.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="authoring-npm-modules-with-typescript"></a>Authoring npm modules with TypeScript<a class="hash-link" href="#authoring-npm-modules-with-typescript" title="Direct link to heading">#</a></h2><p>Yup - that&#x27;s what this post is actually about. See how I lured you in with my mild trolling and pulled the old switcheroo? That&#x27;s edutainment my friend. So, how do we write npm packages in TypeScript and publish them with their typings? Apparently Gandhi <a href="http://www.nytimes.com/2011/08/30/opinion/falser-words-were-never-spoken.html?_r=0" target="_blank" rel="noopener noreferrer">didn&#x27;t actually say</a> &quot;Be the change you wish to see in the world.&quot; Which is a shame. But anyway, I&#x27;m going to try and embrace the sentiment here.</p><p>Not so long ago I wrote a small npm module called <a href="https://www.npmjs.com/package/globalize-so-what-cha-want" target="_blank" rel="noopener noreferrer">globalize-so-what-cha-want</a>. It is used to determine what parts of Globalize 1.x you need depending on the modules you&#x27;re planning to use. It also, contains a little demo UI / online tool written in React which powers <a href="http://johnnyreilly.github.io/globalize-so-what-cha-want/" target="_blank" rel="noopener noreferrer">this</a>.</p><p>For this post, the purpose of the package is rather irrelevant. And even though I&#x27;ve just told you about it, I want you to pretend that the online tool doesn&#x27;t exist. Pretend I never mentioned it.</p><p>What is relevant, and what I want you to think about, is this: I wrote globalize-so-what-cha-want in plain old, honest to goodness JavaScript. Old school.</p><p><a href="https://www.youtube.com/watch?v=V4YPFHyGWaY&amp;feature=youtu.be&amp;t=49s" target="_blank" rel="noopener noreferrer">But, my love of static typing could be held in abeyance for only so long.</a> Once the initial package was written, unit tested and published I got the itch. THIS SHOULD BE WRITTEN IN TYPESCRIPT!!! Well, it didn&#x27;t have to be but I wanted it to be. Despite having used TypeScript since the early days I&#x27;d only been using it for front end work; not for writing npm packages. My mission was clear: port globalize-so-what-cha-want to TypeScript and re-publish to npm.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="port-port-port"></a>Port, port, port!!!<a class="hash-link" href="#port-port-port" title="Direct link to heading">#</a></h2><p>At this point globalize-so-what-cha-want consisted of a single <code>index.js</code> file in the root of the package. My end goal was to end up with that file still sat there, but now generated from TypeScript. Alongside it I wanted to see a <code>index.d.ts</code> which was generated from the same TypeScript.</p><p><code>index.js</code><a href="https://github.com/johnnyreilly/globalize-so-what-cha-want/tree/6cce84289134a555fe8462247b43eddb051303e3" target="_blank" rel="noopener noreferrer">before</a> looked like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* jshint varstmt: false, esnext: false */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DEPENDENCY_TYPES</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token constant" style="color:rgb(130, 170, 255)">SHARED_JSON</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Shared JSON (used by all locales)&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token constant" style="color:rgb(130, 170, 255)">LOCALE_JSON</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Locale specific JSON (supplied for each locale)&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> moduleDependencies </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;core&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    dependsUpon</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    cldrGlobalizeFiles</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr/event.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr/supplemental.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;globalize.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    json</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> dependencyType</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DEPENDENCY_TYPES</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">SHARED_JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> dependency</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr/supplemental/likelySubtags.json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;currency&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    dependsUpon</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;number&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;plural&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    cldrGlobalizeFiles</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;globalize/currency.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    json</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> dependencyType</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DEPENDENCY_TYPES</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">LOCALE_JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> dependency</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr/main/{locale}/currencies.json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> dependencyType</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DEPENDENCY_TYPES</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">SHARED_JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> dependency</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr/supplemental/currencyData.json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;date&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    dependsUpon</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;number&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    cldrGlobalizeFiles</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;globalize/date.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    json</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> dependencyType</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DEPENDENCY_TYPES</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">LOCALE_JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> dependency</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr/main/{locale}/ca-gregorian.json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> dependencyType</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DEPENDENCY_TYPES</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">LOCALE_JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> dependency</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr/main/{locale}/timeZoneNames.json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> dependencyType</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DEPENDENCY_TYPES</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">SHARED_JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> dependency</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr/supplemental/timeData.json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> dependencyType</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DEPENDENCY_TYPES</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">SHARED_JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> dependency</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr/supplemental/weekData.json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;message&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    dependsUpon</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;core&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    cldrGlobalizeFiles</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;globalize/message.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    json</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;number&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    dependsUpon</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;core&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    cldrGlobalizeFiles</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;globalize/number.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    json</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> dependencyType</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DEPENDENCY_TYPES</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">LOCALE_JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> dependency</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr/main/{locale}/numbers.json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> dependencyType</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DEPENDENCY_TYPES</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">SHARED_JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> dependency</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr/supplemental/numberingSystems.json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;plural&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    dependsUpon</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;core&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    cldrGlobalizeFiles</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;globalize/plural.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    json</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> dependencyType</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DEPENDENCY_TYPES</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">SHARED_JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> dependency</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr/supplemental/plurals.json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> dependencyType</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DEPENDENCY_TYPES</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">SHARED_JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> dependency</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr/supplemental/ordinals.json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;relativeTime&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    dependsUpon</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;number&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;plural&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    cldrGlobalizeFiles</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;globalize/relative-time.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    json</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> dependencyType</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DEPENDENCY_TYPES</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">LOCALE_JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> dependency</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr/main/{locale}/dateFields.json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">determineRequiredCldrData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">globalizeOptions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">determineRequired</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">globalizeOptions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">_populateDependencyCurrier</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;json&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">dependency</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">determineRequiredCldrGlobalizeFiles</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">globalizeOptions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">determineRequired</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">globalizeOptions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">_populateDependencyCurrier</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldrGlobalizeFiles&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">cldrGlobalizeFile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> cldrGlobalizeFile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">determineRequired</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">globalizeOptions</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> populateDependencies</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> modules </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 107)">Object</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">keys</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">globalizeOptions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  modules</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">forEach</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain">moduleDependencies</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword control-flow" style="font-style:italic">throw</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">TypeError</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;There is no \&#x27;&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> module </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;\&#x27; module&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> requireds </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  modules</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">forEach</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">globalizeOptions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">populateDependencies</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> requireds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> requireds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">_populateDependencyCurrier</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">requiredArray</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> requiredArrayGetter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">popDepFn</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">module</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> requireds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> dependencies </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> moduleDependencies</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    dependencies</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">dependsUpon</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">forEach</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">requiredModule</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">popDepFn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">requiredModule</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> requireds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    dependencies</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">requiredArray</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">forEach</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">required</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> newRequired </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">requiredArrayGetter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">required</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword control-flow" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">requireds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">indexOf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">newRequired</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">===</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        requireds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">push</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">newRequired</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> requireds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> popDepFn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  determineRequiredCldrData</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> determineRequiredCldrData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  determineRequiredCldrGlobalizeFiles</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> determineRequiredCldrGlobalizeFiles</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>You can even kind of tell that it was written in JavaScript thanks to the jshint rules at the top.</p><p>I fired up Atom and created a new folder <code>src/lib</code> and inside there I created <code>index.ts</code> (yes, <code>index.js</code> renamed) and <code>tsconfig.json</code>. By the way, you&#x27;ll notice I&#x27;m not leaving Atom - I&#x27;m making use of the magnificent <a href="https://atom.io/packages/atom-typescript" target="_blank" rel="noopener noreferrer">atom-typescript</a> which you should totally be using too. It rocks.</p><p><a href="http://2.bp.blogspot.com/-HkCD9qNaoaU/VgIwn4WTBTI/AAAAAAAAA4g/U2E1Ybe6acI/s1600/Screenshot%2B2015-09-23%2B05.51.14.png" target="_blank" rel="noopener noreferrer"><img src="http://2.bp.blogspot.com/-HkCD9qNaoaU/VgIwn4WTBTI/AAAAAAAAA4g/U2E1Ybe6acI/s640/Screenshot%2B2015-09-23%2B05.51.14.png" alt="null"></a>Now I&#x27;m not going to bore you with what I had to do to port the JS to TS (not much). If you&#x27;re interested, the source is <a href="https://github.com/johnnyreilly/globalize-so-what-cha-want/blob/master/src/lib/index.ts" target="_blank" rel="noopener noreferrer">here</a>. What&#x27;s more interesting is the <code>tsconfig.json</code> - as it&#x27;s this that is going to lead the generation of the JS and TS that we need:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><div tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;compileOnSave&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;compilerOptions&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;module&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;commonjs&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;declaration&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;target&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;es5&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;noImplicitAny&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;suppressImplicitAnyIndexErrors&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;removeComments&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;preserveConstEnums&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;sourceMap&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;outDir&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;../../&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;files&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;index.ts&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The things to notice are:</p><dl><dt>module</dt><dd>Publishing a commonjs module means it will play well with npm</dd><dt>declaration</dt><dd>This is what makes TypeScript generate <code>index.d.ts</code></dd><dt>outDir</dt><dd>We want to regenerate the <code>index.js</code> in the root (2 directories above this)</dd></dl><p>So now, what do we get when we build in Atom? Well, we&#x27;re generating an <code>&lt;a href=&quot;https://github.com/johnnyreilly/globalize-so-what-cha-want/blob/master/index.js&quot;&gt;index.js&lt;/a&gt;</code> file which looks like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DEPENDENCY_TYPES</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token constant" style="color:rgb(130, 170, 255)">SHARED_JSON</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Shared JSON (used by all locales)&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token constant" style="color:rgb(130, 170, 255)">LOCALE_JSON</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Locale specific JSON (supplied for each locale)&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> moduleDependencies </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;core&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    dependsUpon</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    cldrGlobalizeFiles</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr/event.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr/supplemental.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;globalize.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    json</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> dependencyType</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DEPENDENCY_TYPES</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">SHARED_JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> dependency</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr/supplemental/likelySubtags.json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;currency&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    dependsUpon</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;number&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;plural&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    cldrGlobalizeFiles</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;globalize/currency.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    json</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> dependencyType</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DEPENDENCY_TYPES</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">LOCALE_JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> dependency</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr/main/{locale}/currencies.json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> dependencyType</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DEPENDENCY_TYPES</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">SHARED_JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> dependency</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr/supplemental/currencyData.json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;date&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    dependsUpon</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;number&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    cldrGlobalizeFiles</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;globalize/date.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    json</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> dependencyType</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DEPENDENCY_TYPES</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">LOCALE_JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> dependency</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr/main/{locale}/ca-gregorian.json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> dependencyType</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DEPENDENCY_TYPES</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">LOCALE_JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> dependency</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr/main/{locale}/timeZoneNames.json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> dependencyType</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DEPENDENCY_TYPES</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">SHARED_JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> dependency</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr/supplemental/timeData.json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> dependencyType</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DEPENDENCY_TYPES</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">SHARED_JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> dependency</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr/supplemental/weekData.json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;message&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    dependsUpon</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;core&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    cldrGlobalizeFiles</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;globalize/message.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    json</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;number&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    dependsUpon</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;core&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    cldrGlobalizeFiles</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;globalize/number.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    json</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> dependencyType</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DEPENDENCY_TYPES</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">LOCALE_JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> dependency</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr/main/{locale}/numbers.json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> dependencyType</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DEPENDENCY_TYPES</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">SHARED_JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> dependency</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr/supplemental/numberingSystems.json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;plural&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    dependsUpon</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;core&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    cldrGlobalizeFiles</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;globalize/plural.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    json</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> dependencyType</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DEPENDENCY_TYPES</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">SHARED_JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> dependency</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr/supplemental/plurals.json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> dependencyType</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DEPENDENCY_TYPES</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">SHARED_JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> dependency</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr/supplemental/ordinals.json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;relativeTime&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    dependsUpon</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;number&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;plural&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    cldrGlobalizeFiles</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;globalize/relative-time.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    json</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> dependencyType</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DEPENDENCY_TYPES</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">LOCALE_JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> dependency</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldr/main/{locale}/dateFields.json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">determineRequired</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">globalizeOptions</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> populateDependencies</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> modules </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 107)">Object</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">keys</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">globalizeOptions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  modules</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">forEach</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain">moduleDependencies</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword control-flow" style="font-style:italic">throw</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">TypeError</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;There is no \&#x27;&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> module </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;\&#x27; module&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> requireds </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  modules</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">forEach</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">globalizeOptions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">populateDependencies</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> requireds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> requireds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">_populateDependencyCurrier</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">requiredArray</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> requiredArrayGetter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">popDepFn</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">module</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> requireds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> dependencies </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> moduleDependencies</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    dependencies</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">dependsUpon</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">forEach</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">requiredModule</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">popDepFn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">requiredModule</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> requireds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    dependencies</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">requiredArray</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">forEach</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">required</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> newRequired </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">requiredArrayGetter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">required</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword control-flow" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">requireds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">indexOf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">newRequired</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">===</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        requireds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">push</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">newRequired</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> requireds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> popDepFn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * The string array returned will contain a list of the required cldr json data you need. I don&#x27;t believe ordering matters for the json but it is listed in the same dependency order as the cldr / globalize files are.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @param options The globalize modules being used.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">determineRequiredCldrData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">globalizeOptions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">determineRequired</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">globalizeOptions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">_populateDependencyCurrier</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;json&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">dependency</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exports</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">determineRequiredCldrData</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> determineRequiredCldrData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * The string array returned will contain a list of the required cldr / globalize files you need, listed in the order they are required.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @param options The globalize modules being used.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">determineRequiredCldrGlobalizeFiles</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">globalizeOptions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">determineRequired</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">globalizeOptions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">_populateDependencyCurrier</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cldrGlobalizeFiles&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">cldrGlobalizeFile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> cldrGlobalizeFile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exports</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">determineRequiredCldrGlobalizeFiles</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> determineRequiredCldrGlobalizeFiles</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Aside from one method moving internally and me adding some JSDoc, the only really notable change is the end of the file. TypeScript, when generating commonjs, doesn&#x27;t use the <code>module.exports = {}</code> approach. Rather, it drops exported functions onto the <code>exports</code> object as functions are exported. Functionally this is <em>identical</em>.</p><p>Now for our big finish: happily sat alongside is <code>index.js</code> is the <code>&lt;a href=&quot;https://github.com/johnnyreilly/globalize-so-what-cha-want/blob/master/index.d.ts&quot;&gt;index.d.ts&lt;/a&gt;</code> file:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><div tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">Options</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  currency</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">boolean</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  date</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">boolean</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  message</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">boolean</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token builtin" style="color:rgb(130, 170, 255)">number</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">boolean</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  plural</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">boolean</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  relativeTime</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">boolean</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * The string array returned will contain a list of the required cldr json data you need. I don&#x27;t believe ordering matters for the json but it is listed in the same dependency order as the cldr / globalize files are.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @param options The globalize modules being used.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">declare</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">determineRequiredCldrData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">globalizeOptions</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">Options</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * The string array returned will contain a list of the required cldr / globalize files you need, listed in the order they are required.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @param options The globalize modules being used.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">declare</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">determineRequiredCldrGlobalizeFiles</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">globalizeOptions</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">Options</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>We&#x27;re there, huzzah! This has been now published to npm - anyone consuming this package can use TypeScript straight out of the box. I really hope that publishing npm packages in this fashion becomes much more commonplace. Time will tell.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ps-im-not-the-only-one"></a>PS I&#x27;m not the only one<a class="hash-link" href="#ps-im-not-the-only-one" title="Direct link to heading">#</a></h2><p>I was just about to hit &quot;publish&quot; when I happened upon <a href="https://twitter.com/basarat" target="_blank" rel="noopener noreferrer">Basarat</a>&#x27;s <a href="https://github.com/basarat/ts-npm-module" target="_blank" rel="noopener noreferrer">ts-npm-module</a> which is a project on GitHub which demo&#x27;s how to publish and consume TypeScript using npm. I&#x27;d say great minds think alike but I&#x27;m pretty sure Basarat&#x27;s mind is far greater than mine! (Cough, atom-typescript, cough.) Either way, it&#x27;s good to see validation for the approach I&#x27;m suggesting.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="pps-update-23092015-0951"></a>PPS Update 23/09/2015 09:51<a class="hash-link" href="#pps-update-23092015-0951" title="Direct link to heading">#</a></h2><p>One of the useful things about writing a blog is that you get to learn. Since I published I&#x27;ve become aware of a few things somewhat relevant to this post. First of all, there is still work ongoing in TypeScript land around this topic. Essentially there are problems resolving dependency conflicts when different dependencies have different versions - you can take part in the ongoing discussion <a href="https://github.com/Microsoft/TypeScript/issues/4665" target="_blank" rel="noopener noreferrer">here</a>. There&#x27;s also some useful resources to look at:</p><ul><li><a href="https://github.com/Microsoft/TypeScript/wiki/Typings-for-npm-packages" target="_blank" rel="noopener noreferrer">https://github.com/Microsoft/TypeScript/wiki/Typings-for-npm-packages</a></li><li><a href="https://basarat.gitbooks.io/typescript/content/docs/node/nodejs.html" target="_blank" rel="noopener noreferrer">https://basarat.gitbooks.io/typescript/content/docs/node/nodejs.html</a></li></ul></div><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/tags/npm">npm</a><a class="margin-horiz--sm" href="/tags/definitely-typed">DefinitelyTyped</a><a class="margin-horiz--sm" href="/tags/type-script">TypeScript</a><a class="margin-horiz--sm" href="/tags/atom-typescript">atom-typescript</a></div><div class="col text--right"><a aria-label="Read more about Definitely Typed Shouldn&#x27;t Exist" href="/2015/09/23/authoring-npm-modules-with-typescript"><strong>Read More</strong></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_GeHD"><a href="/2013/11/04/typescript-dont-forget-build-action-for-implicit-referencing">TypeScript: Don&#x27;t forget Build Action for Implicit Referencing...</a></h2><div class="margin-vert--md"><time datetime="2013-11-04T00:00:00.000Z" class="blogPostDate_fNvV">November 4, 2013 ¬∑ 2 min read</time></div><div class="avatar margin-vert--md"><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><div class="markdown"><p>As part of the <a href="https://typescript.codeplex.com/wikipage?title=Known%20breaking%20changes%20between%200.8%20and%200.9&amp;referringTitle=Documentation" target="_blank" rel="noopener noreferrer">known breaking changes between 0.9 and 0.9.1</a> there was this subtle but significant switch:</p><blockquote><p>In Visual Studio, all TypeScript files in a project are considered to be referencing each other</p><p><em>Description:</em> Previously, all TypeScript files in a project had to reference each other explicitly. With 0.9.1, they now implicitly reference all other TypeScript files in the project. For existing projects that fit multiple projects into a single projects, these will now have to be separate projects.</p><p><em>Reason:</em> This greatly simplifies using TypeScript in the project context.</p></blockquote><p>Having been <a href="https://typescript.codeplex.com/workitem/1471" target="_blank" rel="noopener noreferrer">initially resistant</a> to this change I recently decided to give it a try. That is to say I started pulling out the <code>/// &amp;lt;reference</code>&#x27;s from my TypeScript files. However, to my surprise, pulling out these references stopped my TypeScript from compiling and killed my Intellisense. After wrestling with this for a couple of hours I finally <a href="https://typescript.codeplex.com/workitem/1855" target="_blank" rel="noopener noreferrer">filed an issue on the TypeScript CodePlex site</a>. (Because clearly the problem was with TypeScript and not how I was using it, right?)</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="wrong"></a>Wrong!<a class="hash-link" href="#wrong" title="Direct link to heading">#</a></h2><p>When I looked through my typing files (*.d.ts) I found that, pretty much without exception, all had a Build Action of &quot;Content&quot; and not &quot;TypeScriptCompile&quot;. I went through the project and switched the files over to being &quot;TypeScriptCompile&quot;. This resolved the issue and I was then able to pull out the remaining <code>/// &amp;lt;reference</code> comments from the codebase (though I did have to restart Visual Studio to get the Intellisense working).</p><p>Most, if not all, of the typing files had been pulled in from NuGet and are part of the <a href="https://github.com/borisyankov/DefinitelyTyped" target="_blank" rel="noopener noreferrer">DefinitelyTyped</a> project on GitHub. Unfortunately, at present, when TypeScript NuGet packages are added they are added without the &quot;TypeScriptCompile&quot; Build Action. I was going to post an issue there and ask if it&#x27;s possible for NuGet packages to pull in typings files as &quot;TypeScriptCompile&quot; from the off - fortunately a chap called Natan Vivo <a href="https://github.com/borisyankov/DefinitelyTyped/issues/1138" target="_blank" rel="noopener noreferrer">already has</a>.</p><p>So until this issue is resolved it&#x27;s probably a good idea to check that your TypeScript files are set to the correct Build Action in your project. And every time you upgrade your TypeScript NuGet packages double check that you still have the correct Build Action afterwards (and to get Intellisense working in VS 2012 at least you&#x27;ll need to close and re-open the solution as well).</p></div><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/tags/type-script-compile">TypeScriptCompile</a><a class="margin-horiz--sm" href="/tags/build-action">BuildAction</a><a class="margin-horiz--sm" href="/tags/definitely-typed">DefinitelyTyped</a><a class="margin-horiz--sm" href="/tags/type-script">TypeScript</a><a class="margin-horiz--sm" href="/tags/nu-get">NuGet</a></div><div class="col text--right"><a aria-label="Read more about TypeScript: Don&#x27;t forget Build Action for Implicit Referencing..." href="/2013/11/04/typescript-dont-forget-build-action-for-implicit-referencing"><strong>Read More</strong></a></div></footer></article></div></main></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a href="https://www.buymeacoffee.com/qUBm0Wh" target="_blank"><img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me A Coffee" style="height: 60px !important;width: 217px !important;"></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2021 John Reilly. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/styles.46f4853d.js"></script>
<script src="/assets/js/runtime~main.6eba6eb2.js"></script>
<script src="/assets/js/main.ad5bf55b.js"></script>
<script src="/assets/js/1.40d4c38d.js"></script>
<script src="/assets/js/2.efe45cdf.js"></script>
<script src="/assets/js/6875c492.1e1d7044.js"></script>
<script src="/assets/js/c3b5bd8c.e43a454c.js"></script>
<script src="/assets/js/fca55932.0d0332f0.js"></script>
<script src="/assets/js/3844e31e.0404e0c2.js"></script>
<script src="/assets/js/0ffd0b88.c62d826d.js"></script>
<script src="/assets/js/78d410a3.fdeeeb57.js"></script>
<script src="/assets/js/de995ae1.492217a4.js"></script>
<script src="/assets/js/84c6cc5c.c060c046.js"></script>
<script src="/assets/js/8f5729b9.b3a03205.js"></script>
<script src="/assets/js/7f06378e.86820332.js"></script>
</body>
</html>