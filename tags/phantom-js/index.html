<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog.johnnyreilly.com/rss.xml" title="I CAN MAKE THIS WORK Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog.johnnyreilly.com/atom.xml" title="I CAN MAKE THIS WORK Blog Atom Feed"><title data-react-helmet="true">Posts tagged &quot;phantomjs&quot; | I CAN MAKE THIS WORK</title><meta data-react-helmet="true" property="og:title" content="Posts tagged &quot;phantomjs&quot; | I CAN MAKE THIS WORK"><meta data-react-helmet="true" name="description" content="Blog | Tagged &quot;phantomjs&quot;"><meta data-react-helmet="true" property="og:description" content="Blog | Tagged &quot;phantomjs&quot;"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><link data-react-helmet="true" rel="shortcut icon" href="/blog.johnnyreilly.com/img/favicon.ico"><link rel="stylesheet" href="/blog.johnnyreilly.com/styles.a755cef0.css">
<link rel="preload" href="/blog.johnnyreilly.com/styles.7c653e04.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/runtime~main.8fae10d8.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/main.aa01ada2.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/1.a2fa6ec1.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/2.541c8135.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/6875c492.9c59a0eb.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/c3b5bd8c.b5dc6e8e.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/a85c317d.eec0cf8e.js" as="script">
<link rel="preload" href="/blog.johnnyreilly.com/1e0c5de7.ef6a7714.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/blog.johnnyreilly.com/"><img src="/blog.johnnyreilly.com/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/blog.johnnyreilly.com/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">I CAN MAKE THIS WORK</strong></a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/blog.johnnyreilly.com/"><img src="/blog.johnnyreilly.com/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/blog.johnnyreilly.com/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">I CAN MAKE THIS WORK</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"></ul></div></div></div></nav><div class="main-wrapper blog-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--2"><div class="sidebar_SWld thin-scrollbar"><h3 class="sidebarItemTitle_Km2m">Recent posts</h3><ul class="sidebarItemList_3UpA"><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog.johnnyreilly.com/2021/03/10/managed-identity-azure-sql-entity-framework">Managed Identity, Azure SQL and Entity Framework</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog.johnnyreilly.com/2021/03/06/generate-typescript-and-csharp-clients-with-nswag">Generate TypeScript and CSharp clients with NSwag based on an API</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog.johnnyreilly.com/2021/02/27/goodbye-client-affinity-hello-data-protection-with-azure">Goodbye Client Affinity, Hello Data Protection with Azure</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog.johnnyreilly.com/2021/02/16/easy-auth-tokens-survive-releases-on-linux-azure-app-service">Making Easy Auth tokens survive releases on Linux Azure App Service</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog.johnnyreilly.com/2021/02/11/azure-app-service-health-checks-and-zero-downtime-deployments">Azure App Service, Health checks and zero downtime deployments</a></li></ul></div></div><main class="col col--8"><h1>1 post tagged with &quot;phantomjs&quot;</h1><a href="/blog.johnnyreilly.com/tags">View All Tags</a><div class="margin-vert--xl"><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_3-lP"><a href="/blog.johnnyreilly.com/2017/08/27/karma-from-phantomjs-to-headless-chrome">Karma: From PhantomJS to Headless Chrome</a></h2><div class="margin-vert--md"><time datetime="2017-08-27T00:00:00.000Z" class="blogPostDate_Ta7i">August 27, 2017  Â· 2 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener"><img src="https://avatars.githubusercontent.com/u/1010525?s=400&amp;u=294033082cfecf8ad1645b4290e362583b33094a&amp;v=4" alt="John Reilly"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/johnnyreilly" target="_blank" rel="noreferrer noopener">John Reilly</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><p>Like pretty much everyone else I&#x27;ve been using PhantomJS to run my JavaScript (or compiled-to-JS) unit tests. It&#x27;s been great. So when I heard the news that <a href="https://news.ycombinator.com/item?id=14105489" target="_blank" rel="noopener noreferrer">PhantomJS was dead</a> I was genuinely sad. However, the King is dead.... Long live the King! For there is a new hope; it&#x27;s called <a href="https://developers.google.com/web/updates/2017/04/headless-chrome" target="_blank" rel="noopener noreferrer">Chrome Headless </a>. It&#x27;s not a separate version of Chrome; rather the ability to run Chrome without a UI is now baked into Google&#x27;s favourite browser as of v59. (For those history buffs I might as well be clear: the main reason PhantomJS died is because Chrome Headless was in the works.)</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="making-the-switch"></a>Making the Switch<a class="hash-link" href="#making-the-switch" title="Direct link to heading">#</a></h2><p>As long as you&#x27;re running Chrome v59 or greater then you can switch. I&#x27;ve just made ts-loader&#x27;s execution test pack run with Chrome Headless instead of PhantomJS and I&#x27;ve rarely been happier. Honest. Some context: the execution test pack runs Jasmine unit tests via the <a href="https://karma-runner.github.io/1.0/index.html" target="_blank" rel="noopener noreferrer">Karma test runner</a>. The move was surprisingly easy and you can see just how minimal it was in the PR <a href="https://github.com/TypeStrong/ts-loader/pull/611/files" target="_blank" rel="noopener noreferrer">here</a>. If you want to migrate a test that runs tests via Karma then this will take you through what you need to do.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="packagejson"></a><code>package.json</code><a class="hash-link" href="#packagejson" title="Direct link to heading">#</a></h2><p>You no longer need <code>phantomjs-prebuilt</code> as a dev dependency of your project. That&#x27;s the PhantomJS browser disappearing in the rear view mirror. Next we need to replace <code>karma-phantomjs-launcher</code> with <code>karma-chrome-launcher</code>. These packages are responsible for firing up the browser that the tests are run in and we no longer want to invoke PhantomJS; we&#x27;re Chrome all the way baby.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="karmaconfjs"></a><code>karma.conf.js</code><a class="hash-link" href="#karmaconfjs" title="Direct link to heading">#</a></h2><p>You need to tell Karma to use Chrome Headless instead of PhantomJS. You do that by replacing</p><div class="mdxCodeBlock_1zKU">   browsers: [ &#x27;PhantomJS&#x27; ],</div><p>with</p><div class="mdxCodeBlock_1zKU">   browsers: [ &#x27;ChromeHeadless&#x27; ],</div><p>That&#x27;s it; job done!</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="continuous-integration"></a>Continuous Integration<a class="hash-link" href="#continuous-integration" title="Direct link to heading">#</a></h2><p>There&#x27;s always one more thing isn&#x27;t there? Yup, ts-loader has CI builds that run on <a href="https://ci.appveyor.com/project/JohnReilly/ts-loader/branch/master" target="_blank" rel="noopener noreferrer">Windows with AppVeyor</a> and <a href="https://travis-ci.org/TypeStrong/ts-loader" target="_blank" rel="noopener noreferrer">Linux with Travis</a>. The AppVeyor build went green on the first run; that&#x27;s because Chrome is installed by default in the AppVeyor build environment. (yay!)</p><p>Travis went red. (boooo!) Travis doesn&#x27;t have Chrome installed by default. But it&#x27;s no biggie; you just need to tweak your <code>.travis.yml</code> like so:</p><div class="mdxCodeBlock_1zKU">dist: trusty addons: chrome: stable</div><p>This includes Chrome in the Travis build environment. Green. Boom!</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/chrome">Chrome</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/karma">Karma</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/phantom-js">PhantomJS</a><a class="margin-horiz--sm" href="/blog.johnnyreilly.com/tags/headless">Headless</a></div><div class="col text--right"><a aria-label="Read more about Karma: From PhantomJS to Headless Chrome" href="/blog.johnnyreilly.com/2017/08/27/karma-from-phantomjs-to-headless-chrome"><strong>Read More</strong></a></div></footer></article></div></main></div></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 John Reilly. Built with Docusaurus.</div></div></div></footer></div>
<script src="/blog.johnnyreilly.com/styles.7c653e04.js"></script>
<script src="/blog.johnnyreilly.com/runtime~main.8fae10d8.js"></script>
<script src="/blog.johnnyreilly.com/main.aa01ada2.js"></script>
<script src="/blog.johnnyreilly.com/1.a2fa6ec1.js"></script>
<script src="/blog.johnnyreilly.com/2.541c8135.js"></script>
<script src="/blog.johnnyreilly.com/6875c492.9c59a0eb.js"></script>
<script src="/blog.johnnyreilly.com/c3b5bd8c.b5dc6e8e.js"></script>
<script src="/blog.johnnyreilly.com/a85c317d.eec0cf8e.js"></script>
<script src="/blog.johnnyreilly.com/1e0c5de7.ef6a7714.js"></script>
</body>
</html>